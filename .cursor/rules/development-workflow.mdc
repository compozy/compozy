---
description: Development workflow and configuration patterns for Compozy
globs: **/*.{go,yaml,yml}
alwaysApply: true
---

# Development Workflow & Configuration

## Development Workflow

**Before commits - MANDATORY:**
```bash
make fmt && make lint && make test
```

**Architecture Requirements:**
- Domain structure: `engine/{agent,task,tool,workflow,runtime,infra}/`
- Clean separation of concerns
- Interface-driven design

## Configuration Patterns

**Project Configuration (`compozy.yaml`):**
```yaml
name: project-name
version: 0.1.0

workflows:
    - source: ./workflow.yaml

models:
    - provider: ollama|openai|groq
      model: model-name
      api_key: "{{ .env.API_KEY }}"

runtime:
    permissions:
        - --allow-read
        - --allow-net
```

**Environment Variables:**
- Development: Use `.env` files
- Production: Environment-based configuration
- **CRITICAL:** Never commit API keys or secrets
