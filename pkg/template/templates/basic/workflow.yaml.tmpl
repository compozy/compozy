id: greeter
version: 0.1.0
description: Generate personalized greetings

schemas:
  - id: greeting_input
    type: object
    properties:
      name:
        type: string
        description: The person's name to greet
      style:
        type: string
        description: Greeting style (friendly, formal, casual, enthusiastic)
        default: friendly
    required:
      - name
      - style

config:
  input:
    $ref: local::schemas.#(id=="greeting_input")

tools:
  - id: greeting_tool
    description: Generate personalized greetings
    input:
      $ref: local::schemas.#(id=="greeting_input")

agents:
  - id: greeter
    instructions: |
      You are a friendly assistant that creates personalized greetings.
      Use the greeting tool to generate an appropriate greeting, then enhance it with a thoughtful message.
    actions:
      - id: create_greeting
        prompt: |
          Please create a greeting for {{`{{ .workflow.input.name }}`}} using the {{`{{ .workflow.input.style }}`}} style.
          After generating the greeting, add a brief, personalized message to make it more engaging.

tasks:
  - id: greet
    type: basic
    $use: agent(local::agents.#(id=="greeter"))
    action: create_greeting
    final: true

outputs:
  greeting: "{{`{{ .tasks.greet.output }}`}}"
  user: "{{`{{ .workflow.input.name }}`}}"
  style: "{{`{{ .workflow.input.style }}`}}"
