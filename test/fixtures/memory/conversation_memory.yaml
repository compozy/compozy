resource: memory
id: conversation_memory
description: Conversation history with privacy protection
version: 0.1.0

key: "conv:{{.user_id}}:{{.session_id}}"
type: token_based
max_tokens: 4000
max_messages: 100

persistence:
  type: redis
  ttl: 24h

privacy_policy:
  redact_patterns:
    - '\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b'  # Email
    - '\b\d{3}-\d{2}-\d{4}\b'  # SSN
  non_persistable_message_types:
    - system
    - tool
  default_redaction_string: "[REDACTED]"

flushing_strategy:
  type: hybrid_summary
  threshold: 0.8
  summarize_threshold: 0.6
  summary_tokens: 500
