name: basic-task-with-error

workflow:
  id: test-error-workflow
  version: "1.0.0"
  tasks:
    - id: error-task
      type: basic
      action: test-action
      with:
        operation: "fail"
        error_message: "Simulated error"
      on_error:
        next: error-handler
    - id: error-handler
      type: basic
      action: test-action
      with:
        operation: "handle_error"
      outputs:
        handled: true

expected:
  workflow_state:
    status: "SUCCESS"
    total_tasks: 2
    completed_tasks: 1
  task_states:
    - name: error-task
      status: "FAILED"
      error: "Simulated error"
    - name: error-handler
      status: "SUCCESS"
      output:
        handled: true
