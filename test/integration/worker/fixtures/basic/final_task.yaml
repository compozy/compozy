name: basic-final-task

workflow:
  id: test-final-workflow
  version: "1.0.0"
  tasks:
    - id: setup-task
      type: basic
      action: test-action
      with:
        operation: "setup"
      on_success:
        next: process-task
    - id: process-task
      type: basic
      action: test-action
      with:
        operation: "process"
      on_success:
        next: final-task
    - id: final-task
      type: basic
      action: test-action
      final: true
      with:
        operation: "finalize"
      outputs:
        completed: true
        summary: "All tasks completed"
    - id: should-not-run
      type: basic
      action: test-action
      with:
        operation: "should-not-execute"

expected:
  workflow_state:
    status: "SUCCESS"
    total_tasks: 4
    completed_tasks: 3
  task_states:
    - name: setup-task
      status: "SUCCESS"
    - name: process-task
      status: "SUCCESS"
    - name: final-task
      status: "SUCCESS"
      output:
        completed: true
        summary: "All tasks completed"
