# Task ID: 11
# Title: Update Workflow Completion Logic
# Status: done
# Dependencies: 10
# Priority: high
# Description: Modify workflow engine to determine completion status from child task aggregates instead of ParallelState
# Details:
Update workflow completion detection:
1. Replace ParallelState-based completion checks with SQL aggregate queries
2. Implement logic to mark parent tasks as completed when all children are completed
3. Handle failure propagation from children to parent tasks
4. Update status derivation rules based on child task states
5. Implement proper cascading status updates
6. Use the GetParallelProgress method to determine parent task status
Example logic:
```go
if allChildrenCompleted {
    parentState.Status = "completed"
} else if anyChildFailed {
    parentState.Status = "failed"
} else if anyChildRunning {
    parentState.Status = "running"
}
```

# Test Strategy:
Integration tests for workflow completion scenarios, test various child completion patterns, test failure propagation, test status consistency across parent-child relationships
