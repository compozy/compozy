---
title: Overview
description: "Understanding Model Context Protocol (MCP) integration in Compozy"
---

Model Context Protocol (MCP) is a standardized protocol that enables AI agents to interact with external tools, services, and data sources through a unified interface. It bridges the gap between language models and the external world, providing a consistent way for agents to extend their capabilities beyond their core language model functionality.

<Callout type="info">
**MCP in Compozy**: The MCP system acts as a universal adapter, allowing your AI agents to seamlessly integrate with external tools, APIs, and services without custom integration code.
</Callout>

## Quick Navigation

<ReferenceCardList cols={3}>
  <ReferenceCard
    title="MCP Proxy Server"
    href="/docs/core/mcp/mcp-proxy-server"
    description="Central gateway architecture"
    icon="Radio"
  />
  <ReferenceCard
    title="Transport Configuration"
    href="/docs/core/mcp/transport-configuration"
    description="Communication protocols"
    icon="Link2"
  />
  <ReferenceCard
    title="Security & Authentication"
    href="/docs/core/mcp/security-authentication"
    description="Secure your MCP setup"
    icon="Shield"
  />
</ReferenceCardList>

## What is MCP?

MCP is a protocol that allows AI agents to:

<FeatureCardList cols={2}>
  <FeatureCard
    title="File System Access"
    description="Read, write, and manipulate files and directories"
    icon="FileCode"
  />
  <FeatureCard
    title="Database Operations"
    description="Query and modify databases with SQL and NoSQL support"
    icon="Database"
  />
  <FeatureCard
    title="API Integration"
    description="Interact with external REST APIs and web services"
    icon="Globe"
  />
  <FeatureCard
    title="Code Execution"
    description="Run Python, JavaScript, and other code runtimes"
    icon="Cpu"
  />
</FeatureCardList>

## Architecture Overview

<Mermaid chart={`graph LR
    A[Workflow Task] -->|Invokes| B[AI Agent]
    B -->|HTTP| C[MCP Proxy]
    C -->|Routes| D[MCP Servers]
    D -->|Execute| E[External Tools]

    B -->|Uses| F[LLM Provider]
    B -->|Accesses| G[Memory]

    D --> H[Local Tools]
    D --> I[Remote APIs]
    D --> J[Databases]`} />

<Callout type="info" className="my-8">
**Proxy Architecture**: The MCP proxy runs on port 6001 and manages all server connections, providing a unified HTTP interface for multiple transport types.
</Callout>

### Key Components

<AccordionGroup>
<Accordion title="MCP Proxy" icon="Radio">
Central gateway that manages all MCP server connections, handles routing, authentication, and provides a unified HTTP interface for multiple MCP servers.

**Features:**
- Multi-transport support (stdio, SSE, HTTP)
- Dynamic server registration
- Connection pooling and health monitoring
- Token-based authentication
</Accordion>

<Accordion title="MCP Servers" icon="Package">
External services that provide tools and capabilities to AI agents. These can be local processes, Docker containers, or remote HTTP services.

**Types:**
- Local process servers (stdio)
- Remote HTTP servers (SSE)
- Streaming HTTP servers (streamable-http)
- Docker-based servers
</Accordion>

<Accordion title="AI Agents" icon="BrainCircuit">
Your AI applications that use MCP tools to extend their capabilities. Agents configure MCP servers and use them through the proxy.

**Capabilities:**
- Tool discovery and selection
- Context-aware tool usage
- Error handling and retries
- Resource management
</Accordion>

<Accordion title="Transport Layer" icon="Link2">
Communication protocols that enable different types of MCP server connections based on your needs.

**Protocols:**
- **stdio**: Standard I/O for local processes
- **sse**: Server-Sent Events for real-time HTTP streaming
- **streamable-http**: HTTP with streaming for large responses
</Accordion>
</AccordionGroup>

## MCP Server Types

<Tabs defaultValue="remote" items={["remote", "local", "docker"]}>
<Tab value="remote">
**Remote MCP Servers (HTTP/HTTPS)**

Remote servers accessed via network endpoints using Server-Sent Events (SSE) or HTTP streaming:

```yaml title="Weather API Server"
mcps:
  - id: weather-api
    url: "https://api.weather-mcp.com/v1"
    transport: sse
    headers:
      Authorization: "Bearer {{ .env.WEATHER_API_KEY }}"
    timeout: 30s
    auto_reconnect: true
```

<Callout type="info">
**Best For**: Third-party APIs, cloud services, real-time data feeds
</Callout>
</Tab>

<Tab value="local">
**Local Process Servers (stdio)**

Child processes spawned locally, communicating via standard I/O:

```yaml title="Filesystem Server"
mcps:
  - id: filesystem
    command: "mcp-server-filesystem"
    args: ["--root", "/data"]
    transport: stdio
    env:
      LOG_LEVEL: "debug"
      MAX_FILE_SIZE: "10MB"
```

<Callout type="info">
**Best For**: Local file operations, command-line tools, high-performance local communication
</Callout>
</Tab>

<Tab value="docker">
**Docker-based Servers**

Run MCP servers in containers with environment configuration:

```yaml title="Database Server"
mcps:
  - id: database
    command: "docker run --rm -i mcp-postgres:latest"
    transport: stdio
    env:
      DATABASE_URL: "postgres://user:pass@db/myapp"
      POOL_SIZE: "10"
    start_timeout: 30s
```

<Callout type="info">
**Best For**: Isolated environments, complex dependencies, microservices architecture
</Callout>
</Tab>
</Tabs>

## Transport Types Comparison

<Table>
<TableHeader>
  <TableRow>
    <TableHead>Transport</TableHead>
    <TableHead>Description</TableHead>
    <TableHead>Use Case</TableHead>
    <TableHead>Performance</TableHead>
  </TableRow>
</TableHeader>
<TableBody>
  <TableRow>
    <TableCell className="font-mono">sse</TableCell>
    <TableCell>Server-Sent Events</TableCell>
    <TableCell>Real-time streaming from HTTP servers</TableCell>
    <TableCell>Medium latency, good for real-time</TableCell>
  </TableRow>
  <TableRow>
    <TableCell className="font-mono">streamable-http</TableCell>
    <TableCell>HTTP with streaming</TableCell>
    <TableCell>Large responses, file transfers</TableCell>
    <TableCell>High throughput, handles large data</TableCell>
  </TableRow>
  <TableRow>
    <TableCell className="font-mono">stdio</TableCell>
    <TableCell>Standard I/O</TableCell>
    <TableCell>Local processes, Docker containers</TableCell>
    <TableCell>Low latency, high performance</TableCell>
  </TableRow>
</TableBody>
</Table>

## Key Features

<FeatureCardList cols={2}>
  <FeatureCard
    title="Dynamic Registration"
    description="Hot-add, update, or remove servers via Admin API with zero downtime"
    icon="RefreshCw"
  />
  <FeatureCard
    title="Security & Authentication"
    description="Token-based auth, IP allow-lists, and environment variable management"
    icon="Shield"
  />
  <FeatureCard
    title="Observability & Monitoring"
    description="Health checks, metrics tracking, and comprehensive logging"
    icon="BarChart3"
  />
  <FeatureCard
    title="Tool Discovery"
    description="Automatic discovery and aggregation across multiple servers"
    icon="Eye"
  />
</FeatureCardList>

## Environment Requirements

<Callout type="warning">
**Required Configuration**: The MCP system requires these environment variables to function properly.
</Callout>

```bash title="Environment Variables"
# Required: MCP proxy service URL
MCP_PROXY_URL=http://localhost:6001

# Optional: Admin token for proxy management
MCP_PROXY_ADMIN_TOKEN=your-admin-token

# Optional: Global authentication token
MCP_PROXY_GLOBAL_AUTH_TOKEN=global-token
```

## Quick Start with CLI

Get started with MCP in Compozy using the CLI:

```bash
# 1. Initialize a new project
compozy init my-mcp-project
cd my-mcp-project

# 2. Start the development environment
compozy dev --watch

# 3. In another terminal, start the MCP proxy
compozy-mcp-proxy --port 6001 --debug
```

<Steps>
<Step title="Initialize Project">
Use `compozy init` to create a new project with MCP support and default configurations.
</Step>
<Step title="Start Development Server">
Run `compozy dev --watch` to start the development server with hot reload capabilities.
</Step>
<Step title="Start MCP Proxy">
Launch `compozy-mcp-proxy` to handle all MCP server connections and routing.
</Step>
<Step title="Test Integration">
Use `compozy workflow execute` to verify that your workflows can use MCP tools.
</Step>
</Steps>

## Integration with Compozy Workflow System

MCP seamlessly integrates with Compozy's workflow orchestration through a unified architecture:

<Mermaid chart={`
sequenceDiagram
    participant Agent as AI Agent
    participant Client as MCP Client
    participant Proxy as MCP Proxy (6001)
    participant Server as MCP Server
    participant Service as External Service

    Agent->>Client: Request Tool Use
    Client->>Proxy: HTTP Request
    Proxy->>Server: Transport Call
    Server->>Service: Service Operation
    Service-->>Server: Response
    Server-->>Proxy: MCP Response
    Proxy-->>Client: HTTP Response
    Client-->>Agent: Tool Result

    Note over Agent,Service: Fault-tolerant with automatic retries
    Note over Proxy: Handles authentication & connection pooling
    Note over Server: Supports stdio, SSE, and HTTP transports
`} />

## Integration with Components

<FeatureCardList cols={2}>
  <FeatureCard
    title="Agent Configuration"
    href="/docs/core/agents/overview"
    icon="Users"
  >
    Configure MCP servers in your AI agents for extended capabilities
  </FeatureCard>
  <FeatureCard
    title="Task Integration"
    href="/docs/core/tasks/basic-tasks"
    icon="GitBranch"
  >
    Use MCP tools within workflow tasks for external service integration
  </FeatureCard>
  <FeatureCard
    title="Tool Development"
    href="/docs/core/tools/overview"
    icon="Code"
  >
    Learn how MCP complements TypeScript tool development
  </FeatureCard>
  <FeatureCard
    title="Configuration Setup"
    href="/docs/core/configuration/providers"
    icon="Settings"
  >
    Set up MCP providers in your project configuration
  </FeatureCard>
</FeatureCardList>

## Learning Paths

<Tabs defaultValue="Beginner" items={["Beginner", "Intermediate", "Advanced"]}>
<Tab>
<ReferenceCardList>
  <ReferenceCard
    title="CLI Quick Start"
    description="Use `compozy init` and `compozy dev` to get started in minutes"
    href="/docs/core/getting-started/quick-start"
    icon="Terminal"
  />
  <ReferenceCard
    title="First Workflow Tutorial"
    description="Step-by-step guide to creating MCP-powered workflows"
    href="/docs/core/getting-started/first-workflow"
    icon="PlayCircle"
  />
  <ReferenceCard
    title="Agent Basics"
    description="Learn agent configuration before MCP integration"
    href="/docs/core/agents/overview"
    icon="BrainCircuit"
  />
</ReferenceCardList>
</Tab>

<Tab>
<ReferenceCardList>
  <ReferenceCard
    title="Transport Configuration"
    description="Master stdio, SSE, and HTTP transport protocols"
    href="/docs/core/mcp/transport-configuration"
    icon="Network"
  />
  <ReferenceCard
    title="Security & Authentication"
    description="Secure your MCP deployments with proper authentication"
    href="/docs/core/mcp/security-authentication"
    icon="Shield"
  />
</ReferenceCardList>
</Tab>

</Tabs>
