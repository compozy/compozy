---
title: "YAML Basics"
description: "Fundamental YAML syntax and patterns for Compozy configurations"
---

This guide covers the fundamental YAML syntax and patterns used throughout Compozy configurations. Understanding these basics is essential for creating effective workflows, agents, and tools.

## YAML Fundamentals

<FeatureCardList cols={3} size="sm">
  <FeatureCard
    title="Data Types"
    description="Strings, numbers, booleans, and null values"
    icon="Type"
  />
  <FeatureCard
    title="Collections"
    description="Lists (arrays) and maps (objects)"
    icon="List"
  />
  <FeatureCard
    title="Templates"
    description="Go template syntax for dynamic values"
    icon="Code"
  />
</FeatureCardList>

### Basic Data Types

YAML supports several data types that are commonly used in Compozy configurations:

<Tabs items={["Strings", "Numbers & Booleans", "Collections"]}>
<Tab>

```yaml
# Simple strings
name: "Compozy"
description: 'A workflow orchestration engine'

# Multiline strings
multiline: |
  This is a multiline string
  that preserves line breaks

# Folded strings
folded: >
  This is a folded string
  that converts line breaks to spaces
```

**String patterns** are used throughout Compozy for identifiers, descriptions, and template values. Use quotes when your string contains special characters or starts with numbers.

</Tab>
<Tab>

```yaml
# Numbers
version: 1.0
timeout: 30
port: 5001

# Booleans
enabled: true
debug: false
strict: yes  # Also valid: no, on, off

# Null values
result: null
output: ~
```

**Numeric and boolean types** are essential for configuration values, timeouts, and feature flags. YAML automatically detects data types, but you can be explicit when needed.

</Tab>
<Tab>

```yaml
# Simple lists
colors:
  - red
  - green
  - blue

# Inline lists
numbers: [1, 2, 3, 4, 5]

# Maps (objects)
config:
  timeout: 30
  retries: 3
  debug: true

# Nested structures
database:
  connection:
    host: localhost
    port: 5432
    credentials:
      username: admin
      password: secret
```

**Collections** enable complex data structures. Lists are ordered sequences, while maps are key-value pairs that can be nested to any depth.

</Tab>
</Tabs>

## Template Integration

### Template Syntax

Templates use Go template syntax to create dynamic values:

<FeatureCardList cols={3} size="sm">
  <FeatureCard
    title="Value Substitution"
    description="Simple variable replacement"
    icon="ArrowRight"
  />
  <FeatureCard
    title="Functions"
    description="Built-in template functions"
    icon="code"
  />
  <FeatureCard
    title="Conditionals"
    description="Dynamic logic and defaults"
    icon="GitBranch"
  />
</FeatureCardList>

<Tabs items={["Basic Templates", "Functions", "Conditionals"]}>
<Tab>

### Basic Template Substitution

```yaml
# Simple value substitution
message: "Hello {{ .user.name }}"

# Nested object access
city: "{{ .workflow.input.location.city }}"

# Array indexing
first_item: "{{ .items[0] }}"

# Task output reference
result: "{{ .tasks.previous.output }}"
```

**Template expressions** are wrapped in `{{ }}` and can access any data from the workflow context, including inputs, environment variables, and task outputs.

</Tab>
<Tab>

### Template Functions

```yaml
# String functions
uppercase: "{{ .user.name | upper }}"
lowercase: "{{ .user.name | lower }}"

# Numeric functions
doubled: "{{ .config.timeout | mul 2 }}"
rounded: "{{ .price | round 2 }}"

# Data conversion
as_json: "{{ .data | toJson }}"
as_string: "{{ .number | toString }}"

# Array functions
length: "{{ .items | len }}"
joined: "{{ .items | join ',' }}"
```

**Template functions** provide powerful data transformation capabilities. Functions are applied using the pipe operator `|` and can be chained together.

</Tab>
<Tab>

### Conditional Logic

```yaml
# Default values
mode: "{{ .env.NODE_ENV | default 'development' }}"
timeout: "{{ .config.timeout | default 30 }}"

# Conditional expressions
status: "{{ if .success }}completed{{ else }}failed{{ end }}"

# Ternary operator
priority: "{{ .urgent | ternary 'high' 'normal' }}"

# Null coalescing
value: "{{ .primary | default .secondary | default 'fallback' }}"
```

**Conditional logic** enables dynamic configuration based on runtime conditions. Use defaults for optional values and conditionals for complex logic.

</Tab>
</Tabs>

## Best Practices

<List className="mb-8">
  <ListItem title="Consistent Indentation" icon="Indent">
    Use 2 spaces for indentation consistently throughout your files
  </ListItem>
  <ListItem title="Meaningful IDs" icon="Hash">
    Use descriptive, kebab-case identifiers for resources and tasks
  </ListItem>
  <ListItem title="Proper Quoting" icon="Quote">
    Quote strings that contain special characters or start with numbers
  </ListItem>
  <ListItem title="Clear Comments" icon="MessageCircle">
    Add comments to explain complex configurations or business logic
  </ListItem>
</List>

<Callout type="warning" title="Keep templates simple and readable.">
Complex logic should be handled in code, not in templates.
</Callout>

### Template Best Practices

```yaml
# ✅ Good: Simple, clear templates
api_url: "{{ .env.API_BASE_URL }}/v1"
timeout: "{{ .config.timeout | default 30 }}"
enabled: "{{ .env.FEATURE_ENABLED | default 'false' | bool }}"

# ❌ Avoid: Complex template logic
complex_value: "{{ if and (gt .count 0) (lt .count 100) (eq .type 'premium') }}high{{ else if and (gt .count 0) (eq .type 'basic') }}medium{{ else }}low{{ end }}"
```

## Common Patterns

### Environment Configuration

Environment variables are frequently used for configuration:

```yaml
# Database configuration
database:
  host: "{{ .env.DB_HOST | default 'localhost' }}"
  port: "{{ .env.DB_PORT | default '5432' | int }}"
  ssl: "{{ .env.DB_SSL | default 'false' | bool }}"

# API configuration
api:
  base_url: "{{ .env.API_BASE_URL }}"
  timeout: "{{ .env.API_TIMEOUT | default '30' | int }}"
  retries: "{{ .env.API_RETRIES | default '3' | int }}"
```

### Reference Patterns

Use simple ID-based references for reusable components:

```yaml
# Reference a shared schema by ID
input: user_input

# Reference a tool by ID
tool: data_validator

# Reference an agent by ID in a task
agent: classifier
```

## References

<ReferenceCardList>
  <ReferenceCard
    title="Template Functions"
    description="Learn about built-in template functions for data transformation"
    href="/docs/core/yaml-templates/sprig-functions"
    icon="code"
  />
  <ReferenceCard
    title="Context Variables"
    description="Understand available context variables in templates"
    href="/docs/core/yaml-templates/context-variables"
    icon="Database"
  />
</ReferenceCardList>
