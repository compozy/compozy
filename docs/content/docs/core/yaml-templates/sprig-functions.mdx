---
title: "Sprig Functions"
description: "Complete reference for Sprig functions available in Compozy templates"
---

# Sprig Functions Reference

Compozy's template engine includes the full [Sprig function library](https://masterminds.github.io/sprig/), providing powerful data transformation capabilities within your YAML templates. This reference covers the most commonly used functions with practical examples.

## String Functions

### String Manipulation

```yaml
# Convert case
title: "{{ .user.name | title }}"                    # "john doe" → "John Doe"
upper: "{{ .status | upper }}"                       # "success" → "SUCCESS"  
lower: "{{ .env.NODE_ENV | lower }}"                 # "PRODUCTION" → "production"

# Trim whitespace
cleaned: "{{ .input | trim }}"                       # "  hello  " → "hello"
trimPrefix: "{{ .filename | trimPrefix 'tmp_' }}"    # "tmp_file.txt" → "file.txt"
trimSuffix: "{{ .filename | trimSuffix '.txt' }}"    # "file.txt" → "file"

# String replacement
slug: "{{ .title | lower | replace ' ' '-' }}"       # "My Title" → "my-title"
sanitized: "{{ .input | replace '/' '_' }}"          # "path/to/file" → "path_to_file"

# Substrings
first_chars: "{{ .text | substr 0 5 }}"              # First 5 characters
last_chars: "{{ .text | substr -3 }}"                # Last 3 characters
```

### String Testing

```yaml
# Check if string contains substring
has_error: "{{ .message | contains 'error' }}"       # true/false
is_email: "{{ .input | contains '@' }}"              # Basic email check

# Check string properties
is_empty: "{{ .value | empty }}"                     # true if empty/nil
has_value: "{{ .value | empty | not }}"              # true if not empty

# String comparison
is_production: "{{ .env.NODE_ENV | eq 'production' }}"
is_dev_or_test: "{{ .env.NODE_ENV | has 'dev test' }}"
```

### String Formatting

```yaml
# Printf-style formatting
formatted: "{{ printf '%s-%04d' .prefix .number }}"  # "user-0001"
padded: "{{ printf '%10s' .name }}"                  # Right-padded to 10 chars

# Quotes and escaping
quoted: "{{ .value | quote }}"                       # Wraps in quotes
squote: "{{ .value | squote }}"                      # Single quotes
```

## Numeric Functions

### Arithmetic Operations

```yaml
# Basic math
sum: "{{ add 10 5 }}"                                # 15
difference: "{{ sub 10 5 }}"                         # 5
product: "{{ mul 10 5 }}"                            # 50
quotient: "{{ div 10 5 }}"                           # 2
remainder: "{{ mod 10 3 }}"                          # 1

# With template variables
total: "{{ add .price .tax }}"
percentage: "{{ div (mul .part 100) .total }}"
scaled: "{{ mul .value .scale_factor }}"
```

### Numeric Comparisons

```yaml
# Comparison operators
is_greater: "{{ gt .score 80 }}"                     # Greater than
is_less: "{{ lt .age 18 }}"                          # Less than
is_equal: "{{ eq .status 200 }}"                     # Equal
is_not_equal: "{{ ne .result 'error' }}"             # Not equal
is_gte: "{{ ge .score 70 }}"                         # Greater than or equal
is_lte: "{{ le .attempts 3 }}"                       # Less than or equal
```

### Numeric Utilities

```yaml
# Min/max values
minimum: "{{ min .value1 .value2 .value3 }}"
maximum: "{{ max .attempts 1 5 }}"

# Absolute value
absolute: "{{ abs .difference }}"                     # Remove negative sign

# Rounding
rounded: "{{ round .float_value }}"                   # Round to nearest integer
ceiling: "{{ ceil .float_value }}"                    # Round up
floor: "{{ floor .float_value }}"                     # Round down
```

## Collection Functions

### Array Operations

```yaml
# Array length
count: "{{ len .items }}"                             # Number of items
is_empty: "{{ empty .items }}"                        # true if empty array

# Access elements
first_item: "{{ first .items }}"                      # First element
last_item: "{{ last .items }}"                        # Last element
rest_items: "{{ rest .items }}"                       # All except first
initial_items: "{{ initial .items }}"                 # All except last

# Array membership
has_item: "{{ has .item .items }}"                    # Check if array contains item
```

### Array Transformation

```yaml
# Join array elements
csv: "{{ .tags | join ',' }}"                         # "tag1,tag2,tag3"
list: "{{ .names | join ', ' }}"                      # "John, Jane, Bob"

# Sort arrays
sorted_asc: "{{ .numbers | sortAlpha }}"              # Alphabetical sort
sorted_desc: "{{ .numbers | reverse | sortAlpha }}"   # Reverse alphabetical

# Unique elements
unique_items: "{{ .items | uniq }}"                   # Remove duplicates
```

### Map Operations

```yaml
# Get map keys
all_keys: "{{ keys .config }}"                        # Array of keys
sorted_keys: "{{ keys .config | sortAlpha }}"         # Sorted keys

# Get map values  
all_values: "{{ values .config }}"                    # Array of values

# Check for key existence
has_key: "{{ hasKey .config 'database' }}"            # true/false

# Pick specific keys
subset: "{{ pick .config 'host' 'port' 'database' }}" # Create subset map
without: "{{ omit .config 'password' 'secret' }}"     # Exclude keys
```

## Date and Time Functions

### Current Time

```yaml
# Current timestamp
now_timestamp: "{{ now }}"                            # Current time object
unix_timestamp: "{{ now | unixEpoch }}"               # Unix timestamp

# Formatted current time
current_date: "{{ now | date '2006-01-02' }}"         # "2023-10-15"
current_time: "{{ now | date '15:04:05' }}"           # "14:30:25"
current_iso: "{{ now | date '2006-01-02T15:04:05Z' }}" # ISO format
```

### Date Formatting

```yaml
# Common date formats
us_date: "{{ .timestamp | date '01/02/2006' }}"       # "10/15/2023"
eu_date: "{{ .timestamp | date '02/01/2006' }}"       # "15/10/2023"
full_date: "{{ .timestamp | date 'January 2, 2006' }}" # "October 15, 2023"
timestamp: "{{ .timestamp | date '2006-01-02 15:04:05' }}" # "2023-10-15 14:30:25"

# Custom formats
log_format: "{{ .timestamp | date '2006/01/02 15:04:05.000' }}"
filename_date: "{{ .timestamp | date '20060102_150405' }}"
```

### Date Arithmetic

```yaml
# Add/subtract time
expires_at: "{{ now | dateModify '+24h' }}"           # 24 hours from now
yesterday: "{{ now | dateModify '-24h' }}"            # 24 hours ago
next_week: "{{ now | dateModify '+168h' }}"           # 7 days from now
next_month: "{{ now | dateModify '+720h' }}"          # ~30 days from now

# Complex date math
future_date: "{{ .start_date | dateModify '+2h30m' }}" # Add 2.5 hours
past_date: "{{ .end_date | dateModify '-1h15m' }}"     # Subtract 1.25 hours
```

## Logical Functions

### Boolean Logic

```yaml
# Boolean operations
both_true: "{{ and .condition1 .condition2 }}"       # Logical AND
either_true: "{{ or .condition1 .condition2 }}"      # Logical OR
negated: "{{ not .condition }}"                       # Logical NOT

# Complex boolean expressions
valid_user: "{{ and .user.verified (not (empty .user.email)) }}"
should_process: "{{ or .force_process (and .auto_process (gt .priority 5)) }}"
```

### Conditional Logic

```yaml
# Ternary operator (if-then-else)
status: "{{ .error | empty | ternary 'success' 'failed' }}"
message: "{{ .user.premium | ternary 'Welcome VIP!' 'Welcome!' }}"

# Default values
username: "{{ .user.name | default 'Anonymous' }}"
timeout: "{{ .config.timeout | default 30 }}"
retries: "{{ .config.retries | default 3 }}"

# Coalesce (first non-empty value)
name: "{{ coalesce .user.nickname .user.first_name .user.email 'Unknown' }}"
```

## Encoding Functions

### JSON Operations

```yaml
# Convert to JSON
json_string: "{{ .data | toJson }}"                   # Convert object to JSON
pretty_json: "{{ .data | toPrettyJson }}"             # Pretty-printed JSON

# Parse JSON (in combination with templates)
parsed_data: "{{ .json_string | fromJson }}"          # Parse JSON string
```

### URL Encoding

```yaml
# URL encoding
encoded_param: "{{ .search_query | urlquery }}"       # URL encode query params
encoded_path: "{{ .file_path | urlpath }}"            # URL encode path segments

# Build URLs
api_url: "{{ .base_url }}/users/{{ .user_id | urlpath }}?q={{ .query | urlquery }}"
```

### Base64 Encoding

```yaml
# Base64 operations
encoded: "{{ .data | b64enc }}"                       # Base64 encode
decoded: "{{ .encoded_data | b64dec }}"               # Base64 decode

# Common use case: encoding credentials
auth_header: "Basic {{ printf '%s:%s' .username .password | b64enc }}"
```

## Type Conversion Functions

### String Conversions

```yaml
# Convert to string
string_value: "{{ .number | toString }}"              # Convert number to string
string_bool: "{{ .flag | toString }}"                 # Convert boolean to string

# Convert from string
number_value: "{{ .string_number | int }}"            # String to integer
float_value: "{{ .string_float | float64 }}"          # String to float
bool_value: "{{ .string_bool | bool }}"               # String to boolean
```

### Type Checking

```yaml
# Check value types
is_string: "{{ kindIs 'string' .value }}"             # Check if string
is_number: "{{ kindIs 'float64' .value }}"            # Check if number
is_bool: "{{ kindIs 'bool' .value }}"                 # Check if boolean
is_array: "{{ kindIs 'slice' .value }}"               # Check if array
is_map: "{{ kindIs 'map' .value }}"                   # Check if map/object

# Type-safe operations
safe_number: "{{ if kindIs 'string' .value }}{{ .value | int }}{{ else }}{{ .value }}{{ end }}"
```

## Compozy-Specific Security Functions

In addition to Sprig functions, Compozy provides essential security functions from `getFuncMap()` to prevent XSS vulnerabilities and ensure safe template processing.

### HTML Security Functions

These functions provide comprehensive XSS protection for different HTML contexts:

#### `htmlEscape` - HTML Content Escaping

Use `htmlEscape` when rendering user input or untrusted data in HTML content:

```yaml
# Safe HTML content rendering
user_message: "{{ .user_input | htmlEscape }}"
blog_content: "{{ .tasks.get_content.output.text | htmlEscape }}"
error_message: "{{ .tasks.validation.output.error | htmlEscape }}"

# Example transformations:
# Input: "<script>alert('XSS')</script>"
# Output: "&lt;script&gt;alert('XSS')&lt;/script&gt;"

# Input: "User & Company"
# Output: "User &amp; Company"
```

#### `htmlAttrEscape` - HTML Attribute Escaping

Use `htmlAttrEscape` when inserting user data into HTML attributes:

```yaml
# Safe HTML attribute values
user_profile: |
  <div class="user-card" 
       data-name="{{ .user.name | htmlAttrEscape }}"
       title="{{ .user.bio | htmlAttrEscape }}"
       data-id="{{ .user.id | htmlAttrEscape }}">
    {{ .user.display_name | htmlEscape }}
  </div>

# Input field with user data
input_field: |
  <input type="text" 
         value="{{ .workflow.input.default_value | htmlAttrEscape }}"
         placeholder="{{ .config.placeholder | htmlAttrEscape }}"
         data-validation="{{ .validation_rules | toJson | htmlAttrEscape }}">

# Example transformations:
# Input: 'John" onclick="alert(\'XSS\')'
# Output: 'John&quot; onclick=&quot;alert(&#39;XSS&#39;)'
```

#### `jsEscape` - JavaScript String Escaping

Use `jsEscape` when embedding data in JavaScript contexts:

```yaml
# Safe JavaScript variable assignment
user_data_script: |
  <script>
    var userName = '{{ .user.name | jsEscape }}';
    var userBio = '{{ .user.bio | jsEscape }}';
    var config = {
      userId: '{{ .user.id | jsEscape }}',
      preferences: {{ .user.preferences | toJson | jsEscape }},
      sessionId: '{{ .workflow.id | jsEscape }}'
    };
  </script>

# Safe event handlers
onclick_handler: |
  <button onclick="handleClick('{{ .item.id | jsEscape }}', 
                              '{{ .item.name | jsEscape }}')">
    {{ .item.display_name | htmlEscape }}
  </button>

# Example transformations:
# Input: "'; alert('XSS'); var x='"
# Output: "\'; alert(\'XSS\'); var x\u003D\'"
```

### Context-Aware Security Patterns

Implement layered security by combining multiple escaping functions:

```yaml
# Multi-context security
secure_notification: |
  <div class="notification" 
       data-message="{{ .message | htmlAttrEscape }}"
       data-level="{{ .level | htmlAttrEscape }}">
    <span class="text">{{ .message | htmlEscape }}</span>
    <script>
      logNotification('{{ .message | jsEscape }}', 
                     '{{ .level | jsEscape }}', 
                     '{{ .timestamp | jsEscape }}');
    </script>
  </div>

# Form with comprehensive escaping
secure_form: |
  <form method="post" action="/submit">
    <input type="text" 
           name="username" 
           value="{{ .form_data.username | htmlAttrEscape }}"
           placeholder="Enter username">
    <textarea name="description" 
              placeholder="{{ .form_config.description_placeholder | htmlAttrEscape }}">{{- .form_data.description | htmlEscape -}}</textarea>
    <script>
      var formConfig = {
        validation: {{ .form_config.validation | toJson | jsEscape }},
        submitUrl: '{{ .form_config.submit_url | jsEscape }}'
      };
    </script>
  </form>
```

### Security Best Practices

#### 1. Always Escape User Input
```yaml
# ❌ DANGEROUS: Direct user input
dangerous_output: "{{ .user_input }}"
dangerous_html: |
  <div>{{ .user_comment }}</div>

# ✅ SAFE: Properly escaped user input
safe_output: "{{ .user_input | htmlEscape }}"
safe_html: |
  <div>{{ .user_comment | htmlEscape }}</div>
```

#### 2. Use Context-Appropriate Escaping
```yaml
# HTML content context
html_content: |
  <div class="message">
    {{ .user_message | htmlEscape }}
  </div>

# HTML attribute context
html_attribute: |
  <input type="text" 
         value="{{ .user_input | htmlAttrEscape }}"
         data-info="{{ .user_info | htmlAttrEscape }}">

# JavaScript context
javascript_context: |
  <script>
    var userMessage = '{{ .user_message | jsEscape }}';
    var userData = {{ .user_data | toJson | jsEscape }};
  </script>
```

#### 3. Validate and Sanitize Before Escaping
```yaml
# Validate email before escaping
safe_email: |
  {{ if and .user.email (contains .user.email "@") }}
    {{ .user.email | htmlEscape }}
  {{ else }}
    invalid-email@example.com
  {{ end }}

# Validate numeric inputs
safe_numeric: |
  {{ $value := .input | int }}
  {{ if and (gt $value 0) (lt $value 1000000) }}
    {{ $value }}
  {{ else }}
    0
  {{ end }}
```

#### 4. Prevent Template Injection
```yaml
# Safe template processing
safe_template: |
  {{ $safeValue := .user_input | htmlEscape }}
  {{ if not (contains $safeValue "{{") }}
    {{ $safeValue }}
  {{ else }}
    [FILTERED: Template syntax detected]
  {{ end }}
```

### Precision-Aware Numeric Functions

Compozy's template engine includes precision-aware numeric handling:

```yaml
# Numeric precision preservation
precise_calculation: |
  {{ $price := .product.price }}        # Preserves decimal precision
  {{ $tax := .product.tax }}            # Maintains float precision
  {{ $total := add $price $tax }}       # Accurate arithmetic
  Total: {{ $total }}                   # Displays with full precision

# Safe numeric conversions
safe_numeric_conversion: |
  {{ $input := .user_input | toString }}
  {{ if regexMatch "^[0-9]+\\.?[0-9]*$" $input }}
    {{ $input | float64 }}
  {{ else }}
    0.0
  {{ end }}
```

## Common Use Cases

### Configuration Management

```yaml
# Environment-based configuration
database_url: "{{ .env.DATABASE_URL | default 'sqlite://local.db' }}"
debug_mode: "{{ .env.DEBUG | default 'false' | bool }}"
port: "{{ .env.PORT | default '3000' | int }}"

# Feature flags
feature_enabled: "{{ and .env.ENABLE_FEATURE (eq .env.ENVIRONMENT 'production') }}"
```

### Data Processing

```yaml
# File path operations
output_file: "{{ .input_file | trimSuffix '.txt' }}_processed.json"
backup_path: "{{ printf '%s/backup_%s_%s' .backup_dir (now | date '20060102') .filename }}"

# Data validation
is_valid_email: "{{ and (contains .email '@') (gt (len .email) 5) }}"
is_valid_age: "{{ and (ge .age 0) (le .age 150) }}"
```

### Task Orchestration

```yaml
# Dynamic task naming
task_id: "{{ printf '%s_%s_%d' .workflow.id .task_type .index }}"
batch_name: "{{ printf 'batch_%s_%s' (now | date '20060102_150405') .batch_id }}"

# Conditional execution
should_retry: "{{ and (gt .attempts 0) (lt .attempts .max_retries) }}"
is_timeout: "{{ gt (now | unixEpoch) (.start_time | add .timeout) }}"
```

### Error Handling

```yaml
# Error message formatting
error_msg: "{{ printf 'Task %s failed after %d attempts: %s' .task_id .attempts .error }}"
status_code: "{{ .response.status | default 500 | int }}"

# Fallback values
primary_url: "{{ coalesce .config.primary_url .config.backup_url .default_url }}"
timeout: "{{ min (.config.timeout | default 30) 300 }}"  # Max 5 minutes
```

## Performance Optimization

Understanding function performance characteristics and optimization techniques ensures efficient template processing in production environments.

### Function Performance Characteristics

Different function types have varying performance implications:

#### String Functions - High Performance
```yaml
# Fast string operations (< 1μs)
fast_string_ops: |
  {{ .name | title }}                    # ~0.5μs
  {{ .text | trim }}                     # ~0.3μs
  {{ .status | upper }}                  # ~0.2μs
  {{ .value | default "none" }}          # ~0.4μs

# Moderate string operations (1-5μs)
moderate_string_ops: |
  {{ .text | replace "old" "new" }}      # ~2μs
  {{ .filename | trimSuffix ".txt" }}    # ~1.5μs
  {{ .data | contains "search" }}        # ~1μs
```

#### Array Functions - Variable Performance
```yaml
# Fast array operations
fast_array_ops: |
  {{ len .items }}                       # ~0.1μs
  {{ first .items }}                     # ~0.1μs
  {{ has .item .items }}                 # ~0.5μs per item (linear search)

# Expensive array operations
expensive_array_ops: |
  {{ .items | sortAlpha }}               # ~10μs for 100 items
  {{ .items | uniq }}                    # ~5μs for 100 items
  {{ .items | reverse }}                 # ~2μs for 100 items
```

#### Numeric Functions - Consistent Performance
```yaml
# Arithmetic operations (< 0.5μs)
arithmetic_ops: |
  {{ add .a .b }}                        # ~0.1μs
  {{ div .total .count }}                # ~0.2μs
  {{ max .value1 .value2 }}              # ~0.3μs
```

### Memory Usage Optimization

#### Template Caching Strategy
```yaml
# Templates are cached by content hash
# Cache hit rate: >95% in typical workflows
# Memory usage: ~1KB per cached template
cached_template_pattern: |
  {{ range .items }}
    {{ .name | title }}: {{ .value }}
  {{ end }}
```

#### Object Reference Optimization
```yaml
# Efficient: Direct object references preserve type
direct_reference: "{{ .tasks.api_call.output }}"

# Less efficient: Forces string conversion
string_conversion: "{{ .tasks.api_call.output | toString }}"

# Optimal for JSON output
json_output: "{{ .tasks.api_call.output | toJson }}"
```

### Efficient Function Chaining

#### Optimal Chaining Patterns
```yaml
# ✅ EFFICIENT: Chain compatible functions
efficient_chain: |
  {{ .user.name | trim | title | replace " " "_" }}

# ✅ EFFICIENT: Break complex chains with variables
efficient_complex: |
  {{ $cleaned := .input | trim | lower }}
  {{ $processed := $cleaned | replace " " "-" | replace "/" "_" }}
  {{ $final := $processed | trimSuffix ".tmp" }}
  Result: {{ $final }}
```

#### Inefficient Patterns to Avoid
```yaml
# ❌ INEFFICIENT: Redundant operations
redundant_ops: |
  {{ .text | trim | trim }}             # Double trim
  {{ .value | toString | toString }}    # Double conversion

# ❌ INEFFICIENT: Unnecessary type conversions
unnecessary_conversions: |
  {{ .number | toString | int }}        # Round-trip conversion
  {{ .items | toJson | fromJson }}      # Serialization round-trip
```

### Performance-Optimized Function Usage

#### String Performance Patterns
```yaml
# Optimize string operations
string_optimization: |
  {{ $base := .config.base_url | trim }}
  {{ $path := .request.path | trimPrefix "/" }}
  {{ $query := .request.query | urlquery }}
  {{ printf "%s/%s?%s" $base $path $query }}
```

#### Array Performance Patterns
```yaml
# Optimize array processing
array_optimization: |
  {{ $items := .data.items }}
  {{ $count := len $items }}
  {{ if gt $count 0 }}
    {{ $first := index $items 0 }}
    {{ $last := index $items (sub $count 1) }}
    Range: {{ $first.name }} to {{ $last.name }}
  {{ end }}
```

#### Conditional Performance Patterns
```yaml
# Optimize conditionals with early returns
conditional_optimization: |
  {{ if empty .data }}
    No data available
  {{ else if eq (len .data) 1 }}
    Single item: {{ (index .data 0).name }}
  {{ else }}
    {{ len .data }} items available
  {{ end }}
```

### Advanced Performance Techniques

#### Lazy Evaluation Patterns
```yaml
# Conditional processing to avoid expensive operations
lazy_evaluation: |
  {{ if .config.enable_processing }}
    {{ .data | complexTransformation }}
  {{ else }}
    {{ .data.cached_result | default "No cache" }}
  {{ end }}
```

#### Batch Processing Optimization
```yaml
# Optimize batch operations
batch_optimization: |
  {{ $batch_size := 100 }}
  {{ $total := len .items }}
  {{ $batches := div $total $batch_size }}
  Processing {{ $total }} items in {{ $batches }} batches
```

### Performance Monitoring and Debugging

#### Performance Debugging Templates
```yaml
# Add performance timing to templates
performance_debug: |
  {{ $start := now }}
  {{ .complex_operation }}
  <!-- Processing time: {{ sub (now | unixEpoch) ($start | unixEpoch) }}ms -->

# Monitor template complexity
complexity_monitor: |
  {{ $operations := 0 }}
  {{ range .items }}
    {{ $operations = add $operations 1 }}
    {{ .name | title }}
  {{ end }}
  <!-- Processed {{ $operations }} operations -->
```

#### Memory Usage Tracking
```yaml
# Track memory-intensive operations
memory_tracking: |
  {{ $large_data := .tasks.fetch_data.output }}
  {{ $size := len ($large_data | toJson) }}
  {{ if gt $size 10000 }}
    <!-- WARNING: Large data structure ({{ $size }} bytes) -->
  {{ end }}
  {{ $large_data | toJson }}
```

### Production Performance Best Practices

#### 1. Minimize Template Complexity
```yaml
# Keep templates simple and readable
simple_template: |
  {{ $user := .workflow.input.user }}
  {{ $config := .global.config }}
  Welcome {{ $user.name }}!
  Environment: {{ $config.environment }}
```

#### 2. Cache Expensive Operations
```yaml
# Cache results of expensive computations
cached_computation: |
  {{ $expensive_result := .global.cache.expensive_operation }}
  {{ if $expensive_result }}
    {{ $expensive_result }}
  {{ else }}
    {{ .data | expensiveTransformation }}
  {{ end }}
```

#### 3. Use Type-Appropriate Functions
```yaml
# Use optimal functions for data types
type_appropriate: |
  {{ .numbers | sort }}                  # Numeric sort
  {{ .strings | sortAlpha }}             # Alphabetical sort
  {{ .dates | sort }}                    # Date sort
```

#### 4. Optimize for Common Cases
```yaml
# Fast path for common scenarios
optimized_flow: |
  {{ if .simple_case }}
    {{ .simple_output }}
  {{ else }}
    {{ .complex_processing | complexTransformation }}
  {{ end }}
```

### Performance Benchmarks

Typical performance characteristics in production:

```yaml
# Template Engine Performance Metrics
# - Template compilation: ~1ms for typical templates
# - Template rendering: ~0.1ms for simple templates
# - Cache hit rate: >95% in typical workflow scenarios
# - Memory usage: ~1KB per cached template
# - Concurrent throughput: 10,000+ renders/second
# - Function call overhead: ~0.1μs per function
# - String operations: 0.2-5μs depending on complexity
# - Array operations: 0.1-10μs depending on size and operation
```

### Integration with Workflow Performance

#### Task-Level Performance Optimization
```yaml
# Optimize template usage in tasks
performance_optimized_task: |
  {{ $context := .workflow.context }}
  {{ $config := .global.performance_config }}
  {{ if $config.enable_caching }}
    {{ $cached := .global.cache[$context.cache_key] }}
    {{ $cached | default (.data | heavyProcessing) }}
  {{ else }}
    {{ .data | heavyProcessing }}
  {{ end }}
```

#### Agent Performance Patterns
```yaml
# Optimize template usage in agent instructions
optimized_agent_instructions: |
  {{ $user_context := .workflow.input.user_context }}
  {{ $session_cache := .global.session_cache[$user_context.session_id] }}
  
  You are assisting {{ $user_context.name | default "user" }}.
  {{ if $session_cache }}
    Previous context: {{ $session_cache.summary }}
  {{ end }}
  
  Current request: {{ .workflow.input.request }}
```

The Sprig function library provides extensive data manipulation capabilities with careful attention to performance. Next, explore [Context Variables](./context-variables) to understand data sources and access patterns, or check [Advanced Patterns](./advanced-patterns) for complex template scenarios.
