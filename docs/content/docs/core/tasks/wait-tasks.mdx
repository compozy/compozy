---
title: Wait Tasks
description: Complete guide to wait tasks for synchronization, delays, and signal-based coordination in Compozy workflows
---

<Callout type="info" title="Event-Driven Architecture">
Wait tasks form the foundation of Compozy's [signal communication system](/docs/core/signals/overview), enabling sophisticated coordination patterns between workflows, external services, and human interactions.
</Callout>

## Overview

Wait tasks enable **event-driven coordination** in workflows by pausing execution until specific conditions are met, signals are received, or timeouts occur. They are essential for building [reactive architectures](/docs/core/signals/overview), coordinating [multi-workflow systems](/docs/core/workflow/orchestration), and integrating with external systems through the [Event API](/docs/core/signals/event-api).

<FeatureCardList cols={2} size="default">
  <FeatureCard
    title="Signal-Based Waiting"
    description="Pause until specific signals arrive from workflows or external systems"
    icon="Radio"
  />
  <FeatureCard
    title="Conditional Processing"
    description="Filter signals with CEL expressions and custom processors"
    icon="Filter"
  />
  <FeatureCard
    title="Timeout Management"
    description="Handle timeouts with fallback strategies and retry policies"
    icon="Clock"
  />
  <FeatureCard
    title="Dynamic Configuration"
    description="Use templates for signal names and processing parameters"
    icon="Code"
  />
  <FeatureCard
    title="External Integration"
    description="Coordinate with external APIs, databases, and services"
    icon="Link2"
  />
  <FeatureCard
    title="Human Coordination"
    description="Support approval workflows and manual intervention points"
    icon="Users"
  />
</FeatureCardList>

## Quick Start

New to wait tasks? Start with these essential concepts:

<List>
  <ListItem title="Prerequisites" icon="BookOpen">
    Understand [basic tasks](/docs/core/tasks/basic-tasks) and [signal system overview](/docs/core/signals/overview)
  </ListItem>
  <ListItem title="Signal Communication" icon="Radio">
    Learn how [signal tasks](/docs/core/signals/signal-tasks) send events that wait tasks receive
  </ListItem>
  <ListItem title="Template System" icon="Code">
    Master [YAML templates](/docs/core/yaml-templates/overview) for dynamic signal configuration
  </ListItem>
  <ListItem title="CLI Tools" icon="Terminal">
    Use [workflow commands](/docs/core/configuration/cli) to execute and monitor wait tasks
  </ListItem>
</List>

## Task Configuration

Wait tasks require specific configuration fields to define their behavior. Below are the essential and optional configuration properties:

<Callout type="info">
For the complete task configuration schema, see the [Task Schema Reference](/docs/schema/tasks).
</Callout>

**Configuration Properties**

| Property | Type | Required | Description |
|----------|------|----------|-------------|
| `type` | string | ✅ | Must be `"wait"` to identify this as a wait task |
| `wait_for` | string | ✅ | Signal identifier to listen for - supports [template expressions](/docs/core/yaml-templates/context-variables) |
| `timeout` | string | ✅ | Maximum wait duration (e.g., `5m`, `300s`, `1h`) - prevents indefinite blocking |
| `processor` | object | ❌ | [Basic, composite, or agent task](/docs/core/tasks/basic-tasks) to process received signals |
| `on_timeout` | string | ❌ | Task ID to execute when timeout occurs - enables [error handling patterns](/docs/core/workflow/error-handling) |
| `condition` | string | ❌ | [CEL expression](/docs/core/yaml-templates/cel-expressions) for signal filtering and validation |
| `retry_policy` | object | ❌ | Automatic retry configuration for resilient wait operations |

## Signal Configuration Patterns

<Tabs items={["Static Signals", "Dynamic Signals", "Conditional Filtering"]}>

<Tab value="Static Signals">

Use fixed signal identifiers for predictable coordination:

```yaml
# Wait for a specific signal
- id: wait-deployment-complete
  type: wait
  wait_for: "deployment-finished"
  timeout: 10m

# Wait for user interaction
- id: wait-user-confirmation
  type: wait
  wait_for: "user-confirmed"
  timeout: 1h

  outputs:
    confirmation_time: "{{ .signal.metadata.received_at_utc }}"
    user_decision: "{{ .signal.payload.decision }}"
```

<Callout type="tip">
Static signal names are ideal for system-wide events like deployments, maintenance windows, or global notifications. Learn more about [signal naming conventions](/docs/core/signals/best-practices).
</Callout>

</Tab>

<Tab value="Dynamic Signals">

Use [template expressions](/docs/core/yaml-templates/context-variables) for user, session, or request-specific signals:

```yaml
# User-specific signal
- id: wait-user-action
  type: wait
  wait_for: "user-{{ .workflow.input.user_id }}-action"
  timeout: 30m

# Environment-specific signal
- id: wait-deployment
  type: wait
  wait_for: "deployment-{{ .env.ENVIRONMENT }}-complete"
  timeout: 15m

# Request-specific signal
- id: wait-approval
  type: wait
  wait_for: "approval-{{ .workflow.input.request_id }}"
  timeout: 24h
```

<Callout type="tip">
Dynamic signals enable parallel processing of multiple requests while maintaining isolation. Use them for [multi-tenant workflows](/docs/core/workflow/multi-tenancy) and user-specific processing.
</Callout>

</Tab>

<Tab value="Conditional Filtering">

Filter signals using [CEL expressions](/docs/core/yaml-templates/cel-expressions) for precise control:

```yaml
# Wait for high-priority orders only
- id: wait-priority-order
  type: wait
  wait_for: "order-created"
  timeout: 5m
  condition: 'signal.payload.priority == "high"'

# Complex filtering conditions
- id: wait-qualified-lead
  type: wait
  wait_for: "lead-submitted"
  timeout: 10m
  condition: |
    signal.payload.score > 80 &&
    signal.payload.budget >= 10000 &&
    signal.payload.source == "website"

# Multiple condition validation
- id: wait-valid-submission
  type: wait
  wait_for: "form-submitted"
  timeout: 2m
  condition: |
    signal.payload.email != null &&
    signal.payload.email matches "^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$" &&
    signal.payload.age >= 18
```

<Callout type="warning">
CEL conditions are evaluated with [cost limits](/docs/core/performance/cel-optimization) for security. Complex expressions may impact performance - consider using [signal processors](#signal-processors) for heavy validation.
</Callout>

</Tab>

</Tabs>

## Signal Processors

Processors enable custom handling of received signal data using [tools](/docs/core/tools/overview), [agents](/docs/core/agents/overview), or [composite tasks](/docs/core/tasks/composite-tasks) before the workflow continues:

<Tabs items={["Tool Processing", "Agent Processing"]}>

<Tab value="Tool Processing">

Use [TypeScript tools](/docs/core/tools/typescript-tools) for structured data processing:

```yaml
- id: wait-and-process
  type: wait
  wait_for: "data-available"
  timeout: 2m

  processor:
    type: basic
    $use: tool(local::tools.#(id=="data-processor"))
    with:
      signal_data: "{{ .signal.payload }}"
      received_at: "{{ .signal.metadata.received_at_utc }}"
      signal_id: "{{ .signal.metadata.signal_id }}"

  outputs:
    processed_data: "{{ .processor.output.result }}"
    processing_time: "{{ .processor.output.duration }}"
```

<List>
  <ListItem title="Fast Execution" icon="Zap">
    Tools run in the [Bun runtime](/docs/core/tools/runtime-environment) for optimal performance
  </ListItem>
  <ListItem title="Type Safety" icon="Shield">
    TypeScript provides compile-time validation and better debugging
  </ListItem>
  <ListItem title="Deterministic" icon="Target">
    Perfect for data transformation, validation, and API calls
  </ListItem>
</List>

</Tab>

<Tab value="Agent Processing">

Use [AI agents](/docs/core/agents/overview) for intelligent signal analysis:

```yaml
- id: wait-and-analyze
  type: wait
  wait_for: "feedback-received"
  timeout: 1h

  processor:
    type: basic
    $use: agent(local::agents.#(id=="feedback-analyzer"))
    action: analyze_feedback
    with:
      feedback_text: "{{ .signal.payload.feedback }}"
      user_context: "{{ .signal.payload.user_info }}"
      timestamp: "{{ .signal.metadata.received_at_utc }}"

  outputs:
    sentiment_score: "{{ .processor.output.sentiment }}"
    key_themes: "{{ .processor.output.themes }}"
    action_required: "{{ .processor.output.requires_action }}"
```

<List>
  <ListItem title="Natural Language" icon="MessageSquare">
    Process unstructured text, sentiment analysis, and content understanding
  </ListItem>
  <ListItem title="Context Aware" icon="Brain">
    Use [memory systems](/docs/core/memory/overview) for stateful processing
  </ListItem>
  <ListItem title="Adaptive" icon="Lightbulb">
    Handle complex business logic that would be difficult to code explicitly
  </ListItem>
</List>

</Tab>
</Tabs>

## Timeout & Resilience Patterns

<Tabs items={["Basic Timeouts", "Fallback Strategies", "Retry Policies"]}>

<Tab value="Basic Timeouts">

Set appropriate timeouts based on expected response times:

```yaml
- id: wait-with-timeout
  type: wait
  wait_for: "external-response"
  timeout: 30s

  # Execute specific task on timeout
  on_timeout: handle-timeout-case

  outputs:
    signal_received: "{{ not .task.timed_out }}"
    wait_duration: "{{ .task.duration }}"
    timeout_occurred: "{{ .task.timed_out }}"
```

<List>
  <ListItem title="Human Interactions" icon="Users">
    Use longer timeouts (hours/days) for approval workflows and manual processes
  </ListItem>
  <ListItem title="API Responses" icon="Globe">
    Set shorter timeouts (seconds/minutes) for external service integration
  </ListItem>
  <ListItem title="Batch Processing" icon="Package">
    Medium timeouts (minutes/hours) for data processing and report generation
  </ListItem>
</List>

</Tab>

<Tab value="Fallback Strategies">

Implement graceful degradation when primary services are unavailable:

```yaml
- id: wait-with-fallback
  type: wait
  wait_for: "premium-service-response"
  timeout: 10s

  # Handle timeout with alternative processing
  on_timeout: use-standard-service

  processor:
    type: basic
    $use: tool(local::tools.#(id=="premium-processor"))
    with:
      service_data: "{{ .signal.payload }}"
      service_level: "premium"

  outputs:
    service_used: "{{ .task.timed_out ? 'standard' : 'premium' }}"
    response_time: "{{ .task.duration }}"
    data_processed: "{{ .processor.output.result }}"
```

<Callout type="tip" title="Fallback Best Practices">
Design fallback strategies to maintain service quality. Consider using [router tasks](/docs/core/tasks/router-tasks) for complex fallback logic and [circuit breaker patterns](/docs/core/patterns/circuit-breaker) for external service protection.
</Callout>

</Tab>

<Tab value="Retry Policies">

Configure automatic retries for transient failures:

```yaml
- id: wait-with-retry
  type: wait
  wait_for: "service-response"
  timeout: 15s

  # Retry configuration
  retry_policy:
    maximum_attempts: 3
    initial_interval: 5s
    maximum_interval: 30s
    backoff_coefficient: 2.0

  on_timeout: retry-request
  on_error: error-handler

  outputs:
    attempt_count: "{{ .task.retry_count }}"
    final_success: "{{ not .task.timed_out and not .task.error }}"
```

<List>
  <ListItem title="Exponential Backoff" icon="TrendingUp">
    Use increasing intervals to avoid overwhelming struggling services
  </ListItem>
  <ListItem title="Jitter" icon="Shuffle">
    Add randomization to retry intervals to prevent thundering herd effects
  </ListItem>
  <ListItem title="Circuit Breaking" icon="Zap">
    Implement [circuit breaker patterns](/docs/core/patterns/circuit-breaker) for failing services
  </ListItem>
</List>

</Tab>

</Tabs>

## Best Practices

<AccordionGroup>
  <Accordion title="Timeout Configuration" icon="Clock">

Set timeouts based on the nature of your coordination pattern:

```yaml
# Human interactions - longer timeouts
- id: wait-human-approval
  type: wait
  wait_for: "approval"
  timeout: 24h

# API callbacks - shorter timeouts
- id: wait-api-response
  type: wait
  wait_for: "api-callback"
  timeout: 30s

# Batch processing - medium timeouts
- id: wait-batch-complete
  type: wait
  wait_for: "batch-finished"
  timeout: 1h
```

<List>
  <ListItem title="Human Workflows" icon="Users">
    Use 24h+ timeouts for approval processes and manual interventions
  </ListItem>
  <ListItem title="External APIs" icon="Globe">
    Set 30s-5m timeouts for third-party service responses
  </ListItem>
  <ListItem title="Internal Processing" icon="Cpu">
    Use 5-60m timeouts for batch jobs and data processing
  </ListItem>
  <ListItem title="Real-time Events" icon="Zap">
    Configure 1-10s timeouts for live system coordination
  </ListItem>
</List>

  </Accordion>

  <Accordion title="Signal Validation" icon="Shield">

Always validate signal content to ensure data integrity:

```yaml
- id: validated-wait
  type: wait
  wait_for: "user-input"
  condition: |
    signal.payload.user_id != null &&
    signal.payload.action in ["approve", "reject", "modify"] &&
    signal.payload.timestamp != null

  processor:
    type: basic
    $use: tool(local::tools.#(id=="input-validator"))
    with:
      input_data: "{{ .signal.payload }}"
      validation_rules: "{{ .workflow.input.validation_rules }}"
```

<Callout type="warning" title="Security Considerations">
Use [CEL expressions](/docs/core/yaml-templates/cel-expressions) for input validation and consider [security best practices](/docs/core/security/input-validation) when processing external signals.
</Callout>

  </Accordion>

  <Accordion title="Performance Optimization" icon="Zap">

Design processors for efficiency and minimal resource usage:

```yaml
# ✅ Efficient processor
processor:
  type: basic
  $use: tool(local::tools.#(id=="lightweight-processor"))
  with:
    signal_id: "{{ .signal.metadata.signal_id }}"
    key_data: "{{ .signal.payload.essential_field }}"

# ❌ Inefficient processor
processor:
  type: composite
  tasks:
    - id: heavy-task
      type: basic
      $use: tool(local::tools.#(id=="heavy-processor"))
      with:
        entire_payload: "{{ .signal.payload }}"
```

<List>
  <ListItem title="Minimal Data Processing" icon="Filter">
    Extract only essential data from signal payloads
  </ListItem>
  <ListItem title="Tool vs Agent Choice" icon="Brain">
    Use [tools](/docs/core/tools/overview) for deterministic logic, [agents](/docs/core/agents/overview) for complex reasoning
  </ListItem>
  <ListItem title="Async Operations" icon="RotateCcw">
    Avoid blocking operations in signal processors
  </ListItem>
</List>

  </Accordion>

  <Accordion title="Error Handling" icon="AlertTriangle">

Implement comprehensive error handling for resilient workflows:

```yaml
- id: resilient-wait
  type: wait
  wait_for: "external-signal"
  timeout: 5m

  # Handle different failure modes
  on_timeout: handle-timeout
  on_error: handle-error

  outputs:
    success: "{{ not .task.timed_out and not .task.error }}"
    signal_received: "{{ not .task.timed_out }}"
    wait_duration: "{{ .task.duration }}"
```

<List>
  <ListItem title="Timeout Strategies" icon="Clock">
    Design meaningful [fallback behaviors](/docs/core/workflow/error-handling) for timeout scenarios
  </ListItem>
  <ListItem title="Retry Logic" icon="RotateCcw">
    Implement exponential backoff for transient failures
  </ListItem>
  <ListItem title="Circuit Breakers" icon="Zap">
    Use [circuit breaker patterns](/docs/core/patterns/circuit-breaker) for external dependencies
  </ListItem>
  <ListItem title="Monitoring" icon="BarChart3">
    Add [observability](/docs/core/monitoring/metrics) for wait task performance
  </ListItem>
</List>

  </Accordion>
</AccordionGroup>

## Summary

Wait tasks are fundamental to building robust, coordinated workflows in Compozy. They enable sophisticated synchronization patterns, event-driven architectures, and reliable coordination between different parts of your system.

## Next Steps

<Tabs items={["Getting Started", "Task Coordination", "Production Operations"]}>

<Tab value="Getting Started">

<ReferenceCardList>
  <ReferenceCard
    title="Signal System Overview"
    description="Understand the complete signal communication system and event-driven patterns"
    href="/docs/core/signals/overview"
    icon="Zap"
  />
  <ReferenceCard
    title="Signal Tasks"
    description="Learn how to send signals that wait tasks can receive"
    href="/docs/core/signals/signal-tasks"
    icon="Radio"
  />
  <ReferenceCard
    title="Basic Tasks"
    description="Master the foundation of all task types in Compozy"
    href="/docs/core/tasks/basic-tasks"
    icon="Cog"
  />
  <ReferenceCard
    title="YAML Templates"
    description="Use dynamic templates for signal names and processing parameters"
    href="/docs/core/yaml-templates/overview"
    icon="Code"
  />
</ReferenceCardList>

</Tab>

<Tab value="Task Coordination">

<ReferenceCardList>
  <ReferenceCard
    title="Parallel Processing"
    description="Coordinate multiple wait tasks for complex synchronization"
    href="/docs/core/tasks/parallel-processing"
    icon="Layers"
  />
  <ReferenceCard
    title="Composite Tasks"
    description="Build sequential workflows with wait task coordination"
    href="/docs/core/tasks/composite-tasks"
    icon="Package"
  />
  <ReferenceCard
    title="Router Tasks"
    description="Implement conditional logic based on wait task outcomes"
    href="/docs/core/tasks/router-tasks"
    icon="GitBranch"
  />
</ReferenceCardList>

</Tab>

<Tab value="Production Operations">

<ReferenceCardList>
  <ReferenceCard
    title="Event API"
    description="Programmatically send signals from external systems"
    href="/docs/core/signals/event-api"
    icon="Globe"
  />
  <ReferenceCard
    title="Error Handling"
    description="Build resilient workflows with proper error handling"
    href="/docs/core/workflow/error-handling"
    icon="AlertTriangle"
  />
  <ReferenceCard
    title="Monitoring & Observability"
    description="Monitor wait task performance and signal delivery"
    href="/docs/core/monitoring/workflows"
    icon="BarChart3"
  />
  <ReferenceCard
    title="Security Best Practices"
    description="Secure signal processing and input validation patterns"
    href="/docs/core/security/input-validation"
    icon="Shield"
  />
</ReferenceCardList>

</Tab>

</Tabs>

