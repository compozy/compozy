---
title: "Global Configuration"
description: "Configure project-wide defaults and system-level settings that apply across all workflows, agents, and tools in your Compozy project."
---

import {
  Settings,
  Server,
  Database,
  Clock,
  Layers,
  Zap,
  Shield,
  Memory,
  Link2,
  AlertCircle,
  CheckCircle,
  Info,
  Terminal,
  FileText,
  Globe,
  Lock,
  Activity,
  HardDrive,
  Cpu,
  Timer,
  Users,
  RefreshCw,
  Eye,
  Gauge,
  Cloud,
  Key,
  Network,
  BarChart3,
  Wrench,
  BookOpen,
  ArrowRight,
  Play,
  Pause,
} from "lucide-react";
import { FeatureCard, FeatureCardList } from "@/components/ui/feature-card";

Global configuration in Compozy defines system-wide settings that apply across all workflows, agents, and tools. This configuration layer provides the foundation for your entire Compozy installation, handling everything from server settings to database connections, runtime behavior, and system limits.

## Configuration Architecture

<FeatureCardList cols={3} size="sm">
  <FeatureCard
    title="Hierarchical Sources"
    description="CLI flags override YAML files, which override environment variables, which override defaults"
    icon={Layers}
  />
  <FeatureCard
    title="Environment First"
    description="Seamlessly deploy with environment variables for production settings"
    icon={Globe}
  />
  <FeatureCard
    title="Type Safety"
    description="Full validation with helpful error messages and automatic type conversion"
    icon={Shield}
  />
</FeatureCardList>

## Configuration Sources

Compozy loads configuration from multiple sources in this precedence order:

<Steps numbered>
<Step title="CLI Flags" description="Highest precedence - runtime overrides">

```bash
compozy dev --port 9000 --log-level debug --cors
```

</Step>

<Step title="YAML Configuration" description="Project-specific settings">

```yaml title="compozy.yaml"
# Global system configuration
server:
  host: "0.0.0.0"
  port: 5001
  cors_enabled: true
  timeout: 30s

database:
  host: "localhost"
  port: "5432"
  user: "compozy"
  name: "compozy"
  ssl_mode: "require"
```

</Step>

<Step title="Environment Variables" description="Deployment and secrets">

```bash title=".env"
# Server configuration
SERVER_HOST=0.0.0.0
SERVER_PORT=5001
SERVER_CORS_ENABLED=true

# Database configuration
DB_HOST=localhost
DB_PORT=5432
DB_USER=compozy
DB_PASSWORD=secure_password
DB_NAME=compozy
DB_SSL_MODE=require
```

</Step>

<Step title="System Defaults" description="Lowest precedence - sensible defaults">

Built-in defaults ensure Compozy works out-of-the-box for development.

</Step>
</Steps>

## Configuration Categories

### Server Configuration

Controls the HTTP server that hosts your workflows and provides the API endpoints.

<Tabs items={["Basic Setup", "Production", "Environment Variables"]}>
<Tab>
```yaml title="compozy.yaml"
server:
  host: "0.0.0.0"        # Bind to all interfaces
  port: 5001             # HTTP port
  cors_enabled: true     # Enable CORS for development
  timeout: 30s           # Request timeout
```
</Tab>

<Tab>
```yaml title="compozy.yaml"
server:
  host: "127.0.0.1"      # Bind to localhost only
  port: 5001
  cors_enabled: false    # Disable CORS in production
  timeout: 60s           # Longer timeout for production
```
</Tab>

<Tab>
```bash title=".env"
SERVER_HOST=0.0.0.0
SERVER_PORT=5001
SERVER_CORS_ENABLED=true
SERVER_TIMEOUT=30s
```
</Tab>
</Tabs>

#### Server Configuration Reference

| Field | Type | Default | Description |
|-------|------|---------|-------------|
| `host` | string | `"0.0.0.0"` | IP address to bind the server to |
| `port` | int | `5001` | Port number for the HTTP server |
| `cors_enabled` | bool | `true` | Enable Cross-Origin Resource Sharing |
| `timeout` | duration | `30s` | Request timeout for HTTP operations |

### Database Configuration

PostgreSQL database settings for workflow execution state and metadata.

<Tabs items={["Connection String", "Individual Fields", "Environment Variables"]}>
<Tab>
```yaml title="compozy.yaml"
database:
  conn_string: "postgres://user:password@localhost:5432/compozy?sslmode=require"
```
</Tab>

<Tab>
```yaml title="compozy.yaml"
database:
  host: "localhost"
  port: "5432"
  user: "compozy"
  password: "secure_password"  # Use environment variables for passwords
  name: "compozy"
  ssl_mode: "require"
```
</Tab>

<Tab>
```bash title=".env"
# Option 1: Connection string
DB_CONN_STRING=postgres://user:password@localhost:5432/compozy?sslmode=require

# Option 2: Individual fields
DB_HOST=localhost
DB_PORT=5432
DB_USER=compozy
DB_PASSWORD=secure_password
DB_NAME=compozy
DB_SSL_MODE=require
```
</Tab>
</Tabs>

#### Database Configuration Reference

| Field | Type | Default | Description |
|-------|------|---------|-------------|
| `conn_string` | string | `""` | Complete PostgreSQL connection string |
| `host` | string | `"localhost"` | Database server hostname |
| `port` | string | `"5432"` | Database server port |
| `user` | string | `"postgres"` | Database username |
| `password` | string | `""` | Database password (use env vars) |
| `name` | string | `"compozy"` | Database name |
| `ssl_mode` | string | `"disable"` | SSL mode (disable, require, verify-full) |

### Temporal Configuration

Settings for the Temporal workflow engine that orchestrates your workflows.

```yaml title="compozy.yaml"
temporal:
  host_port: "localhost:7233"  # Temporal server address
  namespace: "default"         # Temporal namespace
  task_queue: "compozy-tasks"  # Task queue name
```

#### Temporal Configuration Reference

| Field | Type | Default | Description |
|-------|------|---------|-------------|
| `host_port` | string | `"localhost:7233"` | Temporal server host and port |
| `namespace` | string | `"default"` | Temporal namespace for isolation |
| `task_queue` | string | `"compozy-tasks"` | Task queue for workflow execution |

### Runtime Configuration

Controls runtime behavior, logging, and system operations.

```yaml title="compozy.yaml"
runtime:
  environment: "development"                   # Environment mode
  log_level: "info"                           # Logging level
  dispatcher_heartbeat_interval: 30s          # Heartbeat frequency
  dispatcher_heartbeat_ttl: 90s               # Heartbeat expiration
  dispatcher_stale_threshold: 120s            # Stale detection threshold
  async_token_counter_workers: 4              # Token counting workers
  async_token_counter_buffer_size: 100        # Token counter buffer
```

#### Runtime Configuration Reference

| Field | Type | Default | Description |
|-------|------|---------|-------------|
| `environment` | string | `"development"` | Runtime environment (development, staging, production) |
| `log_level` | string | `"info"` | Log level (debug, info, warn, error) |
| `dispatcher_heartbeat_interval` | duration | `30s` | How often dispatchers send heartbeats |
| `dispatcher_heartbeat_ttl` | duration | `90s` | How long heartbeats are valid |
| `dispatcher_stale_threshold` | duration | `120s` | When to consider a dispatcher stale |
| `async_token_counter_workers` | int | `4` | Number of async token counting workers |
| `async_token_counter_buffer_size` | int | `100` | Buffer size for token counting queue |

### System Limits

Configures resource limits and constraints to prevent system overload.

```yaml title="compozy.yaml"
limits:
  max_nesting_depth: 20           # Maximum task nesting depth
  max_string_length: 10485760     # Maximum string length (10MB)
  max_message_content: 10240      # Maximum message content (10KB)
  max_total_content_size: 102400  # Maximum total content (100KB)
  max_task_context_depth: 5       # Maximum task context depth
  parent_update_batch_size: 100   # Parent update batch size
```

#### Limits Configuration Reference

| Field | Type | Default | Description |
|-------|------|---------|-------------|
| `max_nesting_depth` | int | `20` | Maximum depth for nested tasks |
| `max_string_length` | int | `10485760` | Maximum string length in bytes (10MB) |
| `max_message_content` | int | `10240` | Maximum message content in bytes (10KB) |
| `max_total_content_size` | int | `102400` | Maximum total content size in bytes (100KB) |
| `max_task_context_depth` | int | `5` | Maximum depth for task context |
| `parent_update_batch_size` | int | `100` | Batch size for parent updates |

### OpenAI Configuration

Settings for OpenAI API integration (optional).

```yaml title="compozy.yaml"
openai:
  api_key: "{{ .env.OPENAI_API_KEY }}"      # API key from environment
  base_url: "https://api.openai.com/v1"    # Custom API endpoint
  org_id: "org-123456"                      # Organization ID
  default_model: "gpt-4o-mini"              # Default model
```

#### OpenAI Configuration Reference

| Field | Type | Default | Description |
|-------|------|---------|-------------|
| `api_key` | string | `""` | OpenAI API key (use environment variables) |
| `base_url` | string | `""` | Custom OpenAI API endpoint |
| `org_id` | string | `""` | OpenAI organization ID |
| `default_model` | string | `""` | Default OpenAI model to use |

### Memory Configuration

Settings for persistent memory storage using Redis (optional).

```yaml title="compozy.yaml"
memory:
  redis_url: "{{ .env.REDIS_URL }}"         # Redis connection URL
  redis_prefix: "compozy:"                  # Key prefix for Redis
  ttl: 24h                                  # Memory entry TTL
  max_entries: 10000                        # Maximum memory entries
```

#### Memory Configuration Reference

| Field | Type | Default | Description |
|-------|------|---------|-------------|
| `redis_url` | string | `""` | Redis connection URL |
| `redis_prefix` | string | `"compozy:"` | Prefix for Redis keys |
| `ttl` | duration | `24h` | Time-to-live for memory entries |
| `max_entries` | int | `10000` | Maximum number of memory entries |

### LLM Configuration

Settings for LLM proxy and MCP integration.

```yaml title="compozy.yaml"
llm:
  proxy_url: "{{ .env.MCP_PROXY_URL }}"     # MCP proxy URL
  admin_token: "{{ .env.MCP_ADMIN_TOKEN }}" # Admin token for MCP
```

#### LLM Configuration Reference

| Field | Type | Default | Description |
|-------|------|---------|-------------|
| `proxy_url` | string | `""` | URL for MCP proxy service |
| `admin_token` | string | `""` | Admin token for MCP authentication |

## Environment Variables

### Complete Environment Variable Reference

| Environment Variable | Config Path | Description |
|---------------------|-------------|-------------|
| `SERVER_HOST` | `server.host` | Server host address |
| `SERVER_PORT` | `server.port` | Server port number |
| `SERVER_CORS_ENABLED` | `server.cors_enabled` | Enable CORS |
| `SERVER_TIMEOUT` | `server.timeout` | Request timeout |
| `DB_HOST` | `database.host` | Database host |
| `DB_PORT` | `database.port` | Database port |
| `DB_USER` | `database.user` | Database username |
| `DB_PASSWORD` | `database.password` | Database password |
| `DB_NAME` | `database.name` | Database name |
| `DB_SSL_MODE` | `database.ssl_mode` | Database SSL mode |
| `DB_CONN_STRING` | `database.conn_string` | Complete connection string |
| `TEMPORAL_HOST_PORT` | `temporal.host_port` | Temporal server address |
| `TEMPORAL_NAMESPACE` | `temporal.namespace` | Temporal namespace |
| `TEMPORAL_TASK_QUEUE` | `temporal.task_queue` | Temporal task queue |
| `RUNTIME_ENVIRONMENT` | `runtime.environment` | Runtime environment |
| `RUNTIME_LOG_LEVEL` | `runtime.log_level` | Log level |
| `RUNTIME_DISPATCHER_HEARTBEAT_INTERVAL` | `runtime.dispatcher_heartbeat_interval` | Heartbeat interval |
| `RUNTIME_DISPATCHER_HEARTBEAT_TTL` | `runtime.dispatcher_heartbeat_ttl` | Heartbeat TTL |
| `RUNTIME_DISPATCHER_STALE_THRESHOLD` | `runtime.dispatcher_stale_threshold` | Stale threshold |
| `RUNTIME_ASYNC_TOKEN_COUNTER_WORKERS` | `runtime.async_token_counter_workers` | Token counter workers |
| `RUNTIME_ASYNC_TOKEN_COUNTER_BUFFER_SIZE` | `runtime.async_token_counter_buffer_size` | Token counter buffer size |
| `LIMITS_MAX_NESTING_DEPTH` | `limits.max_nesting_depth` | Maximum nesting depth |
| `LIMITS_MAX_STRING_LENGTH` | `limits.max_string_length` | Maximum string length |
| `LIMITS_MAX_MESSAGE_CONTENT_LENGTH` | `limits.max_message_content` | Maximum message content |
| `LIMITS_MAX_TOTAL_CONTENT_SIZE` | `limits.max_total_content_size` | Maximum total content size |
| `LIMITS_MAX_TASK_CONTEXT_DEPTH` | `limits.max_task_context_depth` | Maximum task context depth |
| `LIMITS_PARENT_UPDATE_BATCH_SIZE` | `limits.parent_update_batch_size` | Parent update batch size |
| `OPENAI_API_KEY` | `openai.api_key` | OpenAI API key |
| `OPENAI_BASE_URL` | `openai.base_url` | OpenAI base URL |
| `OPENAI_ORG_ID` | `openai.org_id` | OpenAI organization ID |
| `OPENAI_DEFAULT_MODEL` | `openai.default_model` | Default OpenAI model |
| `MEMORY_REDIS_URL` | `memory.redis_url` | Redis connection URL |
| `MEMORY_REDIS_PREFIX` | `memory.redis_prefix` | Redis key prefix |
| `MEMORY_TTL` | `memory.ttl` | Memory entry TTL |
| `MEMORY_MAX_ENTRIES` | `memory.max_entries` | Maximum memory entries |
| `MCP_PROXY_URL` | `llm.proxy_url` | MCP proxy URL |
| `MCP_ADMIN_TOKEN` | `llm.admin_token` | MCP admin token |

## Configuration Validation

Compozy validates all configuration values during startup with helpful error messages:

```bash
compozy config validate
```

### Common Validation Errors

<Alert type="error">
**Invalid port number**: Port must be between 1 and 65535
</Alert>

<Alert type="error">
**Invalid environment**: Environment must be one of: development, staging, production
</Alert>

<Alert type="error">
**Invalid log level**: Log level must be one of: debug, info, warn, error
</Alert>

<Alert type="error">
**Invalid SSL mode**: SSL mode must be one of: disable, require, verify-full
</Alert>

## Security Considerations

### Sensitive Configuration

Mark sensitive values using environment variables:

```yaml title="compozy.yaml"
database:
  password: "{{ .env.DB_PASSWORD }}"

openai:
  api_key: "{{ .env.OPENAI_API_KEY }}"

llm:
  admin_token: "{{ .env.MCP_ADMIN_TOKEN }}"
```

### Configuration Security Best Practices

<FeatureCardList cols={2} size="sm">
  <FeatureCard
    title="Use Environment Variables"
    description="Store all secrets in environment variables, never in YAML files"
    icon={Key}
  />
  <FeatureCard
    title="File Permissions"
    description="Restrict access to configuration files with proper file permissions"
    icon={Lock}
  />
  <FeatureCard
    title="Connection Security"
    description="Use SSL/TLS for all database and external service connections"
    icon={Shield}
  />
  <FeatureCard
    title="Secrets Management"
    description="Use external secrets management for production deployments"
    icon={Eye}
  />
</FeatureCardList>

## Performance Tuning

### Resource Optimization

```yaml title="compozy.yaml"
runtime:
  async_token_counter_workers: 8          # Increase for high throughput
  async_token_counter_buffer_size: 500    # Larger buffer for bursts

limits:
  max_nesting_depth: 10                   # Reduce for simpler workflows
  max_message_content: 20480              # Increase for complex messages
  parent_update_batch_size: 200           # Larger batches for efficiency
```

### Database Performance

```yaml title="compozy.yaml"
database:
  ssl_mode: "require"                     # Use SSL but not verify-full
  # Connection pooling is handled automatically
```

## Configuration Debugging

### View Current Configuration

```bash
# Show all configuration values
compozy config show

# Show as JSON
compozy config show --format json

# Show as YAML
compozy config show --format yaml
```

### Configuration Diagnostics

```bash
# Run comprehensive diagnostics
compozy config diagnostics

# Verbose diagnostics with source details
compozy config diagnostics --verbose

# Validate configuration only
compozy config validate
```

## Troubleshooting

### Common Issues

<Alert type="warning">
**Configuration not loading**: Check file permissions and YAML syntax
</Alert>

<Alert type="warning">
**Environment variables ignored**: Ensure exact variable names match the reference table
</Alert>

<Alert type="warning">
**Database connection failed**: Verify database is running and credentials are correct
</Alert>

<Alert type="warning">
**Temporal connection failed**: Ensure Temporal server is running on the specified port
</Alert>

### Debug Configuration Loading

```bash
# Run with debug logging
compozy dev --debug

# Validate configuration
compozy config validate
```

## Examples

### Development Environment

```yaml title="compozy.yaml"
server:
  host: "0.0.0.0"
  port: 5001
  cors_enabled: true

database:
  host: "localhost"
  port: "5432"
  user: "compozy"
  name: "compozy_dev"
  ssl_mode: "disable"

runtime:
  environment: "development"
  log_level: "debug"

limits:
  max_nesting_depth: 20
  max_string_length: 10485760
```

### Production Environment

```yaml title="compozy.yaml"
server:
  host: "0.0.0.0"
  port: 5001
  cors_enabled: false
  timeout: 60s

database:
  conn_string: "{{ .env.DATABASE_URL }}"

temporal:
  host_port: "{{ .env.TEMPORAL_HOST_PORT }}"
  namespace: "{{ .env.TEMPORAL_NAMESPACE }}"

runtime:
  environment: "production"
  log_level: "info"
  dispatcher_heartbeat_interval: 30s
  dispatcher_heartbeat_ttl: 90s

limits:
  max_nesting_depth: 15
  max_string_length: 5242880  # 5MB
```

## Related Documentation

<ReferenceCardList>
  <ReferenceCard
    title="CLI Configuration"
    description="Command-line interface configuration and usage patterns"
    href="/docs/core/configuration/cli"
    icon={Terminal}
  />
  <ReferenceCard
    title="Project Setup"
    description="Initialize and configure your Compozy project"
    href="/docs/core/configuration/project-setup"
    icon={Settings}
  />
  <ReferenceCard
    title="Environment Variables"
    description="Complete reference for environment variable configuration"
    href="/docs/core/reference/environment-variables"
    icon={Globe}
  />
  <ReferenceCard
    title="Runtime Configuration"
    description="Runtime behavior and execution environment settings"
    href="/docs/core/configuration/runtime-config"
    icon={Play}
  />
</ReferenceCardList>
