---
title: CLI Configuration
description: Command-line interface configuration and usage
---

# CLI Configuration

Learn how to configure and use the Compozy command-line interface (CLI) for development and operations.

## Overview

The **Compozy CLI** provides a comprehensive set of commands for:

- **Project management**: Create, validate, and manage projects
- **Configuration management**: View, validate, and diagnose configuration
- **Development tools**: Run workflows, test tools, and debug issues
- **Operational tasks**: Monitor systems, manage deployments, and troubleshoot

## Installation

### Install from Release

Download the latest release from GitHub:

```bash
# Download and install (Linux/macOS)
curl -sSL https://github.com/compozy/compozy/releases/latest/download/compozy-linux-amd64.tar.gz | tar -xz
sudo mv compozy /usr/local/bin/

# Verify installation
compozy version
```

### Install from Source

Build from source:

```bash
# Clone repository
git clone https://github.com/compozy/compozy.git
cd compozy

# Build and install
make build
sudo mv bin/compozy /usr/local/bin/

# Verify installation
compozy version
```

### Docker Installation

Use Docker for containerized execution:

```bash
# Run via Docker
docker run --rm compozy/compozy:latest version

# Create alias for convenience
alias compozy='docker run --rm -v $(pwd):/workspace compozy/compozy:latest'
```

## Global Configuration

### Configuration Files

The CLI looks for configuration files in these locations (in order):

1. `./compozy-config.yaml` (current directory)
2. `~/.config/compozy/config.yaml` (user config)
3. `/etc/compozy/config.yaml` (system config)

### Environment Variables

Override configuration with environment variables:

```bash
# Server configuration
export SERVER_HOST=localhost
export SERVER_PORT=8080

# Database configuration
export DB_CONN_STRING="postgresql://user:pass@host:5432/db"

# Temporal configuration
export TEMPORAL_HOST_PORT="localhost:7233"
export TEMPORAL_NAMESPACE="compozy"

# Log level
export RUNTIME_LOG_LEVEL=debug
```

### CLI Flags

Override configuration with command-line flags:

```bash
# Global flags (available for all commands)
compozy --config /path/to/config.yaml
compozy --env-file /path/to/.env
compozy --log-level debug
compozy --verbose
```

## Core Commands

### Project Commands

#### Create Project

Create a new Compozy project:

```bash
# Create project in current directory
compozy create my-project

# Create project in specific directory
compozy create my-project --dir /path/to/projects

# Create with template
compozy create my-project --template basic

# Create with specific features
compozy create my-project --features agents,workflows,tools
```

#### Validate Project

Validate project configuration:

```bash
# Validate current project
compozy validate

# Validate specific project
compozy validate --project /path/to/project

# Validate with environment
compozy validate --env-file .env.production

# Strict validation
compozy validate --strict
```

### Configuration Commands

#### Show Configuration

Display current configuration:

<Tabs items={['Basic', 'With Sources', 'JSON Format', 'YAML Format']}>
  <Tab value="Basic">
```bash
# Show configuration in table format
compozy config show

# Output:

# KEY VALUE

# server.host localhost

# server.port 8080

# database.host localhost

# database.port 5432

````
  </Tab>
  <Tab value="With Sources">
```bash
# Show configuration with sources
compozy config show --sources

# Output:
# KEY                    VALUE          SOURCE
# server.host           localhost      env
# server.port           8080           yaml
# database.host         localhost      default
# database.port         5432           cli
````

  </Tab>
  <Tab value="JSON Format">
```bash
# Show in JSON format
compozy config show --format json

# Output:

# {

# "config": {

# "server": {

# "host": "localhost",

# "port": 8080

# }

# },

# "sources": {

# "server.host": "env",

# "server.port": "yaml"

# }

# }

````
  </Tab>
  <Tab value="YAML Format">
```bash
# Show in YAML format
compozy config show --format yaml

# Output:
# config:
#   server:
#     host: localhost
#     port: 8080
# sources:
#   server.host: env
#   server.port: yaml
````

  </Tab>
</Tabs>

#### Validate Configuration

Validate configuration files:

```bash
# Validate default configuration
compozy config validate

# Validate specific configuration
compozy config validate --config /path/to/config.yaml

# Validate with environment file
compozy config validate --env-file .env.production

# Output on success:
# ✅ Configuration is valid

# Output on error:
# ❌ Configuration validation failed: server.port must be between 1 and 65535
```

#### Configuration Diagnostics

Run comprehensive configuration diagnostics:

```bash
# Basic diagnostics
compozy config diagnostics

# Verbose diagnostics with detailed information
compozy config diagnostics --verbose

# Check specific configuration file
compozy config diagnostics --config /path/to/config.yaml
```

**Sample Diagnostics Output:**

```
=== Configuration Diagnostics ===
Working Directory: /home/user/my-project

--- Configuration File ---
✅ Config file found: /home/user/my-project/compozy-config.yaml

--- Environment File ---
✅ Env file found: /home/user/my-project/.env

--- Configuration Loading ---
✅ Configuration loaded successfully

--- Configuration Validation ---
✅ Configuration is valid

--- Source Precedence ---
Configuration sources (highest to lowest precedence):
1. CLI flags
2. YAML configuration file
3. Environment variables
4. Default values

--- Environment Variable Mapping ---
ENVIRONMENT VARIABLE          CONFIG PATH              CURRENT VALUE
SERVER_HOST                   server.host              localhost
SERVER_PORT                   server.port              8080
DB_CONN_STRING               database.conn_string      (not set)
```

### Workflow Commands

#### Run Workflow

Execute workflows:

```bash
# Run workflow with default input
compozy run workflow.yaml

# Run with specific input
compozy run workflow.yaml --input '{"message": "Hello World"}'

# Run with input file
compozy run workflow.yaml --input-file input.json

# Run with environment variables
compozy run workflow.yaml --env-file .env.production

# Run with specific project
compozy run workflow.yaml --project /path/to/project
```

#### List Workflows

List available workflows:

```bash
# List all workflows in current project
compozy workflow list

# List workflows with details
compozy workflow list --verbose

# List workflows in specific project
compozy workflow list --project /path/to/project
```

#### Describe Workflow

Show workflow details:

```bash
# Describe workflow
compozy workflow describe workflow-name

# Show workflow with input schema
compozy workflow describe workflow-name --schema

# Show workflow execution history
compozy workflow describe workflow-name --history
```

### Tool Commands

#### List Tools

List available tools:

```bash
# List all tools
compozy tool list

# List tools with details
compozy tool list --verbose

# List tools in specific project
compozy tool list --project /path/to/project
```

#### Test Tool

Test tool execution:

```bash
# Test tool with default input
compozy tool test tool-name

# Test tool with specific input
compozy tool test tool-name --input '{"param": "value"}'

# Test tool with input file
compozy tool test tool-name --input-file input.json

# Test tool with environment
compozy tool test tool-name --env-file .env.test
```

#### Describe Tool

Show tool details:

```bash
# Describe tool
compozy tool describe tool-name

# Show tool with input/output schema
compozy tool describe tool-name --schema

# Show tool execution history
compozy tool describe tool-name --history
```

### Agent Commands

#### List Agents

List available agents:

```bash
# List all agents
compozy agent list

# List agents with details
compozy agent list --verbose

# List agents in specific project
compozy agent list --project /path/to/project
```

#### Test Agent

Test agent execution:

```bash
# Test agent with prompt
compozy agent test agent-name --prompt "Hello, how are you?"

# Test agent with input file
compozy agent test agent-name --input-file prompt.txt

# Test agent with specific model
compozy agent test agent-name --model gpt-4 --prompt "Explain AI"
```

#### Describe Agent

Show agent details:

```bash
# Describe agent
compozy agent describe agent-name

# Show agent with configuration
compozy agent describe agent-name --config

# Show agent execution history
compozy agent describe agent-name --history
```

### Server Commands

#### Start Server

Start the Compozy server:

```bash
# Start server with default configuration
compozy server

# Start server with specific configuration
compozy server --config /path/to/config.yaml

# Start server with environment file
compozy server --env-file .env.production

# Start server with specific port
compozy server --port 9090

# Start server in background
compozy server --daemon
```

#### Server Status

Check server status:

```bash
# Check if server is running
compozy server status

# Check server health
compozy server health

# Show server info
compozy server info
```

### Development Commands

#### Watch Mode

Watch for changes and automatically reload:

```bash
# Watch workflow for changes
compozy watch workflow.yaml

# Watch project for changes
compozy watch --project /path/to/project

# Watch with specific patterns
compozy watch --patterns "**/*.yaml,**/*.ts"
```

#### Debug Mode

Enable debug mode for detailed logging:

```bash
# Run with debug logging
compozy --log-level debug run workflow.yaml

# Run with trace logging
compozy --log-level trace run workflow.yaml

# Run with verbose output
compozy --verbose run workflow.yaml
```

## CLI Configuration File

### Default Configuration

Create a CLI configuration file:

```yaml
# ~/.config/compozy/cli.yaml
defaults:
  project: "/path/to/default/project"
  env_file: ".env"
  log_level: "info"
  format: "table"

server:
  host: "localhost"
  port: 8080
  timeout: 30s

editor:
  command: "code"
  args: ["-w"]

aliases:
  dev: "server --env-file .env.development"
  prod: "server --env-file .env.production"
  test: "validate --strict"
```

### Environment-Specific Configuration

Create environment-specific configurations:

<Tabs items={['Development', 'Production', 'Testing']}>
  <Tab value="Development">
```yaml
# ~/.config/compozy/dev.yaml
defaults:
  project: "/home/user/projects/dev"
  env_file: ".env.development"
  log_level: "debug"

server:
host: "localhost"
port: 8080

database:
host: "localhost"
port: 5432
name: "compozy_dev"

temporal:
host_port: "localhost:7233"
namespace: "compozy-dev"

````
  </Tab>
  <Tab value="Production">
```yaml
# ~/.config/compozy/prod.yaml
defaults:
  project: "/opt/compozy/production"
  env_file: ".env.production"
  log_level: "info"

server:
  host: "0.0.0.0"
  port: 8080

database:
  host: "db.example.com"
  port: 5432
  name: "compozy_prod"

temporal:
  host_port: "temporal.example.com:7233"
  namespace: "compozy-prod"
````

  </Tab>
  <Tab value="Testing">
```yaml
# ~/.config/compozy/test.yaml
defaults:
  project: "/tmp/compozy-test"
  env_file: ".env.test"
  log_level: "debug"

server:
host: "localhost"
port: 8081

database:
host: "localhost"
port: 5432
name: "compozy_test"

temporal:
host_port: "localhost:7233"
namespace: "compozy-test"

````
  </Tab>
</Tabs>

## Command Aliases

### Built-in Aliases

Common command aliases:

```bash
# Short aliases
compozy r      # run
compozy w      # workflow
compozy t      # tool
compozy a      # agent
compozy c      # config
compozy s      # server
````

### Custom Aliases

Create custom aliases:

```bash
# Add to ~/.bashrc or ~/.zshrc
alias cz='compozy'
alias czr='compozy run'
alias czw='compozy workflow'
alias czt='compozy tool'
alias cza='compozy agent'
alias czc='compozy config'
alias czs='compozy server'

# Development aliases
alias czdev='compozy server --env-file .env.development'
alias czprod='compozy server --env-file .env.production'
alias cztest='compozy validate --strict'
```

## Output Formatting

### Format Options

Control output formatting:

```bash
# Table format (default)
compozy config show --format table

# JSON format
compozy config show --format json

# YAML format
compozy config show --format yaml

# Plain text format
compozy config show --format plain
```

### Verbosity Levels

Control output verbosity:

```bash
# Quiet mode (errors only)
compozy --quiet run workflow.yaml

# Normal mode (default)
compozy run workflow.yaml

# Verbose mode (detailed output)
compozy --verbose run workflow.yaml

# Debug mode (all output)
compozy --log-level debug run workflow.yaml
```

## Error Handling

### Common Error Types

<Callout type="error">
**Configuration Error**: Invalid configuration
```bash
# Check configuration
compozy config validate

# Fix configuration and retry

compozy config diagnostics --verbose

````
</Callout>

<Callout type="error">
**Connection Error**: Cannot connect to services
```bash
# Check service status
compozy server status

# Test connections
compozy config test-db
compozy config test-temporal
````

</Callout>

<Callout type="error">
**Runtime Error**: Tool or workflow execution failed
```bash
# Run with debug logging
compozy --log-level debug run workflow.yaml

# Check tool configuration

compozy tool describe tool-name --schema

````
</Callout>

### Exit Codes

The CLI uses standard exit codes:

| Exit Code | Description |
|-----------|-------------|
| 0 | Success |
| 1 | General error |
| 2 | Command line usage error |
| 3 | Configuration error |
| 4 | Connection error |
| 5 | Runtime error |

## Scripting and Automation

### Bash Scripting

Use CLI in bash scripts:

```bash
#!/bin/bash
set -e

# Script to deploy Compozy project
echo "Deploying Compozy project..."

# Validate configuration
if ! compozy config validate --config production.yaml; then
    echo "Configuration validation failed"
    exit 1
fi

# Start server
compozy server --config production.yaml --daemon

# Wait for server to be ready
while ! compozy server status > /dev/null 2>&1; do
    echo "Waiting for server..."
    sleep 2
done

echo "Server started successfully"

# Run initial workflow
compozy run initialization.yaml --env-file .env.production

echo "Deployment completed successfully"
````

### CI/CD Integration

Use CLI in CI/CD pipelines:

```yaml
# GitHub Actions example
name: Deploy Compozy
on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Install Compozy
        run: |
          curl -sSL https://github.com/compozy/compozy/releases/latest/download/compozy-linux-amd64.tar.gz | tar -xz
          sudo mv compozy /usr/local/bin/

      - name: Validate Configuration
        run: compozy config validate --config production.yaml

      - name: Deploy
        run: |
          compozy server --config production.yaml --daemon
          compozy run deploy.yaml --env-file .env.production
```

## Best Practices

### Configuration Management

1. **Environment Separation**: Use different configs for different environments
2. **Environment Variables**: Use environment variables for sensitive data
3. **Validation**: Always validate configuration before deployment
4. **Documentation**: Document configuration changes

### Development Workflow

1. **Watch Mode**: Use watch mode for rapid development
2. **Debug Mode**: Enable debug mode for troubleshooting
3. **Testing**: Test tools and workflows before deployment
4. **Validation**: Validate changes before committing

### Production Operations

1. **Monitoring**: Monitor server and workflow health
2. **Logging**: Use appropriate log levels for production
3. **Backup**: Backup configuration and data
4. **Updates**: Test updates in staging before production

### Security

1. **Secrets**: Never commit sensitive data
2. **Access Control**: Use proper access controls
3. **Audit Logs**: Enable audit logging
4. **Network Security**: Secure network communications

## Troubleshooting

### Debug Commands

```bash
# Check CLI version
compozy version

# Check configuration
compozy config diagnostics --verbose

# Test connections
compozy config test-db
compozy config test-temporal

# Check server status
compozy server status
compozy server health

# Debug workflow execution
compozy --log-level debug run workflow.yaml
```

### Common Issues

<Callout type="error">
  **Command Not Found**: CLI not in PATH ```bash # Add to PATH export
  PATH=$PATH:/usr/local/bin ```
</Callout>

<Callout type="error">
  **Permission Denied**: Insufficient permissions ```bash # Fix permissions
  chmod +x /usr/local/bin/compozy ```
</Callout>

<Callout type="error">
  **Configuration Not Found**: Configuration file not found ```bash # Create
  configuration file compozy config init ```
</Callout>

## Next Steps

- Learn about [Monitoring Configuration](/docs/core/configuration/monitoring-config)
- Explore [Global Configuration](/docs/core/configuration/global)
- Set up [Project Configuration](/docs/core/configuration/project-setup)
- Configure [Runtime Settings](/docs/core/configuration/runtime-config)
