---
title: Project Setup
description: Understanding Compozy's configuration architecture and project structure
---

Compozy uses a unified configuration system through the `compozy.yaml` file that manages both **application runtime behavior** and **project-specific AI workflows**. This single configuration file contains both infrastructure settings and your AI project definition.

## Configuration Architecture

<FeatureCardList cols={2} size="default">
  <FeatureCard
    title="Unified Configuration"
    description="Single compozy.yaml file containing both application and project settings"
    icon="FileText"
  />
  <FeatureCard
    title="Configuration Layers"
    description="Runtime server settings alongside AI workflows and business logic"
    icon="Layers"
  />
</FeatureCardList>

### Configuration Structure

The `compozy.yaml` file contains both application-level settings (server, database, infrastructure) and project-level settings (workflows, models, agents). This unified approach simplifies configuration management while maintaining clear separation of concerns within the file structure.

For detailed configuration properties and validation rules, see:
- [Application Schema](/docs/schema/application) - Server, database, and infrastructure settings
- [Project Schema](/docs/schema/project) - Workflows, models, agents, and AI project configuration

## Project Structure

When you run `compozy init`, you get this structure:

<ProjectStructure
  structure={[
    {
      id: "my-ai-project",
      name: "my-ai-project/",
      children: [
        { id: "compozy-yaml", name: "compozy.yaml" },
        { id: "env-file", name: ".env" },
        { id: "package-json", name: "package.json" },
        { id: "workflow-yaml", name: "workflow.yaml" },
        { id: "entrypoint-ts", name: "entrypoint.ts" },
        {
          id: "agents",
          name: "agents/",
          children: [
            { id: "researcher-yaml", name: "researcher.yaml" },
            { id: "writer-yaml", name: "writer.yaml" }
          ]
        },
        {
          id: "tools",
          name: "tools/",
          children: [
            { id: "api-client-ts", name: "api_client.ts" }
          ]
        },
        {
          id: "memory",
          name: "memory/",
          children: [
            { id: "conversation-yaml", name: "conversation.yaml" }
          ]
        }
      ]
    }
  ]}
  initialSelectedId="compozy-yaml"
  initialExpandedItems={["my-ai-project", "agents", "tools", "memory"]}
/>



## Configuration Examples

<Tabs items={["Minimal", "Production", "Development"]}>

<Tab>
**Minimal Setup**

```yaml title="compozy.yaml"
name: simple-weather-app
version: 1.0.0
description: Simple weather advisory system

workflows:
  - source: ./workflow.yaml

models:
  - provider: groq
    model: llama-3.3-70b-versatile
    api_key: "{{ .env.GROQ_API_KEY }}"

runtime:
  type: bun
  entrypoint: "./entrypoint.ts"
  permissions:
    - --allow-read
    - --allow-net
```

</Tab>

<Tab>
**Production Setup**

```yaml title="compozy.yaml"
name: enterprise-ai-system
version: 2.1.0
description: Multi-agent enterprise automation

author:
  name: AI Team
  email: ai@company.com
  organization: ACME Corp

workflows:
  - source: ./workflows/customer-support.yaml
  - source: ./workflows/data-pipeline.yaml

models:
  - provider: openai
    model: gpt-4-turbo
    api_key: "{{ .env.OPENAI_API_KEY }}"
    temperature: 0.7
    max_tokens: 4000
  - provider: anthropic
    model: claude-3-opus
    api_key: "{{ .env.ANTHROPIC_API_KEY }}"

runtime:
  type: bun
  entrypoint: ./tools.ts
  permissions:
    - --allow-read=/data
    - --allow-net=api.company.com
    - --allow-env=API_KEY,DATABASE_URL

cache:
  url: redis://localhost:6379/0
  pool_size: 10
  key_prefix: "compozy:"

monitoring:
  enabled: true
  metrics:
    provider: prometheus
    endpoint: /metrics

autoload:
  enabled: true
  strict: true
  include:
    - "agents/**/*.yaml"
    - "memory/**/*.yaml"
  exclude:
    - "**/*.tmp"
    - "**/*~"

config:
  max_string_length: 52428800  # 50MB
  async_token_counter_workers: 20
```

</Tab>

<Tab>
**Development Setup**

```yaml title="compozy.yaml"
name: dev-ai-project
version: 0.1.0
description: Development environment setup

workflows:
  - source: ./workflow.yaml

models:
  - provider: openai
    model: gpt-4
    api_key: "{{ .env.OPENAI_API_KEY }}"
  - provider: ollama
    model: llama3.2:3b
    api_url: http://localhost:11434

runtime:
  type: bun
  entrypoint: ./tools.ts
  permissions:
    - --allow-read
    - --allow-net
    - --allow-env

autoload:
  enabled: true
  strict: true
  watch_interval: 2s
  include:
    - "agents/**/*.yaml"
    - "workflows/**/*.yaml"
    - "memory/**/*.yaml"
  exclude:
    - "**/*.tmp"
    - "**/*~"
    - "**/*.bak"

config:
  max_string_length: 10485760  # 10MB
  async_token_counter_workers: 5
```

</Tab>
</Tabs>

## Schema References

The unified configuration system has detailed schema definitions:

<ReferenceCardList>
  <ReferenceCard
    title="Application Schema"
    description="Complete application configuration schema (pkg/config.Config)"
    href="/docs/schema/application"
    icon="Server"
  />
  <ReferenceCard
    title="Project Schema"
    description="Project configuration schema (project.Config)"
    href="/docs/schema/project"
    icon="FileText"
  />
  <ReferenceCard
    title="Workflow Schema"
    description="Workflow definition and task orchestration schema"
    href="/docs/schema/workflows"
    icon="Workflow"
  />
  <ReferenceCard
    title="Agent Schema"
    description="AI agent configuration and behavior schema"
    href="/docs/schema/agents"
    icon="Bot"
  />
</ReferenceCardList>

## Configuration Precedence

Configuration values are resolved in this order (highest to lowest precedence):

1. **CLI Flags**: `compozy dev --port=3000`
2. **Environment Variables**: `COMPOZY_SERVER_PORT=3000`
3. **Configuration Files**: YAML configuration files
4. **System Defaults**: Built-in safe defaults

## Related Documentation

<ReferenceCardList>
  <ReferenceCard
    title="Provider Configuration"
    description="Set up LLM providers and model authentication"
    href="/docs/core/configuration/providers"
    icon="Bot"
  />
  <ReferenceCard
    title="Runtime Configuration"
    description="Configure TypeScript/JavaScript execution environments"
    href="/docs/core/configuration/global"
    icon="Code"
  />
  <ReferenceCard
    title="AutoLoad Configuration"
    description="Enable automatic resource discovery and hot-reload"
    href="/docs/core/configuration/autoload"
    icon="RefreshCw"
  />
  <ReferenceCard
    title="Global Configuration"
    description="Configure application-wide defaults and system settings"
    href="/docs/core/configuration/global"
    icon="Settings"
  />
</ReferenceCardList>
