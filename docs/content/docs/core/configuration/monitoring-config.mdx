---
title: Monitoring
description: Configure basic monitoring and metrics endpoint for your Compozy applications
---

Compozy provides simple monitoring capabilities through a Prometheus-compatible metrics endpoint. When enabled, the system exposes basic metrics that can be scraped by monitoring systems.

## Basic Configuration

<Tabs items={["YAML Configuration", "Environment Variables"]} defaultValue="YAML Configuration">
  <Tab value="YAML Configuration">
    ```yaml
    # compozy.yaml
    name: my-app
    version: 1.0.0

    # Basic monitoring configuration
    monitoring:
      enabled: true
      path: /metrics

    workflows:
      - source: ./workflow.yaml
    ```
  </Tab>

  <Tab value="Environment Variables">
    ```bash
    # Environment variables take precedence over YAML
    export MONITORING_ENABLED=true
    export MONITORING_PATH=/metrics

    # Start your application
    compozy start
    ```
  </Tab>
</Tabs>

## Configuration Options

| Option | Type | Default | Description |
|--------|------|---------|-------------|
| `enabled` | boolean | `false` | Enable/disable monitoring endpoint |
| `path` | string | `/metrics` | HTTP path for metrics endpoint |

### Path Requirements

<Callout type="info">
  The monitoring path must:
  - Start with `/`
  - Not conflict with API routes (`/api/*`)
  - Not contain query parameters
</Callout>

## Usage Examples

### Enable Monitoring

```yaml
monitoring:
  enabled: true
```

### Custom Metrics Path

```yaml
monitoring:
  enabled: true
  path: /internal/metrics
```

### Environment Override

```bash
# Override YAML configuration
export MONITORING_ENABLED=true
export MONITORING_PATH=/custom/metrics
```

## Accessing Metrics

Once enabled, metrics are available at the configured endpoint:

```bash
# Default endpoint
curl http://localhost:8080/metrics

# Custom endpoint
curl http://localhost:8080/internal/metrics
```

## Integration

The metrics endpoint is compatible with:

- Prometheus
- Grafana Agent
- VictoriaMetrics
- Other Prometheus-compatible systems

Example Prometheus scrape configuration:

```yaml
scrape_configs:
  - job_name: 'compozy'
    static_configs:
      - targets: ['localhost:8080']
    metrics_path: '/metrics'
```

## Implementation Details

The monitoring system provides:

- **Basic Configuration**: Simple enabled/disabled flag
- **Custom Path**: Configurable metrics endpoint
- **Environment Override**: Environment variables take precedence
- **Validation**: Path validation to prevent conflicts

### Configuration Validation

The system validates:

- Path starts with `/`
- Path doesn't conflict with `/api/*` routes
- Path doesn't contain query parameters
- Valid boolean values for enabled flag

## Troubleshooting

### Common Issues

**Metrics endpoint not accessible:**
- Verify `enabled: true` in configuration
- Check port and path configuration
- Ensure no firewall blocking access

**Path conflicts:**
- Avoid using `/api/*` paths
- Choose unique path not used by application

**Environment variables not working:**
- Restart application after setting environment variables
- Verify variable names: `MONITORING_ENABLED`, `MONITORING_PATH`

<ReferenceCardList>
  <ReferenceCard
    title="Runtime Configuration"
    description="Configure tool execution environment and settings"
    href="/docs/core/configuration/runtime-config"
    icon="Play"
  />
  <ReferenceCard
    title="Global Configuration"
    description="Main project configuration options and system settings"
    href="/docs/core/configuration/global"
    icon="Settings"
  />
  <ReferenceCard
    title="CLI Configuration"
    description="Command-line interface setup and development workflow"
    href="/docs/core/configuration/cli"
    icon="Terminal"
  />
</ReferenceCardList>