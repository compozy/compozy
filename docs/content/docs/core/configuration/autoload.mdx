---
title: AutoLoad
description: Automatic discovery and hot-reloading of project resources during development. Reduce configuration boilerplate by 80% and enable seamless development workflows.
---

## Overview

<FeatureCardList cols={2} size="sm">
  <FeatureCard
    title="Automatic Discovery"
    description="Scan project directories and automatically load agents, tools, workflows, and memory configurations"
    icon="Search"
  />
  <FeatureCard
    title="Hot-Reloading"
    description="Monitor file changes and reload resources instantly without restarting the server"
    icon="RefreshCw"
  />
</FeatureCardList>

Instead of manually registering every resource:

```yaml title="Manual Configuration (Without AutoLoad)"
# workflow.yaml
agents:
  - ./agents/researcher.yaml
  - ./agents/writer.yaml
  - ./agents/reviewer.yaml
  - ./agents/translator.yaml
  - ./agents/analyzer.yaml
  # ... dozens more manual entries

tools:
  - ./tools/web-search.yaml
  - ./tools/document-parser.yaml
  - ./tools/email-sender.yaml
  # ... dozens more manual entries
```

AutoLoad automatically discovers and loads them:

```yaml title="AutoLoad Configuration"
# compozy.yaml
autoload:
  enabled: true
  watch_enabled: true  # Enable hot-reloading
  include:
    - "agents/**/*.yaml"
    - "tools/**/*.yaml"
    - "memory/**/*.yaml"
  exclude:
    - "**/*-test.yaml"
    - "**/*-draft.yaml"
```

## Configuration Reference

### Basic Configuration

<Tabs items={["Minimal Setup", "Development Setup", "Production Setup"]}>

<Tab>
```yaml title="compozy.yaml"
autoload:
  enabled: true
  include:
    - "agents/*.yaml"
    - "tools/*.yaml"
```
</Tab>

<Tab>
```yaml title="compozy.yaml"
autoload:
  enabled: true
  strict: false          # Allow partial loading during development
  watch_enabled: true    # Enable hot-reloading
  include:
    - "agents/**/*.yaml"
    - "tools/**/*.yaml"
    - "memory/**/*.yaml"
    - "workflows/**/*.yaml"
  exclude:
    - "**/*-test.yaml"
    - "**/*-draft.yaml"
    - "**/*.backup"
```
</Tab>

<Tab>
```yaml title="compozy.yaml"
autoload:
  enabled: true
  strict: true           # Fail fast on any loading errors
  watch_enabled: false   # Disable watching in production
  include:
    - "agents/**/*.yaml"
    - "tools/**/*.yaml"
    - "memory/**/*.yaml"
  exclude:
    - "**/*-test.yaml"
    - "**/*-dev.yaml"
    - "**/*.backup"
    - "**/draft/**"
```
</Tab>

</Tabs>

For the complete AutoLoad configuration schema and all available options, see the [AutoLoad Configuration Schema](/docs/schema/application).

## Include/Exclude Patterns

AutoLoad uses **doublestar glob patterns** for powerful file matching:

<Tabs items={["By Resource Type", "By Structure", "By Convention"]}>

<Tab>
```yaml
include:
  # Resource-specific patterns
  - "agents/*.yaml"           # Agent configurations
  - "tools/*.yaml"            # Tool definitions
  - "memory/**/*.yaml"        # Memory configurations
  - "workflows/**/*.yaml"     # Workflow definitions
  - "mcps/*.yaml"            # MCP server configurations
```
</Tab>

<Tab>
```yaml
include:
  # Flat structure
  - "*.yaml"                  # All files in root

  # Nested structure
  - "**/*.yaml"              # All YAML files recursively
  - "config/**/*.yaml"       # All configs in subdirectories

  # Mixed structure
  - "agents/*.yaml"          # Direct agents
  - "tools/**/tool.yaml"     # Nested tool configs
```
</Tab>

<Tab>
```yaml
include:
  # Convention-based patterns
  - "*-agent.yaml"           # Files ending with -agent
  - "**/config.yaml"         # Config files in any directory
  - "*/main.yaml"            # Main files in subdirectories
  - "production/**/*.yaml"   # Production configurations
```
</Tab>

</Tabs>

## Development Workflow

### Hot-Reloading Setup

Enable `watch_enabled` for automatic reloading during development:

```yaml title="compozy.yaml"
autoload:
  enabled: true
  watch_enabled: true
  strict: false          # Allow partial loading during development
  include:
    - "agents/**/*.yaml"
    - "tools/**/*.yaml"
    - "memory/**/*.yaml"
```
### Directory Structure Recommendations

<Tabs items={["Flat Structure", "Nested Structure", "Domain Structure"]}>

<Tab>
<ProjectStructure
  structure={[
    {
      id: "project",
      name: "project/",
      children: [
        { id: "compozy-yaml", name: "compozy.yaml" },
        { id: "workflow-yaml", name: "workflow.yaml" },
        {
          id: "agents",
          name: "agents/",
          children: [
            { id: "researcher", name: "researcher.yaml" },
            { id: "writer", name: "writer.yaml" },
            { id: "reviewer", name: "reviewer.yaml" },
          ],
        },
        {
          id: "tools",
          name: "tools/",
          children: [
            { id: "web-search", name: "web-search.yaml" },
            { id: "file-parser", name: "file-parser.yaml" },
            { id: "email-sender", name: "email-sender.yaml" },
          ],
        },
        {
          id: "memory",
          name: "memory/",
          children: [
            { id: "conversation", name: "conversation.yaml" },
            { id: "user-context", name: "user-context.yaml" },
          ],
        },
      ],
    },
  ]}
  initialSelectedId="project"
  initialExpandedItems={["project", "agents", "tools", "memory"]}
/>

**AutoLoad Configuration:**
```yaml
autoload:
  enabled: true
  include:
    - "agents/*.yaml"
    - "tools/*.yaml"
    - "memory/*.yaml"
```
</Tab>

<Tab>
<ProjectStructure
  structure={[
    {
      id: "project",
      name: "project/",
      children: [
        { id: "compozy-yaml", name: "compozy.yaml" },
        { id: "workflow-yaml", name: "workflow.yaml" },
        {
          id: "agents",
          name: "agents/",
          children: [
            {
              id: "content",
              name: "content/",
              children: [
                { id: "writer", name: "writer.yaml" },
                { id: "editor", name: "editor.yaml" },
              ],
            },
            {
              id: "research",
              name: "research/",
              children: [
                { id: "web-researcher", name: "web-researcher.yaml" },
                { id: "data-analyzer", name: "data-analyzer.yaml" },
              ],
            },
          ],
        },
        {
          id: "tools",
          name: "tools/",
          children: [
            {
              id: "external",
              name: "external/",
              children: [
                { id: "api-client", name: "api-client.yaml" },
                { id: "webhook", name: "webhook.yaml" },
              ],
            },
            {
              id: "internal",
              name: "internal/",
              children: [
                { id: "validator", name: "validator.yaml" },
                { id: "formatter", name: "formatter.yaml" },
              ],
            },
          ],
        },
        {
          id: "memory",
          name: "memory/",
          children: [
            {
              id: "short-term",
              name: "short-term/",
              children: [
                { id: "session", name: "session.yaml" },
              ],
            },
            {
              id: "long-term",
              name: "long-term/",
              children: [
                { id: "knowledge", name: "knowledge.yaml" },
              ],
            },
          ],
        },
      ],
    },
  ]}
  initialSelectedId="project"
  initialExpandedItems={["project", "agents", "tools", "memory", "content", "research", "external", "internal", "short-term", "long-term"]}
/>

**AutoLoad Configuration:**
```yaml
autoload:
  enabled: true
  include:
    - "agents/**/*.yaml"
    - "tools/**/*.yaml"
    - "memory/**/*.yaml"
```
</Tab>

<Tab>
<ProjectStructure
  structure={[
    {
      id: "project",
      name: "project/",
      children: [
        { id: "compozy-yaml", name: "compozy.yaml" },
        {
          id: "domains",
          name: "domains/",
          children: [
            {
              id: "content-creation",
              name: "content-creation/",
              children: [
                {
                  id: "agents-cc",
                  name: "agents/",
                  children: [
                    { id: "writer", name: "writer.yaml" },
                    { id: "editor", name: "editor.yaml" },
                  ],
                },
                {
                  id: "tools-cc",
                  name: "tools/",
                  children: [
                    { id: "grammar-check", name: "grammar-check.yaml" },
                  ],
                },
                {
                  id: "memory-cc",
                  name: "memory/",
                  children: [
                    { id: "style-guide", name: "style-guide.yaml" },
                  ],
                },
              ],
            },
            {
              id: "data-processing",
              name: "data-processing/",
              children: [
                {
                  id: "agents-dp",
                  name: "agents/",
                  children: [
                    { id: "analyzer", name: "analyzer.yaml" },
                  ],
                },
                {
                  id: "tools-dp",
                  name: "tools/",
                  children: [
                    { id: "parser", name: "parser.yaml" },
                    { id: "validator", name: "validator.yaml" },
                  ],
                },
                {
                  id: "workflows-dp",
                  name: "workflows/",
                  children: [
                    { id: "etl-pipeline", name: "etl-pipeline.yaml" },
                  ],
                },
              ],
            },
          ],
        },
      ],
    },
  ]}
  initialSelectedId="project"
  initialExpandedItems={["project", "domains", "content-creation", "data-processing", "agents-cc", "tools-cc", "memory-cc", "agents-dp", "tools-dp", "workflows-dp"]}
/>

**AutoLoad Configuration:**
```yaml
autoload:
  enabled: true
  include:
    - "domains/**/agents/*.yaml"
    - "domains/**/tools/*.yaml"
    - "domains/**/memory/*.yaml"
    - "domains/**/workflows/*.yaml"
```
</Tab>

</Tabs>

## Supported Resource Types

AutoLoad automatically discovers and registers these resource types:

<List>
  <ListItem title="Agents" icon="Bot">
    AI-powered components that understand natural language
  </ListItem>
  <ListItem title="Tools" icon="Wrench">
    TypeScript functions for specific operations
  </ListItem>
  <ListItem title="Memory" icon="Database">
    Persistent context and conversation history
  </ListItem>
  <ListItem title="Workflows" icon="Workflow">
    Task orchestration and execution flows
  </ListItem>
  <ListItem title="MCP Servers" icon="Radio">
    Model Context Protocol server configurations
  </ListItem>
  <ListItem title="Projects" icon="Home">
    Project-level configurations and settings
  </ListItem>
</List>

### Resource Format Requirements

All auto-discovered resources must include `resource` and `id` fields:

<Tabs items={["Bot", "Wrench", "Database", "Workflow"]}>

<Tab>
```yaml title="agents/researcher.yaml"
resource: agent
id: researcher
description: Research specialist agent
version: 1.0.0

config:
  provider: openai
  model: gpt-4.1-2025-04-14
  api_key: "{{ .env.OPENAI_API_KEY }}"

instructions: |
  You are a research specialist that finds and analyzes information.
  Use available tools to gather comprehensive data on any topic.

tools:
  - web-search
  - document-parser

actions:
  - id: research_topic
    prompt: |
      Research the following topic: {{ .input.topic }}
      Provide comprehensive findings with sources.
```
</Tab>

<Tab>
```yaml title="tools/web-search.yaml"
resource: tool
id: web-search
description: Web search tool for finding information
version: 1.0.0

input:
  type: object
  properties:
    query:
      type: string
      description: Search query
    max_results:
      type: integer
      description: Maximum number of results
      default: 10
  required:
    - query

output:
  type: object
  properties:
    results:
      type: array
      items:
        type: object
        properties:
          title:
            type: string
          url:
            type: string
          snippet:
            type: string
```
</Tab>

<Tab>
```yaml title="memory/conversation.yaml"
resource: memory
id: conversation
description: Conversation history memory
version: 1.0.0

config:
  type: redis
  connection:
    host: "{{ .env.REDIS_HOST | default \"localhost\" }}"
    port: "{{ .env.REDIS_PORT | default \"6379\" }}"
    database: 0

  retention:
    max_messages: 1000
    ttl: 86400  # 24 hours

  structure:
    key_pattern: "conversation:{{.session_id}}"
    fields:
      - timestamp
      - user_id
      - message
      - response
      - context
```
</Tab>

<Tab>
```yaml title="workflows/data-pipeline.yaml"
resource: workflow
id: data-pipeline
description: Data processing pipeline
version: 1.0.0

config:
  input:
    type: object
    properties:
      data_source:
        type: string
        description: Source of data to process
      output_format:
        type: string
        enum: ["json", "csv", "parquet"]
        default: "json"
    required:
      - data_source

agents:
  - data-processor

tools:
  - file-parser
  - format-converter

tasks:
  - id: extract
    type: basic
    tool: file-parser
    with:
      source: "{{ .workflow.input.data_source }}"

  - id: transform
    type: basic
    agent: data-processor
    action: process_data
    with:
      data: "{{ .tasks.extract.output }}"

  - id: load
    type: basic
    tool: format-converter
    with:
      data: "{{ .tasks.transform.output }}"
      format: "{{ .workflow.input.output_format }}"
    final: true

outputs:
  processed_data: "{{ .tasks.load.output }}"
  statistics: "{{ .tasks.transform.output.stats }}"
```
</Tab>

</Tabs>

## Resource References

### Using AutoLoaded Resources

AutoLoad integrates with Compozy's reference system, enabling ID-based scope references:

<Tabs items={["In Workflows", "In Agents", "In Tools"]}>

<Tab>
```yaml title="workflow.yaml"
# Reference auto-loaded agents
agents:
  - researcher
  - writer
  - reviewer

# Reference auto-loaded tools
tools:
  - web-search
  - document-parser

# Reference auto-loaded memory
memory:
  - conversation

tasks:
  - id: research
    type: basic
    agent: researcher
    action: research_topic

  - id: write
    type: basic
    agent: writer
    action: create_content
    with:
      research_data: "{{ .tasks.research.output }}"

  - id: review
    type: basic
    agent: reviewer
    action: review_content
    with:
      content: "{{ .tasks.write.output }}"
    final: true
```
</Tab>

<Tab>
```yaml title="agents/content-creator.yaml"
resource: agent
id: content-creator
description: Content creation agent with tool access

# Reference auto-loaded tools
tools:
  - grammar-check
  - style-analyzer
  - plagiarism-detector

# Reference auto-loaded memory
memory:
  - style-guide

actions:
  - id: create_article
    prompt: |
      Create a high-quality article on: {{ .input.topic }}
      Use the style guide from memory and check grammar/style.

  - id: optimize_content
    prompt: |
      Optimize this content for readability and engagement:
      {{ .input.content }}

      Use available tools to check grammar, style, and originality.
```
</Tab>

<Tab>
```yaml title="tools/content-processor.yaml"
resource: tool
id: content-processor
description: Content processing tool with memory access

# Reference auto-loaded memory for context
memory:
  - content-cache

# Reference other tools for processing pipeline
dependencies:
  - text-analyzer
  - format-converter

input:
  type: object
  properties:
    content:
      type: string
      description: Content to process
    operations:
      type: array
      items:
        type: string
        enum: ["analyze", "format", "optimize"]
  required:
    - content
    - operations
```
</Tab>

</Tabs>

## Strict vs Non-Strict Mode

### Strict Mode (Production)

When `strict: true` (default), AutoLoad fails immediately on any loading error:

```yaml title="compozy.yaml"
autoload:
  enabled: true
  strict: true  # Fail fast on errors
```

<Callout type="error" title="Strict Mode Behavior">
  Any invalid resource file will cause the entire application to fail startup. Use this in production to ensure all resources are valid.
</Callout>

## Security Features

### Path Validation

AutoLoad includes comprehensive security measures:

<List>
  <ListItem title="Path Traversal Prevention" icon="Lock">
    Blocks `../` and absolute paths to prevent directory traversal attacks
  </ListItem>
  <ListItem title="Symlink Resolution" icon="Lock">
    Validates symbolic links stay within project root directory
  </ListItem>
  <ListItem title="Pattern Validation" icon="Lock">
    Rejects malicious glob patterns that could access sensitive files
  </ListItem>
  <ListItem title="Default Exclusions" icon="Lock">
    Automatically excludes system and temporary files for security
  </ListItem>
</List>

### Security Best Practices

<List className="mt-4 mb-6">
  <ListItem title="Use only relative paths in include patterns" icon="CheckCircle">
    Avoid absolute paths that could access system files
  </ListItem>
  <ListItem title="Exclude sensitive directories (.env, .ssh, secrets)" icon="CheckCircle">
    Prevent accidental exposure of sensitive configuration files
  </ListItem>
  <ListItem title="Validate all auto-loaded resources in CI/CD" icon="CheckCircle">
    Ensure resource validation in your deployment pipeline
  </ListItem>
  <ListItem title="Use strict mode in production environments" icon="CheckCircle">
    Fail fast on any resource loading errors in production
  </ListItem>
  <ListItem title="Regularly audit include/exclude patterns" icon="CheckCircle">
    Review patterns to ensure they still meet security requirements
  </ListItem>
</List>

<Tabs items={["Safe Patterns", "Dangerous Patterns"]}>

<Tab>
```yaml
# ✅ Safe AutoLoad patterns
autoload:
  enabled: true
  include:
    - "agents/*.yaml"           # Relative paths only
    - "tools/safe/*.yaml"       # Specific subdirectories
    - "config/production/*.yaml" # Controlled locations
  exclude:
    - "**/.env*"                # Exclude environment files
    - "**/*.secret"             # Exclude secret files
    - "**/private/**"           # Exclude private directories
```
</Tab>

<Tab>
```yaml
# ❌ Dangerous patterns (will be rejected)
autoload:
  enabled: true
  include:
    - "/etc/passwd"             # Absolute paths blocked
    - "../../../secrets/*"      # Path traversal blocked
    - "~/.ssh/*"               # Home directory access blocked
```
</Tab>

</Tabs>

<ReferenceCardList>
  <ReferenceCard
    title="Project Setup"
    description="Configure projects, models, and runtime settings"
    href="/docs/core/configuration/project-setup"
    icon="BookOpen"
  />
  <ReferenceCard
    title="Workflow Configuration"
    description="Build and configure AI-powered workflows"
    href="/docs/core/configuration/workflows"
    icon="Workflow"
  />
  <ReferenceCard
    title="YAML Templates"
    description="Dynamic configuration with template expressions"
    href="/docs/core/yaml-templates/overview"
    icon="FileCode"
  />
  <ReferenceCard
    title="Environment Variables"
    description="Configure runtime environment and secrets"
    href="/docs/core/configuration/global"
    icon="Shield"
  />
  <ReferenceCard
    title="Agent Configuration"
    description="Create and configure AI agents"
    href="/docs/core/agents/overview"
    icon="BrainCircuit"
  />
  <ReferenceCard
    title="Tool Configuration"
    description="Build custom TypeScript tools"
    href="/docs/core/tools/overview"
    icon="Wrench"
  />
  <ReferenceCard
    title="Memory Configuration"
    description="Persistent context and conversation history"
    href="/docs/core/memory/overview"
    icon="Database"
  />
  <ReferenceCard
    title="MCP Configuration"
    description="Model Context Protocol integration"
    href="/docs/core/mcp/overview"
    icon="Radio"
  />
</ReferenceCardList>
