---
title: Monitoring Commands
description: Monitor and observe workflow executions, system health, and performance metrics for comprehensive operational insights
icon: Monitor
---

The Compozy CLI provides powerful monitoring capabilities for observing workflow executions, system health, and performance metrics. These commands help you track workflow progress, diagnose issues, and optimize system performance in both development and production environments.

## Available Commands

<FeatureCardList cols={2}>
  <FeatureCard 
    title="Status Commands" 
    icon="Activity"
    description="Monitor server health, workflow executions, and system status with real-time updates and detailed diagnostics"
  />
  <FeatureCard 
    title="Logs Commands" 
    icon="FileText"
    description="Stream, search, and analyze logs from workflows, tasks, and system components with filtering and aggregation"
  />
  <FeatureCard 
    title="Metrics Commands" 
    icon="BarChart3"
    description="View performance metrics, execution statistics, and resource utilization with historical data and trends"
  />
  <FeatureCard 
    title="Health Commands" 
    icon="Heart"
    description="Check system health, dependency status, and service availability with comprehensive health checks"
  />
</FeatureCardList>

## Command Reference

### Status Monitoring

Monitor workflow executions and system status:

```bash
# Check server status
compozy status

# Monitor workflow execution
compozy status workflow <workflow-id>

# Monitor specific execution
compozy status execution <execution-id>

# List active executions
compozy status executions --active

# Monitor system health
compozy status health
```

#### Options
```bash
# Output and formatting
--format json|tui|auto    # Output format (default: auto)
--watch                   # Watch for real-time updates
--refresh duration        # Refresh interval for watch mode (default: 2s)

# Filtering
--status running|completed|failed|all  # Filter by execution status
--limit int               # Maximum number of results (default: 20)
--since duration          # Show executions since time (e.g., 1h, 30m)
```

### Log Management

Stream and analyze logs from workflows and system components:

```bash
# Stream all logs
compozy logs

# Stream workflow logs
compozy logs workflow <workflow-id>

# Stream execution logs
compozy logs execution <execution-id>

# Stream logs by component
compozy logs --component worker
compozy logs --component temporal
compozy logs --component runtime

# Search logs
compozy logs --search "error"
compozy logs --filter level=error
```

#### Options
```bash
# Output control
--format json|text        # Log output format (default: text)
--follow, -f              # Follow log output
--tail int                # Number of recent lines to show (default: 100)

# Filtering
--level debug|info|warn|error  # Filter by log level
--component string        # Filter by component name
--search string           # Search log content
--since time              # Show logs since timestamp
--until time              # Show logs until timestamp

# Advanced filtering
--filter key=value        # Custom filter expressions
--exclude string          # Exclude patterns from output
```

### Metrics and Analytics

View performance metrics and execution analytics:

```bash
# System metrics overview
compozy metrics

# Workflow performance metrics
compozy metrics workflow <workflow-id>

# Execution metrics
compozy metrics execution <execution-id>

# Resource utilization
compozy metrics resources

# Performance trends
compozy metrics trends --period 24h
```

#### Options
```bash
# Time range
--period duration         # Time period for metrics (default: 1h)
--from time               # Start time for metrics
--to time                 # End time for metrics

# Aggregation
--granularity 1m|5m|1h|1d # Metrics granularity (default: 5m)
--aggregate sum|avg|max|min  # Aggregation method

# Output
--format json|table|csv   # Output format (default: table)
--export path             # Export metrics to file
```

### Health Checks

Comprehensive system health monitoring:

```bash
# Overall system health
compozy health

# Component health checks
compozy health check database
compozy health check redis
compozy health check temporal
compozy health check mcp-proxy

# Dependency health
compozy health dependencies

# Service readiness
compozy health ready
```

#### Options
```bash
# Health check control
--timeout duration        # Health check timeout (default: 30s)
--interval duration       # Check interval for continuous monitoring
--retries int             # Number of retry attempts (default: 3)

# Output
--verbose                 # Detailed health information
--json                    # JSON output format
--exit-code               # Use exit codes for health status
```

## Monitoring Workflows

### Real-time Execution Monitoring

Monitor workflow executions as they run:

<Mermaid chart={`graph TD
    A[compozy status execution] --> B[Execution Details]
    B --> C[Task Progress]
    B --> D[Agent Activity]
    B --> E[Tool Calls]
    
    C --> F[Task Status]
    C --> G[Execution Time]
    C --> H[Resource Usage]
    
    D --> I[Agent Responses]
    D --> J[Model Calls]
    D --> K[Token Usage]
    
    E --> L[Tool Results]
    E --> M[Runtime Logs]
    E --> N[Error Details]
    
    F --> O[Real-time Updates]
    G --> O
    H --> O
    I --> O
    J --> O
    K --> O
    L --> O
    M --> O
    N --> O`} />

### Example Monitoring Session

```bash
# Start monitoring a workflow execution
compozy status execution exec_abc123 --watch --format tui

# Expected output:
┌─ Execution: exec_abc123 ─────────────────────────────────────┐
│ Workflow: customer-support-workflow                          │
│ Status: running                                               │
│ Started: 2024-01-20 14:30:00 UTC (2m ago)                   │
│ Progress: 3/5 tasks completed                                 │
└───────────────────────────────────────────────────────────────┘

┌─ Active Tasks ────────────────────────────────────────────────┐
│ ● analyze-request     [RUNNING]    45s elapsed                │
│ ✓ validate-input      [COMPLETE]   12s duration               │
│ ✓ route-to-agent      [COMPLETE]   8s duration                │
│ ○ generate-response   [PENDING]    -                          │
│ ○ send-notification   [PENDING]    -                          │
└───────────────────────────────────────────────────────────────┘

┌─ Resource Usage ──────────────────────────────────────────────┐
│ CPU: 15%    Memory: 128MB    Tokens: 1,250                   │
│ Tools: 3 calls    Agents: 2 active    Runtime: healthy       │
└───────────────────────────────────────────────────────────────┘
```

## Log Analysis

### Structured Log Streaming

Stream and filter logs with powerful query capabilities:

```bash
# Stream logs with error filtering
compozy logs --level error --follow

# Search for specific patterns
compozy logs --search "timeout" --component runtime

# JSON output for processing
compozy logs execution exec_abc123 --format json | jq '.[] | select(.level == "error")'
```

### Log Format Examples

**Text Format:**
```
2024-01-20T14:35:22Z INFO  [worker] Starting workflow execution exec_abc123
2024-01-20T14:35:23Z DEBUG [executor] Task analyze-request initialized
2024-01-20T14:35:25Z WARN  [runtime] Tool execution timeout exceeded threshold
2024-01-20T14:35:26Z ERROR [agent] Failed to generate response: context length exceeded
```

**JSON Format:**
```json
{
  "timestamp": "2024-01-20T14:35:26Z",
  "level": "error",
  "component": "agent",
  "execution_id": "exec_abc123",
  "task_id": "analyze-request",
  "message": "Failed to generate response: context length exceeded",
  "details": {
    "tokens_used": 8192,
    "max_tokens": 8000,
    "model": "gpt-4.1-2025-04-14"
  }
}
```

## Performance Metrics

### System Performance Overview

Monitor key performance indicators:

```bash
# System overview
compozy metrics --period 1h

┌─ System Metrics (Last Hour) ──────────────────────────────────┐
│ Executions: 45 total, 42 successful, 3 failed                │
│ Avg Duration: 2m 15s                                          │
│ Token Usage: 125K total, 2.8K avg per execution              │
│ Tool Calls: 234 total, 98.5% success rate                    │
└───────────────────────────────────────────────────────────────┘

┌─ Resource Utilization ────────────────────────────────────────┐
│ CPU Usage: 25% avg, 65% peak                                 │
│ Memory: 2.1GB used, 8GB total                                │
│ Database: 450 queries/min, 15ms avg latency                  │
│ Redis: 1.2K ops/sec, 2ms avg latency                         │
└───────────────────────────────────────────────────────────────┘
```

### Workflow-Specific Metrics

```bash
# Workflow performance analysis
compozy metrics workflow customer-support --period 24h

┌─ Workflow: customer-support (24h) ────────────────────────────┐
│ Executions: 156 (↑12% vs yesterday)                          │
│ Success Rate: 94.2% (↑2.1% vs yesterday)                     │
│ Avg Duration: 1m 45s (↓15s vs yesterday)                     │
│ P95 Duration: 3m 12s                                          │
└───────────────────────────────────────────────────────────────┘

┌─ Task Performance ────────────────────────────────────────────┐
│ validate-input:    12s avg (95% success)                     │
│ analyze-request:   45s avg (92% success)                     │
│ generate-response: 38s avg (96% success)                     │
│ send-notification: 8s avg (99% success)                      │
└───────────────────────────────────────────────────────────────┘
```

## Health Monitoring

### Comprehensive Health Checks

Monitor system and dependency health:

```bash
# Full health check
compozy health

┌─ System Health ───────────────────────────────────────────────┐
│ Overall Status: Healthy ✓                                     │
│ Uptime: 7d 12h 34m                                           │
│ Version: v0.8.0                                               │
└───────────────────────────────────────────────────────────────┘

┌─ Core Services ───────────────────────────────────────────────┐
│ ✓ HTTP API Server     port 5001    response: 12ms            │
│ ✓ Worker Service      active        queue: 3 pending         │
│ ✓ Task Executor       running       pool: 8/10 workers       │
│ ✓ Bun Runtime         healthy       sandbox: enabled         │
└───────────────────────────────────────────────────────────────┘

┌─ Dependencies ────────────────────────────────────────────────┐
│ ✓ PostgreSQL          5432         latency: 5ms              │
│ ✓ Redis               6379         memory: 45MB              │
│ ✓ Temporal            7233         workflows: 12 active      │
│ ✓ MCP Proxy           8081         servers: 3 connected      │
└───────────────────────────────────────────────────────────────┘
```

### Dependency Monitoring

```bash
# Check specific dependencies
compozy health check database --verbose

Database Health Check:
✓ Connection: Established (5ms)
✓ Query Performance: SELECT 1 (2ms)
✓ Migrations: Up to date (v15)
✓ Connection Pool: 8/20 active
✓ Storage: 2.1GB used, 47GB available
✓ Backup Status: Last backup 4h ago
```

## Automation and Integration

### JSON Output for Monitoring Systems

```bash
# Export metrics for external monitoring
compozy metrics --format json --period 1h > metrics.json

# Health checks for alerting
if ! compozy health --exit-code --quiet; then
  echo "System unhealthy, sending alert..."
  # Send alert logic
fi

# Log aggregation
compozy logs --format json --since 1h | \
  jq '.[] | select(.level == "error")' | \
  send-to-logging-system
```

### Monitoring Scripts

```bash
#!/bin/bash
# monitoring-dashboard.sh

echo "=== Compozy System Status ==="
compozy status --format tui

echo -e "\n=== Active Executions ==="
compozy status executions --active --limit 10

echo -e "\n=== Recent Errors ==="
compozy logs --level error --tail 5 --format text

echo -e "\n=== System Health ==="
compozy health --format tui
```

## Best Practices

### Monitoring Strategy

<List>
  <ListItem title="Real-time Monitoring">
    Use `--watch` mode for active executions and critical workflows
  </ListItem>
  <ListItem title="Log Aggregation">
    Stream logs to external systems for persistence and analysis
  </ListItem>
  <ListItem title="Metric Collection">
    Export metrics regularly for trend analysis and capacity planning
  </ListItem>
  <ListItem title="Health Checks">
    Integrate health commands into monitoring and alerting systems
  </ListItem>
  <ListItem title="Performance Baselines">
    Establish baseline metrics for comparison and anomaly detection
  </ListItem>
</List>

### Troubleshooting Common Issues

<List>
  <ListItem title="Slow Executions">
    Use metrics commands to identify bottlenecks in tasks or tool calls
  </ListItem>
  <ListItem title="Failed Workflows">
    Combine status and logs commands to trace execution failures
  </ListItem>
  <ListItem title="Resource Issues">
    Monitor system health and resource utilization trends
  </ListItem>
  <ListItem title="Integration Problems">
    Check MCP proxy and external service health status
  </ListItem>
</List>

## Integration Examples

### Prometheus Metrics Export

```bash
# Export metrics in Prometheus format
compozy metrics --format prometheus > /var/lib/prometheus/compozy.prom

# Health check endpoint for load balancers
compozy health ready --exit-code --timeout 5s
```

### Grafana Dashboard Data

```bash
# Export metrics for Grafana
compozy metrics trends --period 24h --format json | \
  jq '.[] | {timestamp: .timestamp, duration: .avg_duration, success_rate: .success_rate}'
```

### ELK Stack Integration

```bash
# Stream structured logs to Elasticsearch
compozy logs --format json --follow | \
  logstash -f /etc/logstash/conf.d/compozy.conf
```

## Next Steps

Explore related monitoring and observability features:

<ReferenceCardList>
  <ReferenceCard
    title="Workflow Commands"
    description="Learn how to manage and execute workflows"
    href="/docs/cli/workflow-commands"
    icon="Workflow"
  />
  <ReferenceCard
    title="Execution Commands"
    description="Start and manage development and production servers"
    href="/docs/cli/execution-commands"
    icon="Play"
  />
  <ReferenceCard
    title="Observability Guide"
    description="Complete guide to monitoring and observability patterns"
    href="/docs/core/metrics/observability"
    icon="BarChart3"
  />
  <ReferenceCard
    title="Production Deployment"
    description="Deploy and scale Compozy with comprehensive monitoring"
    href="/docs/core/deployment/deployment-options"
    icon="Cloud"
  />
</ReferenceCardList>
