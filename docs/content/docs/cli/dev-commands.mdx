---
title: "Development Commands"
description: "Development server commands for Compozy with hot reload and debugging"
icon: SquareChevronRight
---

The `compozy dev` and `compozy start` commands provide development and production server capabilities for your Compozy workflows.

<Callout type="info">
The `dev` command is optimized for development with hot reload and verbose logging, while `start` is optimized for production deployment.
</Callout>

## Development Server

### compozy dev

Start the development server with hot reload and enhanced debugging:

```bash
# Start development server with defaults
compozy dev

# Start with custom port
compozy dev --port 3000

# Enable debug logging
compozy dev --debug

# Disable hot reload
compozy dev --no-watch

# Specify custom config
compozy dev --config ./dev-config.yaml
```

### Development Features

<FeatureCardList cols={2} size="sm">
  <FeatureCard
    title="Hot Reload"
    description="Automatically restarts when files change for faster development cycles"
    icon="RefreshCw"
  />
  <FeatureCard
    title="Debug Mode"
    description="Enhanced logging and error messages for easier troubleshooting"
    icon="Bug"
  />
  <FeatureCard
    title="Development Optimized"
    description="Faster startup and verbose error reporting for development efficiency"
    icon="Zap"
  />
  <FeatureCard
    title="File Watching"
    description="Monitors workflows, tools, and config files for automatic updates"
    icon="FileSearch"
  />
</FeatureCardList>

### Flags

<Table>
  <TableHeader>
    <TableRow>
      <TableHead>Flag</TableHead>
      <TableHead>Description</TableHead>
      <TableHead>Default</TableHead>
    </TableRow>
  </TableHeader>
  <TableBody>
    <TableRow>
      <TableCell>`--port`</TableCell>
      <TableCell>Server port</TableCell>
      <TableCell>5001</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`--host`</TableCell>
      <TableCell>Server host</TableCell>
      <TableCell>localhost</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`--debug`</TableCell>
      <TableCell>Enable debug logging</TableCell>
      <TableCell>false</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`--no-watch`</TableCell>
      <TableCell>Disable file watching</TableCell>
      <TableCell>false</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`--watch-dir`</TableCell>
      <TableCell>Additional directories to watch</TableCell>
      <TableCell>-</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`--config`</TableCell>
      <TableCell>Path to config file</TableCell>
      <TableCell>-</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`--env`</TableCell>
      <TableCell>Environment file to load</TableCell>
      <TableCell>-</TableCell>
    </TableRow>
  </TableBody>
</Table>

### File Watching

The dev server automatically watches these files:
- `compozy.yaml` - Project configuration
- `workflows/**/*.yaml` - Workflow definitions
- `tools/**/*.ts` - TypeScript tools
- `agents/**/*.yaml` - Agent configurations
- `entrypoint.ts` - Tool entrypoint

Add custom watch directories:

```bash
# Watch additional directories
compozy dev --watch-dir ./custom-tools --watch-dir ./lib

# Watch specific file patterns
compozy dev --watch-pattern "**/*.json" --watch-pattern "**/*.md"
```

## Production Server

### compozy start

Start the production server with optimized settings:

```bash
# Start production server
compozy start

# Start with custom configuration
compozy start --config /etc/compozy/prod.yaml

# Start with specific worker count
compozy start --workers 8

# Enable JSON logging for log aggregation
compozy start --log-json

# Set log level
compozy start --log-level warn
```

### Production Features

<FeatureCardList cols={2} size="sm">
  <FeatureCard
    title="Performance Optimized"
    description="Production-ready configurations for high-performance deployment"
    icon="Gauge"
  />
  <FeatureCard
    title="Security Hardened"
    description="Strict validation and security limits for production safety"
    icon="Shield"
  />
  <FeatureCard
    title="Production Logging"
    description="Structured logs optimized for monitoring and log aggregation"
    icon="FileText"
  />
  <FeatureCard
    title="Resource Management"
    description="Configurable worker pools for optimal resource utilization"
    icon="Settings"
  />
</FeatureCardList>

### Flags

<Table>
  <TableHeader>
    <TableRow>
      <TableHead>Flag</TableHead>
      <TableHead>Description</TableHead>
      <TableHead>Default/Options</TableHead>
    </TableRow>
  </TableHeader>
  <TableBody>
    <TableRow>
      <TableCell>`--port`</TableCell>
      <TableCell>Server port</TableCell>
      <TableCell>8080</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`--host`</TableCell>
      <TableCell>Server host</TableCell>
      <TableCell>0.0.0.0</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`--workers`</TableCell>
      <TableCell>Number of worker processes</TableCell>
      <TableCell>-</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`--log-level`</TableCell>
      <TableCell>Log level</TableCell>
      <TableCell>debug | info | warn | error</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`--log-json`</TableCell>
      <TableCell>Output logs in JSON format</TableCell>
      <TableCell>false</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`--config`</TableCell>
      <TableCell>Path to config file</TableCell>
      <TableCell>-</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`--env`</TableCell>
      <TableCell>Environment file to load</TableCell>
      <TableCell>-</TableCell>
    </TableRow>
  </TableBody>
</Table>

### Production Configuration

Recommended production settings:

```yaml
# prod-config.yaml
server:
  host: "0.0.0.0"
  port: 8080
  workers: 8

api:
  rate_limit: 1000
  timeout: 30s

log:
  level: "info"
  format: "json"
  output: "stdout"

security:
  cors:
    enabled: true
    origins: ["https://app.example.com"]

monitoring:
  metrics: true
  health_check: true
```

## Environment Configuration

Both commands support environment configuration:

<Tabs items={["Development", "Production"]}>
  <Tab value="Development">
    ```bash
    # .env.development
    COMPOZY_API_KEY=amp_dev_key
    COMPOZY_LOG_LEVEL=debug
    COMPOZY_DATABASE_HOST=localhost
    OPENAI_API_KEY=sk-dev-key

    # Use development environment
    compozy dev --env .env.development
    ```
  </Tab>
  <Tab value="Production">
    ```bash
    # .env.production
    COMPOZY_API_KEY=amp_prod_key
    COMPOZY_LOG_LEVEL=info
    COMPOZY_DATABASE_HOST=db.production.internal
    OPENAI_API_KEY=sk-prod-key

    # Use production environment
    compozy start --env .env.production
    ```
  </Tab>
</Tabs>

## Debugging Features

### Debug Output

When running with `--debug`, you'll see enhanced output:

```
[DEBUG] 2024-01-15 10:30:45 Server starting...
[DEBUG] 2024-01-15 10:30:45 Loading configuration from: ./compozy.yaml
[DEBUG] 2024-01-15 10:30:45 Initializing runtime: bun
[DEBUG] 2024-01-15 10:30:45 Loading workflows: 3 found
[DEBUG] 2024-01-15 10:30:45 Loading tools: 5 found
[DEBUG] 2024-01-15 10:30:45 Starting file watcher...
[INFO]  2024-01-15 10:30:46 Server started on http://localhost:8080
[DEBUG] 2024-01-15 10:30:46 Watching: workflows/, tools/, agents/, compozy.yaml
```

## Health Checks

Both servers provide health check endpoints:

```bash
# Check if server is running
curl http://localhost:8080/health

# Response
{
  "status": "healthy",
  "timestamp": "2024-01-15T10:30:45Z"
}
```

## Next Steps

<ReferenceCardList>
  <ReferenceCard
    title="Workflow Commands"
    description="Execute and manage workflows with the CLI"
    href="/docs/cli/workflow-commands"
    icon="Play"
  />
  <ReferenceCard
    title="Configuration"
    description="Configure your Compozy instance and validate settings"
    href="/docs/cli/config-commands"
    icon="Settings"
  />
  <ReferenceCard
    title="Monitoring"
    description="Monitor and debug workflows in development and production"
    href="/docs/cli/monitoring-commands"
    icon="BarChart3"
  />
</ReferenceCardList>
