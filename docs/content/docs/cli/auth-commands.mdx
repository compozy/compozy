---
title: "Authentication Commands"
description: The `compozy auth` command group provides comprehensive authentication and API key management capabilities. These commands support both interactive TUI and automation-friendly JSON output modes.
icon: Key
---

<Callout type="warning">
All auth commands require proper authentication unless you're creating your first user. Use the `--output json` flag for scripting and automation.
</Callout>

## Overview

```bash
compozy auth [command] [flags]
```

<FeatureCardList cols={2} size="sm">
  <FeatureCard
    title="API Key Management"
    description="Generate, list, and revoke API keys for secure authentication"
    icon="Key"
  />
  <FeatureCard
    title="User Administration"
    description="Create and manage user accounts with role-based access control"
    icon="Users"
  />
  <FeatureCard
    title="Interactive TUI"
    description="User-friendly text interface for simplified operations"
    icon="Terminal"
  />
  <FeatureCard
    title="Automation Ready"
    description="JSON output format for seamless CI/CD and script integration"
    icon="Bot"
  />
</FeatureCardList>

## API Key Management

### Generate API Key

Create a new API key for authenticating with the Compozy API:

```bash
# Interactive mode (TUI)
compozy auth generate

# With parameters
compozy auth generate --name "CI/CD Pipeline" --description "For automated deployments"

# With expiration date
compozy auth generate --name "Temporary Key" --expires "2024-12-31"

# JSON output for automation
compozy auth generate --name "API Integration" --output json
```

### Flags

<Table>
  <TableHeader>
    <TableRow>
      <TableHead>Flag</TableHead>
      <TableHead>Description</TableHead>
      <TableHead>Format</TableHead>
    </TableRow>
  </TableHeader>
  <TableBody>
    <TableRow>
      <TableCell>`--name`</TableCell>
      <TableCell>Name/description for the API key</TableCell>
      <TableCell>String</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`--description`</TableCell>
      <TableCell>Detailed description of the API key usage</TableCell>
      <TableCell>String</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`--expires`</TableCell>
      <TableCell>Expiration date</TableCell>
      <TableCell>YYYY-MM-DD</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`--output`</TableCell>
      <TableCell>Output format</TableCell>
      <TableCell>json | table</TableCell>
    </TableRow>
  </TableBody>
</Table>

### List API Keys

View all API keys with their status and metadata:

```bash
# List all keys (TUI)
compozy auth list

# Sort by creation date
compozy auth list --sort created

# Filter by status
compozy auth list --status active

# JSON output
compozy auth list --output json
```

### Flags

<Table>
  <TableHeader>
    <TableRow>
      <TableHead>Flag</TableHead>
      <TableHead>Description</TableHead>
      <TableHead>Options</TableHead>
    </TableRow>
  </TableHeader>
  <TableBody>
    <TableRow>
      <TableCell>`--sort`</TableCell>
      <TableCell>Sort by field</TableCell>
      <TableCell>created | name | expires</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`--status`</TableCell>
      <TableCell>Filter by status</TableCell>
      <TableCell>active | expired | revoked</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`--output`</TableCell>
      <TableCell>Output format</TableCell>
      <TableCell>json | table</TableCell>
    </TableRow>
  </TableBody>
</Table>

### Revoke API Key

Revoke an existing API key:

```bash
# Interactive selection (TUI)
compozy auth revoke

# Revoke specific key
compozy auth revoke --key "amp_1234567890"

# JSON output
compozy auth revoke --key "amp_1234567890" --output json
```

### Flags

<Table>
  <TableHeader>
    <TableRow>
      <TableHead>Flag</TableHead>
      <TableHead>Description</TableHead>
      <TableHead>Format</TableHead>
    </TableRow>
  </TableHeader>
  <TableBody>
    <TableRow>
      <TableCell>`--key`</TableCell>
      <TableCell>API key to revoke</TableCell>
      <TableCell>String</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`--output`</TableCell>
      <TableCell>Output format</TableCell>
      <TableCell>json | table</TableCell>
    </TableRow>
  </TableBody>
</Table>

## User Management

<Callout type="warning">
User management commands require admin privileges. The first user can be created without authentication to bootstrap the system.
</Callout>

### Create User

Create a new user account:

```bash
# Interactive mode (TUI)
compozy auth create-user

# With parameters
compozy auth create-user --email "user@example.com" --name "John Doe"

# With role assignment
compozy auth create-user --email "admin@example.com" --name "Admin User" --role admin

# JSON output
compozy auth create-user --email "user@example.com" --name "John Doe" --output json
```

### Flags

<Table>
  <TableHeader>
    <TableRow>
      <TableHead>Flag</TableHead>
      <TableHead>Description</TableHead>
      <TableHead>Format/Options</TableHead>
      <TableHead>Required</TableHead>
    </TableRow>
  </TableHeader>
  <TableBody>
    <TableRow>
      <TableCell>`--email`</TableCell>
      <TableCell>User's email address</TableCell>
      <TableCell>Email</TableCell>
      <TableCell>Yes</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`--name`</TableCell>
      <TableCell>User's full name</TableCell>
      <TableCell>String</TableCell>
      <TableCell>No</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`--role`</TableCell>
      <TableCell>User role</TableCell>
      <TableCell>admin | user | viewer</TableCell>
      <TableCell>No</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`--output`</TableCell>
      <TableCell>Output format</TableCell>
      <TableCell>json | table</TableCell>
      <TableCell>No</TableCell>
    </TableRow>
  </TableBody>
</Table>

### List Users

View all users in the system:

```bash
# List all users (TUI)
compozy auth list-users

# Filter by role
compozy auth list-users --role admin

# Sort by creation date
compozy auth list-users --sort created

# JSON output
compozy auth list-users --output json
```

### Flags

<Table>
  <TableHeader>
    <TableRow>
      <TableHead>Flag</TableHead>
      <TableHead>Description</TableHead>
      <TableHead>Options</TableHead>
    </TableRow>
  </TableHeader>
  <TableBody>
    <TableRow>
      <TableCell>`--role`</TableCell>
      <TableCell>Filter by role</TableCell>
      <TableCell>admin | user | viewer</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`--sort`</TableCell>
      <TableCell>Sort by field</TableCell>
      <TableCell>created | email | name</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`--output`</TableCell>
      <TableCell>Output format</TableCell>
      <TableCell>json | table</TableCell>
    </TableRow>
  </TableBody>
</Table>

### Update User

Update user information:

```bash
# Interactive mode (TUI)
compozy auth update-user

# Update specific user
compozy auth update-user --email "user@example.com" --name "Jane Doe"

# Change user role
compozy auth update-user --email "user@example.com" --role admin

# JSON output
compozy auth update-user --email "user@example.com" --role admin --output json
```

### Flags

<Table>
  <TableHeader>
    <TableRow>
      <TableHead>Flag</TableHead>
      <TableHead>Description</TableHead>
      <TableHead>Format/Options</TableHead>
      <TableHead>Required</TableHead>
    </TableRow>
  </TableHeader>
  <TableBody>
    <TableRow>
      <TableCell>`--email`</TableCell>
      <TableCell>User's email address (to identify user)</TableCell>
      <TableCell>Email</TableCell>
      <TableCell>Yes</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`--name`</TableCell>
      <TableCell>New name for the user</TableCell>
      <TableCell>String</TableCell>
      <TableCell>No</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`--role`</TableCell>
      <TableCell>New role for the user</TableCell>
      <TableCell>admin | user | viewer</TableCell>
      <TableCell>No</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`--output`</TableCell>
      <TableCell>Output format</TableCell>
      <TableCell>json | table</TableCell>
      <TableCell>No</TableCell>
    </TableRow>
  </TableBody>
</Table>

### Delete User

Remove a user from the system:

```bash
# Interactive selection (TUI)
compozy auth delete-user

# Delete specific user
compozy auth delete-user --email "user@example.com"

# Force deletion without confirmation
compozy auth delete-user --email "user@example.com" --force

# JSON output
compozy auth delete-user --email "user@example.com" --output json
```

### Flags

<Table>
  <TableHeader>
    <TableRow>
      <TableHead>Flag</TableHead>
      <TableHead>Description</TableHead>
      <TableHead>Format/Options</TableHead>
    </TableRow>
  </TableHeader>
  <TableBody>
    <TableRow>
      <TableCell>`--email`</TableCell>
      <TableCell>Email of user to delete</TableCell>
      <TableCell>Email</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`--force`</TableCell>
      <TableCell>Skip confirmation prompt</TableCell>
      <TableCell>Boolean</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`--output`</TableCell>
      <TableCell>Output format</TableCell>
      <TableCell>json | table</TableCell>
    </TableRow>
  </TableBody>
</Table>

## Authentication Flow

### Initial Setup

When setting up Compozy for the first time:

<Steps numbered>
  <Step
    title="Create the first admin user"
    description="Bootstrap the system with an initial administrator account"
  >
    ```bash
    compozy auth create-user --email "admin@company.com" --name "Admin" --role admin
    ```
  </Step>
  <Step
    title="Generate an API key"
    description="Create an authentication key for API access"
  >
    ```bash
    compozy auth generate --name "Admin API Key"
    ```
  </Step>
  <Step
    title="Set the API key in your environment"
    description="Configure the key for automatic authentication"
  >
    ```bash
    export COMPOZY_API_KEY="amp_your_key_here"
    ```
  </Step>
</Steps>

### Using API Keys

API keys can be provided in multiple ways:

<Tabs items={["Environment Variable", "Command Flag", "Config File"]}>
  <Tab value="Environment Variable">
    ```bash
    export COMPOZY_API_KEY="amp_1234567890"
    compozy workflow list
    ```
  </Tab>
  <Tab value="Command Flag">
    ```bash
    compozy workflow list --api-key "amp_1234567890"
    ```
  </Tab>
  <Tab value="Config File">
    ```yaml
    # ~/.compozy/config.yaml
    api_key: "amp_1234567890"
    ```
  </Tab>
</Tabs>

## Best Practices

<List>
  <ListItem title="Key Rotation" icon="RotateCcw">
    Regularly rotate API keys for security. Set expiration dates and create new keys before old ones expire.
  </ListItem>
  <ListItem title="Descriptive Names" icon="Tag">
    Use clear, descriptive names for API keys to identify their purpose and usage.
  </ListItem>
  <ListItem title="Role-Based Access" icon="Shield">
    Assign appropriate roles to users based on their responsibilities. Use viewer role for read-only access.
  </ListItem>
  <ListItem title="Audit Trail" icon="FileSearch">
    The auth system maintains an audit trail of all key usage. Use `compozy auth list` to review key activity.
  </ListItem>
  <ListItem title="Secure Storage" icon="Lock">
    Never commit API keys to version control. Use environment variables or secure secret management systems.
  </ListItem>
</List>

## Next Steps

<ReferenceCardList>
  <ReferenceCard
    title="Configuration Commands"
    description="Manage global settings and project configuration"
    href="/docs/cli/config-commands"
    icon="Settings"
  />
  <ReferenceCard
    title="Workflow Commands"
    description="Execute, deploy, and monitor AI workflows"
    href="/docs/cli/workflow-commands"
    icon="Workflow"
  />
  <ReferenceCard
    title="Project Commands"
    description="Initialize and manage Compozy projects"
    href="/docs/cli/project-commands"
    icon="FolderOpen"
  />
  <ReferenceCard
    title="Security Guide"
    description="Best practices for secure authentication and key management"
    href="/docs/core/security/authentication"
    icon="ShieldCheck"
  />
</ReferenceCardList>
