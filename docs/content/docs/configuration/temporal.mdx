---
title: "Temporal Configuration"
description: "Reference for configuring Temporal connectivity in Compozy."
icon: Settings
---

<Callout type="info">
`temporal.mode` accepts `memory`, `persistent`, or `distributed`. Memory and persistent launch the embedded Temporal server (`temporal.standalone` block), while distributed connects to an external cluster. The legacy value `remote` is still accepted and normalized to `distributed`.
</Callout>

## Configuration Structure

```yaml title="compozy.yaml"
temporal:
  mode: memory | persistent | distributed
  host_port: localhost:7233
  namespace: default
  task_queue: compozy-tasks
  standalone: # Embedded server options for memory/persistent modes
    database_file: :memory:
    frontend_port: 7233
    bind_ip: 127.0.0.1
    namespace: default
    cluster_name: compozy-standalone
    enable_ui: true
    ui_port: 8233
    log_level: warn
    start_timeout: 30s
```

## Mode Selection

<Table>
  <TableHeader>
    <TableRow>
      <TableHead>Field</TableHead>
      <TableHead>Description</TableHead>
      <TableHead>Default</TableHead>
    </TableRow>
  </TableHeader>
  <TableBody>
    <TableRow>
      <TableCell>`mode`</TableCell>
      <TableCell>
        Chooses deployment strategy. Accepted values:
        `memory` (embed Temporal in-memory),
        `persistent` (embed Temporal with file-backed storage),
        `distributed` (connect to an external cluster). The alias `remote` maps to `distributed`.
      </TableCell>
      <TableCell>`memory` (via global defaults)</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`host_port`</TableCell>
      <TableCell>Temporal endpoint in `host:port` format. For embedded modes this value is derived from `bind_ip` and `frontend_port`.</TableCell>
      <TableCell>`localhost:7233`</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`namespace`</TableCell>
      <TableCell>Default Temporal namespace for workflows. Create unique namespaces per environment.</TableCell>
      <TableCell>`default`</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`task_queue`</TableCell>
      <TableCell>Primary task queue polled by Compozy workers.</TableCell>
      <TableCell>`compozy-tasks`</TableCell>
    </TableRow>
  </TableBody>
</Table>

<Callout type="warning">
When `mode` resolves to memory or persistent, the runtime rewrites `host_port` to `<bind_ip>:<frontend_port>`. Update external workers accordingly if you expose the embedded server beyond localhost.
</Callout>

## Embedded Options (`temporal.standalone`)

<Table>
  <TableHeader>
    <TableRow>
      <TableHead>Field</TableHead>
      <TableHead>Description</TableHead>
      <TableHead>Default</TableHead>
    </TableRow>
  </TableHeader>
  <TableBody>
    <TableRow>
      <TableCell>`database_file`</TableCell>
      <TableCell>SQLite path. Use `:memory:` for ephemeral runs or provide a file path for persistence.</TableCell>
      <TableCell>`:memory:`</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`frontend_port`</TableCell>
      <TableCell>Anchors the Temporal service port block (frontend + history + matching + worker).</TableCell>
      <TableCell>`7233`</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`bind_ip`</TableCell>
      <TableCell>Interface to bind Temporal services. Keep `127.0.0.1` for safe development defaults.</TableCell>
      <TableCell>`127.0.0.1`</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`namespace`</TableCell>
      <TableCell>Namespace created automatically when the embedded server starts.</TableCell>
      <TableCell>`default`</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`cluster_name`</TableCell>
      <TableCell>Cluster identifier used in logs and metrics.</TableCell>
      <TableCell>`compozy-standalone`</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`enable_ui`</TableCell>
      <TableCell>Toggle the Temporal Web UI bundled with embedded modes.</TableCell>
      <TableCell>`true`</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`ui_port`</TableCell>
      <TableCell>HTTP port for the Temporal Web UI.</TableCell>
      <TableCell>`8233`</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`log_level`</TableCell>
      <TableCell>Temporal server log level (`debug`, `info`, `warn`, `error`).</TableCell>
      <TableCell>`warn`</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`start_timeout`</TableCell>
      <TableCell>Maximum time to wait for Temporal startup before failing (`time.Duration` format).</TableCell>
      <TableCell>`30s`</TableCell>
    </TableRow>
  </TableBody>
</Table>

## Environment Variables & CLI Flags

<Table>
  <TableHeader>
    <TableRow>
      <TableHead>Path</TableHead>
      <TableHead>Environment</TableHead>
      <TableHead>CLI Flag</TableHead>
    </TableRow>
  </TableHeader>
  <TableBody>
    <TableRow>
      <TableCell>`temporal.mode`</TableCell>
      <TableCell>`TEMPORAL_MODE`</TableCell>
      <TableCell>`--temporal-mode`</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`temporal.host_port`</TableCell>
      <TableCell>`TEMPORAL_HOST_PORT`</TableCell>
      <TableCell>`--temporal-host`</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`temporal.namespace`</TableCell>
      <TableCell>`TEMPORAL_NAMESPACE`</TableCell>
      <TableCell>`--temporal-namespace`</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`temporal.task_queue`</TableCell>
      <TableCell>`TEMPORAL_TASK_QUEUE`</TableCell>
      <TableCell>`--temporal-task-queue`</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`temporal.standalone.database_file`</TableCell>
      <TableCell>`TEMPORAL_EMBEDDED_DATABASE_FILE`</TableCell>
      <TableCell>`--temporal-standalone-database`</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`temporal.standalone.frontend_port`</TableCell>
      <TableCell>`TEMPORAL_EMBEDDED_FRONTEND_PORT`</TableCell>
      <TableCell>`--temporal-standalone-frontend-port`</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`temporal.standalone.bind_ip`</TableCell>
      <TableCell>`TEMPORAL_EMBEDDED_BIND_IP`</TableCell>
      <TableCell>-</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`temporal.standalone.namespace`</TableCell>
      <TableCell>`TEMPORAL_EMBEDDED_NAMESPACE`</TableCell>
      <TableCell>-</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`temporal.standalone.cluster_name`</TableCell>
      <TableCell>`TEMPORAL_EMBEDDED_CLUSTER_NAME`</TableCell>
      <TableCell>-</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`temporal.standalone.enable_ui`</TableCell>
      <TableCell>`TEMPORAL_EMBEDDED_ENABLE_UI`</TableCell>
      <TableCell>-</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`temporal.standalone.ui_port`</TableCell>
      <TableCell>`TEMPORAL_EMBEDDED_UI_PORT`</TableCell>
      <TableCell>`--temporal-standalone-ui-port`</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`temporal.standalone.log_level`</TableCell>
      <TableCell>`TEMPORAL_EMBEDDED_LOG_LEVEL`</TableCell>
      <TableCell>-</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>`temporal.standalone.start_timeout`</TableCell>
      <TableCell>`TEMPORAL_EMBEDDED_START_TIMEOUT`</TableCell>
      <TableCell>-</TableCell>
    </TableRow>
  </TableBody>
</Table>

## Validation Rules

<List>
  <ListItem title="Mode enum" icon="CheckCircle">
    `temporal.mode` accepts `memory`, `persistent`, `distributed`, or legacy `remote` (normalized to `distributed`).
  </ListItem>
  <ListItem title="Port ranges" icon="Gauge">
    `frontend_port` and `ui_port` must be between 1 and 65535. `frontend_port` reserves a block of four contiguous ports.
  </ListItem>
  <ListItem title="IP address validation" icon="Shield">
    `bind_ip` must be a valid IP string. IPv4 loopback is recommended for development.
  </ListItem>
  <ListItem title="Log level enum" icon="ListChecks">
    `log_level` accepts `debug`, `info`, `warn`, or `error`.
  </ListItem>
  <ListItem title="Start timeout" icon="Timer">
    `start_timeout` must be positive. Increase it if your machine boots Temporal slower than 30 seconds.
  </ListItem>
</List>

## Usage Patterns

<Tabs items={["Distributed", "Memory", "Persistent"]}>
  <Tab>

  ```bash title="Distributed deployment"
  export TEMPORAL_MODE=distributed
  export TEMPORAL_HOST_PORT=temporal.prod.internal:7233
  compozy start --temporal-namespace=compozy-prod
  ```

  </Tab>
  <Tab>

  ```bash title="Memory mode development"
  export TEMPORAL_MODE=memory
  export TEMPORAL_EMBEDDED_DATABASE_FILE=:memory:
  compozy start --temporal-standalone-frontend-port=9733 --temporal-standalone-ui-port=9833
  ```

  </Tab>
  <Tab>

  ```bash title="Persistent local workflow lab"
  export TEMPORAL_MODE=persistent
  export TEMPORAL_EMBEDDED_DATABASE_FILE=./.compozy/temporal.db
  compozy start --temporal-standalone-frontend-port=9733 --temporal-standalone-ui-port=9833
  ```

  </Tab>
</Tabs>

## Related Documentation

<ReferenceCardList cols={2}>
  <ReferenceCard
    title="Temporal Modes"
    description="Compare memory, persistent, and distributed deployments"
    href="/docs/deployment/temporal-modes"
    icon="GitBranch"
  />
  <ReferenceCard
    title="Embedded Temporal"
    description="Understand how the embedded server is composed"
    href="/docs/architecture/embedded-temporal"
    icon="Layers"
  />
  <ReferenceCard
    title="Temporal Troubleshooting"
    description="Fix port conflicts, SQLite issues, and UI errors"
    href="/docs/troubleshooting/temporal"
    icon="LifeBuoy"
  />
  <ReferenceCard
    title="compozy start CLI"
    description="Flags and examples for runtime configuration"
    href="/docs/cli/compozy-start"
    icon="Terminal"
  />
</ReferenceCardList>
