basePath: /api/v0

definitions:
  agent.ActionConfig:
    properties:
      cwd:
        $ref: '#/definitions/core.PathCWD'
      id:
        description: |-
          Unique identifier for the action within the agent's scope.
          Used to invoke specific actions programmatically.

          - **Examples:** `"analyze-code"`, `"generate-summary"`, `"validate-data"`
        type: string
      input:
        allOf:
          - $ref: '#/definitions/schema.Schema'
        description: |-
          JSON Schema defining the expected input parameters for this action.
          Enables validation and type checking of inputs before execution.

          If `nil`, the action accepts any input format without validation.

          **Schema format:** JSON Schema Draft 7
      json_mode:
        description: |-
          Forces JSON-formatted output for this specific action.
          When `true`, the agent must return valid JSON that conforms to the output schema.

          **Note:** If an `OutputSchema` is defined, JSON mode is automatically enabled.

          ⚠️ **Trade-off:** Enabling JSON mode may limit the agent's ability to provide
          explanatory text or reasoning alongside the structured output.
        type: boolean
      output:
        allOf:
          - $ref: '#/definitions/schema.Schema'
        description: |-
          JSON Schema defining the expected output format from this action.
          Used for validating agent responses and ensuring consistent output structure.

          If `nil`, no output validation is performed.

          **Schema format:** JSON Schema Draft 7
      prompt:
        description: |-
          Detailed instructions for the agent when executing this action.
          Should clearly define the expected behavior, output format, and any constraints.

          **Best practices:**
          - Be specific about the desired outcome
          - Include examples if complex formatting is required
          - Define clear success criteria
          - Specify any limitations or boundaries
        type: string
      with:
        allOf:
          - $ref: '#/definitions/core.Input'
        description: |-
          Default parameters to provide to the action.
          These are merged with runtime parameters, with runtime values taking precedence.

          **Use cases:**
          - Setting default configuration options
          - Providing constant context values
          - Pre-filling common parameters
    required:
      - prompt
    type: object
  agent.Config:
    properties:
      actions:
        description: |-
          Structured actions the agent can perform with defined input/output schemas.
          Actions provide type-safe interfaces for specific agent capabilities.

          **Example:**
          ```yaml
          actions:
            - id: "review-code"
              prompt: |
                Analyze code {{.input.code}} for quality and improvements
              json_mode: true
              input:
                type: "object"
                properties:
                  code:
                    type: "string"
                    description: "The code to review"
              output:
                type: "object"
                properties:
                  quality:
                    type: "string"
                    description: "The quality of the code"
          ```

          $ref: inline:#action-configuration
        items:
          $ref: '#/definitions/agent.ActionConfig'
        type: array
      config:
        allOf:
          - $ref: '#/definitions/core.ProviderConfig'
        description: |-
          LLM provider configuration defining which AI model to use and its parameters.
          Supports multiple providers including OpenAI, Anthropic, Google, Groq, and local models.

          **Required fields:** provider, model
          **Optional fields:** api_key, api_url, params (temperature, max_tokens, etc.)
      cwd:
        $ref: '#/definitions/core.PathCWD'
      env:
        allOf:
          - $ref: '#/definitions/core.EnvMap'
        description: |-
          Environment variables available during agent execution.
          Used for configuration, secrets, and runtime settings.

          **Example:**
          ```yaml
          env:
            API_KEY: "{{.env.OPENAI_API_KEY}}"
            DEBUG_MODE: "true"
          ```
      id:
        description: |-
          Unique identifier for the agent within the project scope.
          Used for referencing the agent in workflows and other configurations.

          - **Examples:** `"code-assistant"`, `"data-analyst"`, `"customer-support"`
        type: string
      instructions:
        description: |-
          System instructions that define the agent's personality, behavior, and constraints.
          These instructions guide how the agent interprets tasks and generates responses.

          **Best practices:**
          - Be clear and specific about the agent's role
          - Define boundaries and ethical guidelines
          - Include domain-specific knowledge or constraints
          - Use markdown formatting for better structure
        type: string
      json_mode:
        description: |-
          Forces the agent to always respond in valid JSON format.
          When enabled, the agent's responses must be parseable JSON objects.

          **Use cases:**
          - API integrations requiring structured data
          - Automated processing of agent outputs
          - Ensuring consistent response formats

          ⚠️ **Note:** May limit the agent's ability to provide explanatory text
        type: boolean
      max_iterations:
        description: |-
          Maximum number of reasoning iterations the agent can perform.
          The agent may self-correct and refine its response across multiple iterations
          to improve accuracy and address complex multi-step problems.

          **Default:** `5` iterations

          **Trade-offs:**
          - Higher values enable more thorough problem-solving and self-correction
          - Each iteration consumes additional tokens and increases response latency
          - Configure based on task complexity, accuracy requirements, and cost constraints
        type: integer
      mcps:
        description: |-
          Model Context Protocol (MCP) server configurations.
          MCPs provide standardized interfaces for extending agent capabilities
          with external services and data sources through protocol-based communication.

          **Common MCP integrations:**
          - Database connectors (PostgreSQL, Redis, MongoDB)
          - Search engines (Elasticsearch, Solr)
          - Knowledge bases (vector databases, documentation systems)
          - External APIs (REST, GraphQL, gRPC services)

          MCPs support both stdio and HTTP transport protocols.
        items:
          $ref: '#/definitions/mcp.Config'
        type: array
      memory:
        description: |-
          Memory references enabling the agent to access persistent context.
          Memory provides stateful interactions across workflow steps and sessions.

          **Configuration format:**
          ```yaml
          memory:
            - id: "user_context"  # Memory resource ID
              key: "user:{{.user_id}}"  # Dynamic key with template
              mode: "read-write"  # Access mode (default: "read-write")
          ```

          **Access modes:**
          - `"read-write"`: Full access to read and modify memory
          - `"read-only"`: Can only read existing memory entries
        items:
          $ref: '#/definitions/core.MemoryReference'
        type: array
      resource:
        description: |-
          Resource identifier for the autoloader system (must be `"agent"`).
          This field enables automatic discovery and registration of agent configurations.
        type: string
      tools:
        description: |-
          Tools available to the agent for extending its capabilities.
          When tools are defined, the agent automatically has `toolChoice` set to `"auto"`,
          enabling autonomous tool selection and invocation during task execution.

          **Tool types supported:**
          - File system operations (read, write, list)
          - API integrations (HTTP requests, webhooks)
          - Data processing utilities (parsing, transformation)
          - Custom business logic (TypeScript/JavaScript execution)

          Tools are referenced by ID and can be shared across multiple agents.
        items:
          $ref: '#/definitions/tool.Config'
        type: array
      with:
        allOf:
          - $ref: '#/definitions/core.Input'
        description: |-
          Default input parameters passed to the agent on every invocation.
          These values are merged with runtime inputs, with runtime values taking precedence.

          **Use cases:**
          - Setting default configuration values
          - Providing constant context or settings
          - Injecting workflow-level parameters
    required:
      - config
      - id
      - instructions
    type: object
  core.Author:
    properties:
      contributors:
        description: |-
          Additional contributors who helped develop the project.

          Use this to acknowledge team members, collaborators, or external contributors.
        items:
          $ref: '#/definitions/core.Contributor'
        type: array
      email:
        description: |-
          Email contact for project-related communication.

          Use team emails for shared ownership: `"ai-team@company.com"`
        type: string
      name:
        description: |-
          Name of the author or team responsible for the project.

          Examples: `"Jane Smith"`, `"AI Platform Team"`, `"Data Science Division"`
        type: string
      organization:
        description: |-
          Organization or company affiliation.

          Examples: `"ACME Corporation"`, `"AI Research Lab"`, `"Engineering Division"`
        type: string
      url:
        description: |-
          URL to author's profile, repository, or team page.

          Examples: `"https://github.com/username"`, `"https://company.com/team/ai"`
        type: string
    type: object
  core.ComponentType:
    enum:
      - workflow
      - task
      - agent
      - tool
      - log
    type: string
    x-enum-varnames:
      - ComponentWorkflow
      - ComponentTask
      - ComponentAgent
      - ComponentTool
      - ComponentLog
  core.Contributor:
    properties:
      email:
        description: Email address for contributor contact.
        type: string
      name:
        description: Full name of the contributor.
        type: string
      organization:
        description: Organization or team the contributor belongs to.
        type: string
      url:
        description: |-
          URL to contributor's profile or portfolio.

          Examples: `"https://github.com/username"`, `"https://linkedin.com/in/name"`
        type: string
    type: object
  core.EnvMap:
    additionalProperties:
      type: string
    type: object
  core.Error:
    properties:
      code:
        type: string
      details:
        additionalProperties: {}
        type: object
      message:
        type: string
    type: object
  core.ErrorTransition:
    properties:
      next:
        description: |-
          ID of the error handler task

          - **Example**: "handle-error", "retry-with-fallback"
        type: string
      with:
        allOf:
          - $ref: '#/definitions/core.Input'
        description: |-
          Error context passed to the handler
          Includes error details: { "error": "{{ .error }}", "attempt": "{{ .retryCount }}" }
    type: object
  core.Input:
    additionalProperties: {}
    type: object
  core.MemoryReference:
    properties:
      id:
        type: string
      key:
        description: |-
          Key is a template string that resolves to the actual memory instance key.
          e.g., "support-{{ .workflow.input.conversationId }}"
        type: string
      mode:
        description: Mode defines access permissions (e.g., "read-write", "read-only").
        enum:
          - read-write
          - read-only
        type: string
    required:
      - id
      - key
    type: object
  core.Output:
    additionalProperties: {}
    type: object
  core.PathCWD:
    properties:
      path:
        description: Path holds the absolute working directory.
        type: string
    type: object
  core.PromptParams:
    properties:
      max_length:
        description: |-
          MaxLength provides an alternative way to specify maximum response length.
          Typically used by providers that distinguish between length and token limits.
          - **Range**: MinLength to provider-specific maximum
          - **Provider Support**: Primarily local models and some API providers
        type: integer
      max_tokens:
        description: |-
          MaxTokens limits the maximum number of tokens in the generated response.
          This parameter is crucial for cost control and response time management.
          - **Range**: 1 to model-specific maximum (e.g., 8192 for GPT-4)
          - **Default**: Provider-specific default (typically 1000-2000)
        type: integer
      min_length:
        description: |-
          MinLength specifies the minimum number of tokens that must be generated.
          Prevents the model from generating responses that are too short.
          - **Range**: 1 to MaxTokens
          - **Provider Support**: Limited; primarily local models
        type: integer
      repetition_penalty:
        description: |-
          RepetitionPenalty reduces the likelihood of repeating the same tokens.
          Values > 1.0 penalize repetition, values < 1.0 encourage it.
          - **Range**: 0.1 to 2.0
          - **Recommended**: 1.0 (no penalty) to 1.2 (moderate penalty)
          - **Provider Support**: Primarily local models (Ollama, etc.)
        type: number
      seed:
        description: |-
          Seed provides a random seed for reproducible outputs.
          When set, the same input with the same parameters will generate identical responses.
          - **Use Cases**: Testing, debugging, demonstration, A/B testing
          > **Note:**: Not all providers support seeding; OpenAI and some others do
        type: integer
      stop_words:
        description: |-
          StopWords defines a list of strings that will halt text generation when encountered.
          Useful for creating structured outputs or preventing unwanted content patterns.

          - **Example**: `["END", "STOP", "\n\n---"]` for section-based content
          > **Note:**: Not all providers support stop words; check provider documentation
        items:
          type: string
        type: array
      temperature:
        description: |-
          Temperature controls the randomness of the generated text.
          Lower values produce more deterministic, focused responses.
          Higher values increase creativity and variation but may reduce coherence.
          - **Range**: 0.0 (deterministic) to 1.0 (maximum randomness)
          - **Recommended**: 0.1-0.3 for factual tasks, 0.7-0.9 for creative tasks
        type: number
      top_k:
        description: |-
          TopK limits the number of highest probability tokens considered during sampling.
          Lower values focus on the most likely tokens, higher values allow more variety.
          - **Range**: 1 to vocabulary size (typically 1-100)
          - **Provider Support**: Primarily Google models and some local models
        type: integer
      top_p:
        description: |-
          TopP (nucleus sampling) considers only tokens with cumulative probability up to this value.
          Dynamically adjusts the vocabulary size based on probability distribution.
          - **Range**: 0.0 to 1.0
          - **Recommended**: 0.9 for balanced outputs, 0.95 for more variety
        type: number
    type: object
  core.ProviderConfig:
    properties:
      api_key:
        description: |-
          APIKey contains the authentication key for the AI provider.

          - **Security**: Use template references to environment variables.
          - **Examples**: `"{{ .env.OPENAI_API_KEY }}"`, `"{{ .secrets.ANTHROPIC_KEY }}"`
          > **Note:**: Required for most cloud providers, optional for local providers
        type: string
      api_url:
        description: |-
          APIURL specifies a custom API endpoint for the provider.
          **Use Cases**:
            - Local model hosting (Ollama, OpenAI-compatible servers)
            - Enterprise API gateways
            - Regional API endpoints
            - Custom proxy servers

          **Examples**: `"http://localhost:11434"`, `"https://api.openai.com/v1"`
        type: string
      model:
        description: |-
          Model defines the specific model identifier to use with the provider.
          Model names are provider-specific and determine capabilities and pricing.

          - **Examples**:
            - OpenAI: `"gpt-4-turbo"`, `"gpt-3.5-turbo"`
            - Anthropic: `"claude-3-opus-20240229"`, `"claude-3-haiku-20240307"`
            - Google: `"gemini-pro"`, `"gemini-pro-vision"`
            - Ollama: `"llama2:13b"`, `"mistral:7b"`
        type: string
      organization:
        description: |-
          Organization specifies the organization ID for providers that support it.
          - **Primary Use**: OpenAI organization management for billing and access control

          - **Example**: `"org-123456789abcdef"`
          > **Note:**: Optional for most providers
        type: string
      params:
        allOf:
          - $ref: '#/definitions/core.PromptParams'
        description: |-
          Params contains the generation parameters that control LLM behavior.
          These parameters are applied to all requests using this provider configuration.
          Can be overridden at the task or action level for specific requirements.
      provider:
        allOf:
          - $ref: '#/definitions/core.ProviderName'
        description: |-
          Provider specifies which AI service to use for LLM operations.
          Must match one of the supported ProviderName constants.

          - **Examples**: `"openai"`, `"anthropic"`, `"google"`, `"ollama"`
    type: object
  core.ProviderName:
    enum:
      - openai
      - groq
      - anthropic
      - google
      - ollama
      - deepseek
      - xai
      - mock
    type: string
    x-enum-comments:
      ProviderAnthropic: Anthropic Claude models
      ProviderDeepSeek: DeepSeek AI models
      ProviderGoogle: Google Gemini models
      ProviderGroq: Groq fast inference platform
      ProviderMock: Mock provider for testing
      ProviderOllama: Ollama local model hosting
      ProviderOpenAI: OpenAI GPT models (GPT-4, GPT-3.5, etc.)
      ProviderXAI: xAI Grok models
    x-enum-varnames:
      - ProviderOpenAI
      - ProviderGroq
      - ProviderAnthropic
      - ProviderGoogle
      - ProviderOllama
      - ProviderDeepSeek
      - ProviderXAI
      - ProviderMock
  core.RetryPolicyConfig:
    properties:
      backoff_coefficient:
        description: |-
          Multiplier for exponential backoff
          - **Default:** `2.0` (doubles each time)
          - **Example:** `1.5`, `2.0`, `3.0`
        type: number
      initial_interval:
        description: |-
          Initial delay before first retry
          - **Default:** `"1s"`
          - **Example:** `"500ms"`, `"2s"`, `"1m"`
        type: string
      maximum_attempts:
        description: |-
          Maximum retry attempts
          - **Default:** `3`
          - **Example:** `5` for critical operations
        type: integer
      maximum_interval:
        description: |-
          Maximum delay between retries
          - **Default:** `"1m"`
          - **Example:** `"30s"`, `"5m"`, `"1h"`
        type: string
      non_retryable_error_types:
        description: |-
          Error types that should not trigger retries
          - **Example:** `["ValidationError", "AuthenticationError"]`
        items:
          type: string
        type: array
    type: object
  core.StatusType:
    enum:
      - PENDING
      - RUNNING
      - SUCCESS
      - FAILED
      - TIMED_OUT
      - CANCELED
      - WAITING
      - PAUSED
    type: string
    x-enum-varnames:
      - StatusPending
      - StatusRunning
      - StatusSuccess
      - StatusFailed
      - StatusTimedOut
      - StatusCanceled
      - StatusWaiting
      - StatusPaused
  gin.H:
    additionalProperties: {}
    type: object
  mcp.Config:
    properties:
      command:
        description: |-
          Command is the **executable command** to spawn a local MCP server process.

          Used for stdio transport to run MCP servers as child processes.
          Supports both direct executables and complex commands with arguments.

          - **Examples**:
          ```yaml
          # Simple executable
          command: "mcp-server-filesystem"

          # Command with arguments
          command: "python /app/mcp_server.py --mode production"

          # Docker container
          command: "docker run --rm -i mcp/postgres:latest"
          ```

          **Security Note**: Commands are parsed using shell lexing for safety.
          Avoid user-provided input in commands.
        type: string
      env:
        additionalProperties:
          type: string
        description: |-
          Env contains **environment variables** to pass to the MCP server process.

          Only used when `command` is specified for spawning local processes.
          Useful for passing configuration, secrets, or runtime parameters.

          - **Examples**:
          ```yaml
          env:
            DATABASE_URL: "postgres://user:pass@localhost/db"
            API_KEY: "{{ .env.GITHUB_TOKEN }}"
            LOG_LEVEL: "debug"
            WORKSPACE_DIR: "/data/workspace"
          ```

          **Template Support**: Values can use Go template syntax to reference
          environment variables from the host system.
        type: object
      id:
        description: |-
          ID is the **unique identifier** for this MCP server configuration.

          This identifier is used throughout the system to reference this specific MCP server.
          Choose descriptive IDs that reflect the server's purpose.

          - **Examples**:
          - `filesystem` - for file system operations
          - `postgres-db` - for PostgreSQL database access
          - `github-api` - for GitHub integration
          - `python-runtime` - for Python code execution
        type: string
      max_sessions:
        description: |-
          MaxSessions defines the **maximum number of concurrent sessions** allowed.

          Helps manage resource usage and prevent server overload.
          Each agent connection typically creates one session.

          **Values**:
          - `0` or negative: Unlimited sessions (default)
          - Positive number: Maximum concurrent sessions

          - **Examples**:
          ```yaml
          max_sessions: 10  # Allow up to 10 concurrent connections
          max_sessions: 1  # Single session only (useful for stateful servers)
          max_sessions: 0  # Unlimited sessions
          ```
        type: integer
      proto:
        description: |-
          Proto specifies the **MCP protocol version** to use.

          Different protocol versions may support different features, message formats,
          or capabilities. Always use the version compatible with your MCP server.

          **Format**: `YYYY-MM-DD` (e.g., "2025-03-26")

          **Default**: `DefaultProtocolVersion` ("2025-03-26")

          **Version History**:
          - `2025-03-26` - Latest version with streaming support
          - `2024-12-01` - Initial protocol release
        type: string
      resource:
        description: |-
          Resource reference for the MCP server (optional)

          If not specified, defaults to the value of ID.
          Used for resource identification and referencing in Compozy's resource system.
        type: string
      start_timeout:
        allOf:
          - $ref: '#/definitions/time.Duration'
        description: |-
          StartTimeout is the **maximum time to wait** for the MCP server to start.

          Only applicable when using `command` to spawn local processes.
          Helps detect and handle startup failures gracefully.

          **Format**: Go duration string (e.g., "30s", "1m", "500ms")

          **Default**: No timeout (waits indefinitely)

          - **Examples**:
          ```yaml
          start_timeout: 30s  # Wait up to 30 seconds
          start_timeout: 2m  # Wait up to 2 minutes
          start_timeout: 500ms  # Wait up to 500 milliseconds
          ```

          **Recommendation**: Set to at least 10-30s for Docker-based servers.
      transport:
        allOf:
          - $ref: '#/definitions/mcpproxy.TransportType'
        description: |-
          Transport defines the **communication transport mechanism**.

          Choose the transport based on your MCP server's capabilities and deployment model.

          **Supported Values**:

          | Transport | Description | Use Case |
          |-----------|-------------|----------|
          | `sse` | Server-Sent Events | HTTP servers with real-time streaming |
          | `streamable-http` | HTTP with streaming | Large responses, file transfers |
          | `stdio` | Standard I/O | Local processes, Docker containers |

          **Default**: `sse`

          - **Examples**:
          ```yaml
          # Remote server with SSE
          transport: sse

          # Local process with stdio
          transport: stdio

          # HTTP server with large file support
          transport: streamable-http
          ```
      url:
        description: |-
          URL is the **endpoint for remote MCP servers**.

          Required for HTTP-based transports (SSE, streamable-http).
          Must be a valid HTTP or HTTPS URL pointing to an MCP-compatible endpoint.

          **Format**: `http[s]://host[:port]/path`

          - **Examples**:
          ```yaml
          url: "http://localhost:3000/mcp"
          url: "https://api.example.com/v1/mcp"
          url: "http://mcp-proxy:6001/filesystem"
          ```

          **Note**: Mutually exclusive with `command` - use either URL or Command, not both.
        type: string
    type: object
  mcpproxy.CallToolRequest:
    properties:
      arguments:
        additionalProperties: {}
        type: object
      mcpName:
        type: string
      toolName:
        type: string
    type: object
  mcpproxy.ConnectionStatus:
    enum:
      - disconnected
      - connecting
      - connected
      - error
    type: string
    x-enum-varnames:
      - StatusDisconnected
      - StatusConnecting
      - StatusConnected
      - StatusError
  mcpproxy.ListMCPsResponse:
    properties:
      count:
        type: integer
      mcps:
        items:
          $ref: '#/definitions/mcpproxy.MCPDetailsResponse'
        type: array
    type: object
  mcpproxy.MCPDefinition:
    properties:
      allowedIPs:
        items:
          type: string
        type: array
      args:
        items:
          type: string
        type: array
      authTokens:
        description: Security and access control
        items:
          type: string
        type: array
      autoReconnect:
        description: Behavior configuration
        type: boolean
      command:
        description: Stdio transport configuration
        type: string
      createdAt:
        type: string
      description:
        type: string
      env:
        additionalProperties:
          type: string
        type: object
      headers:
        additionalProperties:
          type: string
        type: object
      healthCheckEnabled:
        type: boolean
      healthCheckInterval:
        $ref: '#/definitions/time.Duration'
      logEnabled:
        type: boolean
      maxReconnects:
        type: integer
      name:
        description: Core identification
        minLength: 1
        type: string
      reconnectDelay:
        $ref: '#/definitions/time.Duration'
      requireAuth:
        type: boolean
      tags:
        additionalProperties:
          type: string
        description: Metadata
        type: object
      timeout:
        $ref: '#/definitions/time.Duration'
      toolFilter:
        allOf:
          - $ref: '#/definitions/mcpproxy.ToolFilter'
        description: Tool filtering
      transport:
        $ref: '#/definitions/mcpproxy.TransportType'
      updatedAt:
        type: string
      url:
        description: HTTP-based transport configuration (SSE and streamable-http)
        type: string
    required:
      - name
      - transport
    type: object
  mcpproxy.MCPDetailsResponse:
    properties:
      definition:
        $ref: '#/definitions/mcpproxy.MCPDefinition'
      status:
        $ref: '#/definitions/mcpproxy.MCPStatus'
    type: object
  mcpproxy.MCPStatus:
    properties:
      avgResponseTime:
        $ref: '#/definitions/time.Duration'
      lastConnected:
        type: string
      lastError:
        type: string
      lastErrorTime:
        type: string
      name:
        type: string
      reconnectAttempts:
        type: integer
      status:
        $ref: '#/definitions/mcpproxy.ConnectionStatus'
      totalErrors:
        type: integer
      totalRequests:
        type: integer
      upTime:
        $ref: '#/definitions/time.Duration'
    type: object
  mcpproxy.ToolFilter:
    properties:
      list:
        items:
          type: string
        type: array
      mode:
        $ref: '#/definitions/mcpproxy.ToolFilterMode'
    required:
      - mode
    type: object
  mcpproxy.ToolFilterMode:
    enum:
      - allow
      - block
    type: string
    x-enum-varnames:
      - ToolFilterAllow
      - ToolFilterBlock
  mcpproxy.TransportType:
    enum:
      - stdio
      - sse
      - streamable-http
    type: string
    x-enum-varnames:
      - TransportStdio
      - TransportSSE
      - TransportStreamableHTTP
  memory.InstanceHealth:
    properties:
      consecutive_failures:
        type: integer
      error_message:
        type: string
      healthy:
        type: boolean
      last_checked:
        type: string
      memory_id:
        type: string
      token_usage:
        $ref: '#/definitions/memory.TokenUsageHealth'
    type: object
  memory.SystemHealth:
    properties:
      healthy:
        type: boolean
      healthy_instances:
        type: integer
      instance_health:
        additionalProperties:
          $ref: '#/definitions/memory.InstanceHealth'
        type: object
      last_checked:
        type: string
      system_errors:
        items:
          type: string
        type: array
      total_instances:
        type: integer
      unhealthy_instances:
        type: integer
    type: object
  memory.TokenUsageHealth:
    properties:
      max_tokens:
        type: integer
      near_limit:
        type: boolean
      usage_percentage:
        type: number
      used:
        type: integer
    type: object
  memrouter.AppendMemoryRequest:
    properties:
      key:
        type: string
      messages:
        items:
          additionalProperties: {}
          type: object
        type: array
    required:
      - key
      - messages
    type: object
  memrouter.ClearMemoryRequest:
    properties:
      backup:
        type: boolean
      confirm:
        type: boolean
      key:
        type: string
    required:
      - confirm
      - key
    type: object
  memrouter.DeleteMemoryRequest:
    properties:
      key:
        type: string
    required:
      - key
    type: object
  memrouter.FlushMemoryRequest:
    properties:
      dry_run:
        type: boolean
      force:
        type: boolean
      key:
        type: string
      max_keys:
        type: integer
      strategy:
        type: string
    required:
      - key
    type: object
  memrouter.WriteMemoryRequest:
    properties:
      key:
        type: string
      messages:
        items:
          additionalProperties: {}
          type: object
        type: array
    required:
      - key
      - messages
    type: object
  router.CreateUserRequest:
    properties:
      email:
        type: string
      role:
        type: string
    required:
      - email
    type: object
  router.ErrorInfo:
    properties:
      code:
        type: string
      details:
        type: string
      message:
        type: string
    type: object
  router.ErrorResponse:
    properties:
      details:
        type: string
      error:
        type: string
    type: object
  router.GenerateKeyData:
    properties:
      api_key:
        type: string
    type: object
  router.GenerateKeyResponse:
    properties:
      data:
        $ref: '#/definitions/router.GenerateKeyData'
      message:
        type: string
    type: object
  router.Response:
    properties:
      data: {}
      error:
        $ref: '#/definitions/router.ErrorInfo'
      message:
        type: string
      status:
        type: integer
    type: object
  router.UpdateUserRequest:
    properties:
      email:
        type: string
      role:
        type: string
    type: object
  schedulerouter.ScheduleInfoResponse:
    properties:
      cron:
        example: 0 0 9 * * 1-5
        type: string
      enabled:
        example: true
        type: boolean
      is_override:
        example: false
        type: boolean
      last_run_status:
        example: success
        type: string
      last_run_time:
        example: "2024-01-14T09:00:00-05:00"
        type: string
      next_run_time:
        example: "2024-01-15T09:00:00-05:00"
        type: string
      schedule_id:
        example: schedule-my-project-daily-report
        type: string
      timezone:
        example: America/New_York
        type: string
      workflow_id:
        example: daily-report
        type: string
      yaml_config:
        $ref: '#/definitions/workflow.Schedule'
    type: object
  schedulerouter.ScheduleListResponse:
    properties:
      schedules:
        items:
          $ref: '#/definitions/schedulerouter.ScheduleInfoResponse'
        type: array
      total:
        example: 5
        type: integer
    type: object
  schedulerouter.UpdateScheduleRequest:
    properties:
      cron:
        example: 0 0 */10 * * *
        type: string
      enabled:
        example: false
        type: boolean
    type: object
  schema.Schema:
    additionalProperties: {}
    type: object
  service.AppendResponse:
    properties:
      appended:
        type: integer
      key:
        type: string
      success:
        type: boolean
      total_count:
        type: integer
    type: object
  service.DeleteResponse:
    properties:
      key:
        type: string
      success:
        type: boolean
    type: object
  service.WriteResponse:
    properties:
      count:
        type: integer
      key:
        type: string
      success:
        type: boolean
    type: object
  task.ExecutionType:
    enum:
      - basic
      - router
      - parallel
      - collection
      - composite
      - wait
      - signal
      - aggregate
      - memory
    type: string
    x-enum-varnames:
      - ExecutionBasic
      - ExecutionRouter
      - ExecutionParallel
      - ExecutionCollection
      - ExecutionComposite
      - ExecutionWait
      - ExecutionSignal
      - ExecutionAggregate
      - ExecutionMemory
  task.State:
    properties:
      action_id:
        type: string
      agent_id:
        description: Basic execution fields (for single tasks)
        type: string
      component:
        allOf:
          - $ref: '#/definitions/core.ComponentType'
        description: Core identification
      created_at:
        description: Timestamps for audit trails and progress tracking
        type: string
      error:
        $ref: '#/definitions/core.Error'
      execution_type:
        allOf:
          - $ref: '#/definitions/task.ExecutionType'
        description: Execution type and strategy
      input:
        $ref: '#/definitions/core.Input'
      output:
        $ref: '#/definitions/core.Output'
      parent_state_id:
        description: Parent-child relationship for hierarchical tasks
        type: string
      status:
        $ref: '#/definitions/core.StatusType'
      task_exec_id:
        type: string
      task_id:
        type: string
      tool_id:
        type: string
      updated_at:
        type: string
      workflow_exec_id:
        type: string
      workflow_id:
        type: string
    type: object
  task.Type:
    enum:
      - basic
      - router
      - parallel
      - collection
      - aggregate
      - composite
      - signal
      - wait
      - memory
    type: string
    x-enum-varnames:
      - TaskTypeBasic
      - TaskTypeRouter
      - TaskTypeParallel
      - TaskTypeCollection
      - TaskTypeAggregate
      - TaskTypeComposite
      - TaskTypeSignal
      - TaskTypeWait
      - TaskTypeMemory
  time.Duration:
    enum:
      - -9223372036854775808
      - 9223372036854775807
      - 1
      - 1000
      - 1000000
      - 1000000000
      - 60000000000
      - 3600000000000
    type: integer
    x-enum-varnames:
      - minDuration
      - maxDuration
      - Nanosecond
      - Microsecond
      - Millisecond
      - Second
      - Minute
      - Hour
  tkrouter.TaskResponse:
    properties:
      action:
        type: string
      condition:
        description: Task-specific fields (without recursive Tasks/Task fields)
        type: string
      env:
        $ref: '#/definitions/core.EnvMap'
      has_subtasks:
        description: Metadata
        type: boolean
      id:
        description: BaseConfig fields
        type: string
      items: {}
      mode:
        type: string
      outputs:
        $ref: '#/definitions/core.Input'
      routes:
        additionalProperties: {}
        type: object
      signal_name:
        type: string
      strategy:
        type: string
      subtask_ids:
        items:
          type: string
        type: array
      timeout:
        type: string
      type:
        $ref: '#/definitions/task.Type'
      with:
        $ref: '#/definitions/core.Input'
    type: object
  tool.Config:
    properties:
      config:
        allOf:
          - $ref: '#/definitions/core.Input'
        description: |-
          Configuration parameters passed to the tool separately from input data.
          Provides static configuration that tools can use for initialization and behavior control.
          Unlike input parameters, config is not meant to change between tool invocations.

          - **Use cases:** API base URLs, retry policies, timeout settings, feature flags
          - **Separation:** Keeps configuration separate from runtime input data
          - **Override:** Can be overridden at workflow or agent level
          - **Example:**
            ```yaml
            config:
              base_url: "https://api.example.com"
              timeout: 30
              retry_count: 3
              headers:
                User-Agent: "Compozy/1.0"
            ```
      cwd:
        allOf:
          - $ref: '#/definitions/core.PathCWD'
        description: |-
          CWD defines the working directory for tool execution.
          Used for resolving relative file paths and setting process working directory.
      description:
        description: |-
          Human-readable description of the tool's functionality and purpose.
          This description is used by AI agents to understand when and how to use the tool.
          Should clearly explain capabilities, limitations, and expected use cases.

          - **Best practices:** Be specific about what the tool does and its constraints
          - **Example:** `"Read and parse various file formats including JSON, YAML, and CSV with size limits"`
        type: string
      env:
        allOf:
          - $ref: '#/definitions/core.EnvMap'
        description: |-
          Environment variables available during tool execution.
          Variables are isolated to the tool's execution context for security.
          Used for configuration, API keys, and runtime settings.

          - **Security:** Variables are only accessible within the tool's execution
          - **Template support:** Values can use template expressions for dynamic configuration
          - **Example:**
            ```yaml
            env:
              API_KEY: "{{ .env.SECRET_API_KEY }}"
              BASE_URL: "https://api.example.com"
              DEBUG: "{{ .project.debug | default(false) }}"
            ```
      id:
        description: |-
          Unique identifier for the tool within the project scope.
          Used for referencing the tool in agent configurations, workflows, and function calls.
          Must be unique across all tools in the project.

          - **Examples:** `"file-reader"`, `"api-client"`, `"data-processor"`
          - **Naming:** Use kebab-case for consistency with other Compozy identifiers
        type: string
      input:
        allOf:
          - $ref: '#/definitions/schema.Schema'
        description: |-
          JSON schema defining the expected input parameters for the tool.
          Used for validation before execution and to generate LLM function call definitions.
          Must follow JSON Schema Draft 7 specification for compatibility.

          - **When nil:** Tool accepts any input format (no validation performed)
          - **Use cases:** Parameter validation, type safety, auto-generated documentation
          - **Integration:** Automatically converts to LLM function parameters
      output:
        allOf:
          - $ref: '#/definitions/schema.Schema'
        description: |-
          JSON schema defining the expected output format from the tool.
          Used for validation after execution and documentation purposes.
          Must follow JSON Schema Draft 7 specification for compatibility.

          - **When nil:** No output validation is performed
          - **Use cases:** Response validation, type safety, workflow data flow verification
          - **Best practice:** Define output schema for tools used in critical workflows
      resource:
        description: |-
          Resource identifier for the autoloader system (must be `"tool"`).
          This field enables automatic discovery and registration of tool configurations.
        type: string
      timeout:
        description: |-
          Maximum execution time for the tool in Go duration format.
          If not specified, uses the global tool timeout from project configuration.
          This timeout applies to the entire tool execution lifecycle.

          - **Examples:** `"30s"`, `"5m"`, `"1h"`, `"500ms"`
          - **Constraints:** Must be positive; zero or negative values cause validation errors
          - **Default fallback:** Uses project-level tool timeout when empty
        type: string
      with:
        allOf:
          - $ref: '#/definitions/core.Input'
        description: |-
          Default input parameters merged with runtime parameters provided by agents.
          Provides a way to set tool defaults while allowing runtime customization.

          - **Merge strategy:** Runtime parameters override defaults (shallow merge)
          - **Use cases:** Default API URLs, fallback configurations, preset options
          - **Security note:** Avoid storing secrets here; use environment variables instead
    type: object
  uc.ClearMemoryResult:
    properties:
      backup_created:
        type: boolean
      key:
        type: string
      messages_cleared:
        type: integer
      success:
        type: boolean
    type: object
  uc.FlushMemoryResult:
    properties:
      actual_strategy:
        type: string
      dry_run:
        type: boolean
      error:
        type: string
      key:
        type: string
      message_count:
        type: integer
      success:
        type: boolean
      summary_generated:
        type: boolean
      token_count:
        type: integer
      would_flush:
        type: boolean
    type: object
  uc.HealthMemoryResult:
    properties:
      actual_strategy:
        type: string
      current_tokens:
        type: integer
      healthy:
        type: boolean
      key:
        type: string
      last_flush:
        type: string
      message_count:
        type: integer
      token_count:
        type: integer
    type: object
  uc.PaginationInfo:
    properties:
      has_more:
        type: boolean
      limit:
        type: integer
      offset:
        type: integer
      total_count:
        type: integer
    type: object
  uc.StatsMemoryOutput:
    properties:
      context_window_used:
        type: integer
      key:
        type: string
      message_count:
        type: integer
      pagination_info:
        $ref: '#/definitions/uc.PaginationInfo'
      role_distribution:
        additionalProperties:
          type: integer
        type: object
      token_count:
        type: integer
      token_limit:
        type: integer
      token_utilization:
        type: number
    type: object
  wfrouter.EventRequest:
    properties:
      name:
        type: string
      payload:
        $ref: '#/definitions/core.Input'
    required:
      - name
    type: object
  wfrouter.EventResponse:
    properties:
      event_id:
        type: string
      message:
        type: string
    type: object
  wfrouter.ExecuteWorkflowResponse:
    properties:
      exec_id:
        example: 2Z4PVTL6K27XVT4A3NPKMDD5BG
        type: string
      exec_url:
        example: localhost:5001/api/workflows/executions/2Z4PVTL6K27XVT4A3NPKMDD5BG
        type: string
      workflow_id:
        example: data-processing
        type: string
    type: object
  wfrouter.SignalRequest:
    properties:
      payload:
        allOf:
          - $ref: '#/definitions/core.Input'
        description: Payload contains the data to send with the signal
      signal_name:
        description: SignalName is the name of the signal to send to the workflow execution
        example: ready_signal
        type: string
    required:
      - signal_name
    type: object
  wfrouter.SignalResponse:
    properties:
      message:
        example: Signal sent successfully
        type: string
    type: object
  wfrouter.WorkflowResponse:
    properties:
      agent_count:
        type: integer
      author:
        $ref: '#/definitions/core.Author'
      config:
        allOf:
          - $ref: '#/definitions/workflow.Opts'
        description: Configuration
      description:
        type: string
      id:
        description: Basic workflow fields
        type: string
      mcp_count:
        type: integer
      schedule:
        $ref: '#/definitions/workflow.Schedule'
      task_count:
        description: Task information (without circular references)
        type: integer
      task_ids:
        items:
          type: string
        type: array
      tool_count:
        description: Other counts
        type: integer
      triggers:
        items:
          $ref: '#/definitions/workflow.Trigger'
        type: array
      version:
        type: string
    type: object
  workflow.Opts:
    properties:
      env:
        allOf:
          - $ref: '#/definitions/core.EnvMap'
        description: |-
          Environment variables available to the workflow and its components
          These variables are accessible to all tasks, agents, and tools within the workflow
      heartbeat_timeout:
        description: |-
          Interval for task heartbeat signals
          Used for long-running tasks to indicate progress

          - **Example**: "10s", "30s", "1m"
        type: string
      input:
        allOf:
          - $ref: '#/definitions/schema.Schema'
        description: |-
          Input schema for validating workflow input parameters
          Uses JSON Schema format to define expected input structure and validation rules
      on_error:
        allOf:
          - $ref: '#/definitions/core.ErrorTransition'
        description: |-
          Error handler configuration
          Defines what happens when a task fails after all retries
      retry_policy:
        allOf:
          - $ref: '#/definitions/core.RetryPolicyConfig'
        description: |-
          Retry configuration for transient failures
          Automatically retries failed tasks with exponential backoff
      schedule_to_close_timeout:
        description: |-
          Total timeout from scheduling to completion
          Default: "6m"

          - **Example**: "1m", "15m", "2h"
        type: string
      schedule_to_start_timeout:
        description: |-
          Maximum time to wait for a task to start executing
          Default: "1m"

          - **Example**: "30s", "5m", "1h"
        type: string
      start_to_close_timeout:
        description: |-
          Maximum time for task execution once started
          Default: "5m"

          - **Example**: "30s", "10m", "1h"
        type: string
    type: object
  workflow.OverlapPolicy:
    enum:
      - skip
      - allow
      - buffer_one
      - cancel_other
    type: string
    x-enum-varnames:
      - OverlapSkip
      - OverlapAllow
      - OverlapBufferOne
      - OverlapCancelOther
  workflow.Schedule:
    properties:
      cron:
        description: |-
          Cron expression for scheduling (required)
          Supports standard cron format: "minute hour day month weekday"
          Special strings: @yearly, @monthly, @weekly, @daily, @hourly
        type: string
      enabled:
        description: |-
          Whether the schedule is enabled (optional, default true)
          Set to false to temporarily disable scheduled runs without removing the configuration
        type: boolean
      end_at:
        description: |-
          End date for the schedule (optional)
          Schedule will not run after this time
        type: string
      input:
        additionalProperties: {}
        description: |-
          Default input values for scheduled runs (optional)
          These inputs are merged with any trigger inputs when the workflow executes
        type: object
      jitter:
        description: |-
          Random delay to add to execution time (optional)
          Format: "5m", "1h", "30s" - helps distribute load when many workflows run at the same time
        type: string
      overlap_policy:
        allOf:
          - $ref: '#/definitions/workflow.OverlapPolicy'
        description: |-
          Policy for handling overlapping executions (optional, default skip)
          Options: skip, allow, buffer_one, cancel_other
      start_at:
        description: |-
          Start date for the schedule (optional)
          Schedule will not run before this time
        type: string
      timezone:
        description: |-
          Timezone for schedule execution (optional, default UTC)
          Uses IANA timezone names (e.g., "America/New_York", "Europe/London")
        type: string
    required:
      - cron
    type: object
  workflow.State:
    properties:
      error:
        $ref: '#/definitions/core.Error'
      input:
        $ref: '#/definitions/core.Input'
      output:
        $ref: '#/definitions/core.Output'
      status:
        $ref: '#/definitions/core.StatusType'
      tasks:
        additionalProperties:
          $ref: '#/definitions/task.State'
        type: object
      workflow_exec_id:
        type: string
      workflow_id:
        type: string
    type: object
  workflow.Trigger:
    properties:
      name:
        description: Unique name for identifying this trigger
        type: string
      schema:
        allOf:
          - $ref: '#/definitions/schema.Schema'
        description: Schema for validating trigger input data (optional)
      type:
        allOf:
          - $ref: '#/definitions/workflow.TriggerType'
        description: Type of trigger mechanism (e.g., "signal" for external signals)
    type: object
  workflow.TriggerType:
    enum:
      - signal
    type: string
    x-enum-varnames:
      - TriggerTypeSignal

info:
  contact:
    email: support@compozy.com
    name: Compozy Support
    url: https://github.com/compozy/compozy
  description: Compozy is a Next-level Agentic Orchestration Platform, tasks, and tools
  license:
    name: BSL-1.1
    url: https://github.com/compozy/compozy/blob/main/LICENSE
  termsOfService: https://github.com/compozy/compozy
  title: Compozy API
  version: "1.0"

paths:
  /{name}/sse:
    get:
      description: Proxy Server-Sent Events requests to a specific MCP server
      parameters:
        - description: MCP name
          in: path
          name: name
          required: true
          type: string
      responses:
        "200":
          description: SSE stream
          schema:
            type: string
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
        "404":
          description: MCP not found
          schema:
            additionalProperties: true
            type: object
      summary: Proxy SSE requests to MCP server
      tags:
        - MCP Proxy
  /{name}/sse/{path}:
    get:
      description: Proxy Server-Sent Events requests to a specific MCP server
      parameters:
        - description: MCP name
          in: path
          name: name
          required: true
          type: string
        - description: Additional path
          in: path
          name: path
          type: string
      responses:
        "200":
          description: SSE stream
          schema:
            type: string
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
        "404":
          description: MCP not found
          schema:
            additionalProperties: true
            type: object
      summary: Proxy SSE requests to MCP server
      tags:
        - MCP Proxy
  /{name}/stream:
    delete:
      description: Proxy streamable HTTP requests to a specific MCP server
      parameters:
        - description: MCP name
          in: path
          name: name
          required: true
          type: string
      responses:
        "200":
          description: HTTP stream
          schema:
            type: string
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
        "404":
          description: MCP not found
          schema:
            additionalProperties: true
            type: object
      summary: Proxy streamable HTTP requests to MCP server
      tags:
        - MCP Proxy
    get:
      description: Proxy streamable HTTP requests to a specific MCP server
      parameters:
        - description: MCP name
          in: path
          name: name
          required: true
          type: string
      responses:
        "200":
          description: HTTP stream
          schema:
            type: string
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
        "404":
          description: MCP not found
          schema:
            additionalProperties: true
            type: object
      summary: Proxy streamable HTTP requests to MCP server
      tags:
        - MCP Proxy
    patch:
      description: Proxy streamable HTTP requests to a specific MCP server
      parameters:
        - description: MCP name
          in: path
          name: name
          required: true
          type: string
      responses:
        "200":
          description: HTTP stream
          schema:
            type: string
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
        "404":
          description: MCP not found
          schema:
            additionalProperties: true
            type: object
      summary: Proxy streamable HTTP requests to MCP server
      tags:
        - MCP Proxy
    post:
      description: Proxy streamable HTTP requests to a specific MCP server
      parameters:
        - description: MCP name
          in: path
          name: name
          required: true
          type: string
      responses:
        "200":
          description: HTTP stream
          schema:
            type: string
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
        "404":
          description: MCP not found
          schema:
            additionalProperties: true
            type: object
      summary: Proxy streamable HTTP requests to MCP server
      tags:
        - MCP Proxy
    put:
      description: Proxy streamable HTTP requests to a specific MCP server
      parameters:
        - description: MCP name
          in: path
          name: name
          required: true
          type: string
      responses:
        "200":
          description: HTTP stream
          schema:
            type: string
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
        "404":
          description: MCP not found
          schema:
            additionalProperties: true
            type: object
      summary: Proxy streamable HTTP requests to MCP server
      tags:
        - MCP Proxy
  /{name}/stream/{path}:
    delete:
      description: Proxy streamable HTTP requests to a specific MCP server
      parameters:
        - description: MCP name
          in: path
          name: name
          required: true
          type: string
        - description: Additional path
          in: path
          name: path
          type: string
      responses:
        "200":
          description: HTTP stream
          schema:
            type: string
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
        "404":
          description: MCP not found
          schema:
            additionalProperties: true
            type: object
      summary: Proxy streamable HTTP requests to MCP server
      tags:
        - MCP Proxy
    get:
      description: Proxy streamable HTTP requests to a specific MCP server
      parameters:
        - description: MCP name
          in: path
          name: name
          required: true
          type: string
        - description: Additional path
          in: path
          name: path
          type: string
      responses:
        "200":
          description: HTTP stream
          schema:
            type: string
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
        "404":
          description: MCP not found
          schema:
            additionalProperties: true
            type: object
      summary: Proxy streamable HTTP requests to MCP server
      tags:
        - MCP Proxy
    patch:
      description: Proxy streamable HTTP requests to a specific MCP server
      parameters:
        - description: MCP name
          in: path
          name: name
          required: true
          type: string
        - description: Additional path
          in: path
          name: path
          type: string
      responses:
        "200":
          description: HTTP stream
          schema:
            type: string
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
        "404":
          description: MCP not found
          schema:
            additionalProperties: true
            type: object
      summary: Proxy streamable HTTP requests to MCP server
      tags:
        - MCP Proxy
    post:
      description: Proxy streamable HTTP requests to a specific MCP server
      parameters:
        - description: MCP name
          in: path
          name: name
          required: true
          type: string
        - description: Additional path
          in: path
          name: path
          type: string
      responses:
        "200":
          description: HTTP stream
          schema:
            type: string
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
        "404":
          description: MCP not found
          schema:
            additionalProperties: true
            type: object
      summary: Proxy streamable HTTP requests to MCP server
      tags:
        - MCP Proxy
    put:
      description: Proxy streamable HTTP requests to a specific MCP server
      parameters:
        - description: MCP name
          in: path
          name: name
          required: true
          type: string
        - description: Additional path
          in: path
          name: path
          type: string
      responses:
        "200":
          description: HTTP stream
          schema:
            type: string
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
        "404":
          description: MCP not found
          schema:
            additionalProperties: true
            type: object
      summary: Proxy streamable HTTP requests to MCP server
      tags:
        - MCP Proxy
  /admin/mcps:
    get:
      description: Get a list of all configured Model Context Protocol servers
      parameters:
        - description: Admin authorization token
          in: header
          name: Authorization
          required: true
          type: string
      produces:
        - application/json
      responses:
        "200":
          description: List of MCPs with their status
          schema:
            $ref: '#/definitions/mcpproxy.ListMCPsResponse'
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: List all MCP definitions
      tags:
        - MCP Management
    post:
      consumes:
        - application/json
      description: Add a new Model Context Protocol server configuration
      parameters:
        - description: Admin authorization token
          in: header
          name: Authorization
          required: true
          type: string
        - description: MCP definition to add
          in: body
          name: mcp
          required: true
          schema:
            $ref: '#/definitions/mcpproxy.MCPDefinition'
      produces:
        - application/json
      responses:
        "201":
          description: MCP added successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "409":
          description: MCP already exists
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Add a new MCP definition
      tags:
        - MCP Management
  /admin/mcps/{name}:
    delete:
      description: Remove a Model Context Protocol server configuration
      parameters:
        - description: Admin authorization token
          in: header
          name: Authorization
          required: true
          type: string
        - description: MCP name
          in: path
          name: name
          required: true
          type: string
      produces:
        - application/json
      responses:
        "200":
          description: MCP removed successfully
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "404":
          description: MCP not found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Remove an MCP definition
      tags:
        - MCP Management
    get:
      description: Get details of a specific Model Context Protocol server configuration
      parameters:
        - description: Admin authorization token
          in: header
          name: Authorization
          required: true
          type: string
        - description: MCP name
          in: path
          name: name
          required: true
          type: string
      produces:
        - application/json
      responses:
        "200":
          description: MCP details with status
          schema:
            $ref: '#/definitions/mcpproxy.MCPDetailsResponse'
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "404":
          description: MCP not found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Get an MCP definition
      tags:
        - MCP Management
    put:
      consumes:
        - application/json
      description: Update an existing Model Context Protocol server configuration
      parameters:
        - description: Admin authorization token
          in: header
          name: Authorization
          required: true
          type: string
        - description: MCP name
          in: path
          name: name
          required: true
          type: string
        - description: Updated MCP definition
          in: body
          name: mcp
          required: true
          schema:
            $ref: '#/definitions/mcpproxy.MCPDefinition'
      produces:
        - application/json
      responses:
        "200":
          description: MCP updated successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "404":
          description: MCP not found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Update an MCP definition
      tags:
        - MCP Management
  /admin/tools:
    get:
      description: Get a list of all tools available from all connected MCP servers
      parameters:
        - description: Admin authorization token
          in: header
          name: Authorization
          required: true
          type: string
      produces:
        - application/json
      responses:
        "200":
          description: List of available tools
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: List all available tools
      tags:
        - MCP Tools
  /admin/tools/call:
    post:
      consumes:
        - application/json
      description: Execute a specific tool with provided arguments on the specified MCP server
      parameters:
        - description: Admin authorization token
          in: header
          name: Authorization
          required: true
          type: string
        - description: Tool call request
          in: body
          name: request
          required: true
          schema:
            $ref: '#/definitions/mcpproxy.CallToolRequest'
      produces:
        - application/json
      responses:
        "200":
          description: Tool execution result
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "404":
          description: MCP or tool not found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Tool execution failed
          schema:
            additionalProperties: true
            type: object
      summary: Call a tool on an MCP server
      tags:
        - MCP Tools
  /auth/generate:
    post:
      consumes:
        - application/json
      description: Generate a new API key for the authenticated user
      parameters:
        - description: Bearer token for authentication
          in: header
          name: Authorization
          required: true
          type: string
      produces:
        - application/json
      responses:
        "201":
          description: contains data.api_key and message
          schema:
            $ref: '#/definitions/router.GenerateKeyResponse'
        "401":
          description: authentication failure
          schema:
            $ref: '#/definitions/router.ErrorResponse'
        "500":
          description: internal server error
          schema:
            $ref: '#/definitions/router.ErrorResponse'
      summary: Generate a new API key
      tags:
        - auth
  /auth/keys:
    get:
      consumes:
        - application/json
      description: List all API keys for the authenticated user
      parameters:
        - description: Bearer token for authentication
          in: header
          name: Authorization
          required: true
          type: string
      produces:
        - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: List user's API keys
      tags:
        - auth
  /auth/keys/{id}:
    delete:
      consumes:
        - application/json
      description: Revoke an API key by ID
      parameters:
        - description: Bearer token for authentication
          in: header
          name: Authorization
          required: true
          type: string
        - description: API Key ID
          in: path
          name: id
          required: true
          type: string
      produces:
        - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Revoke an API key
      tags:
        - auth
  /events:
    post:
      consumes:
        - application/json
      description: Trigger workflows by sending events
      parameters:
        - description: Event data
          in: body
          name: event
          required: true
          schema:
            $ref: '#/definitions/wfrouter.EventRequest'
      produces:
        - application/json
      responses:
        "202":
          description: Accepted
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  data:
                    $ref: '#/definitions/wfrouter.EventResponse'
                type: object
        "400":
          description: Bad Request
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
      summary: Send event
      tags:
        - events
  /executions/workflows:
    get:
      consumes:
        - application/json
      description: Retrieve a list of all workflow executions across all workflows
      produces:
        - application/json
      responses:
        "200":
          description: Workflow executions retrieved successfully
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  data:
                    properties:
                      executions:
                        items:
                          $ref: '#/definitions/workflow.State'
                        type: array
                    type: object
                type: object
        "500":
          description: Internal server error
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
      summary: List all workflow executions
      tags:
        - workflows
  /executions/workflows/{exec_id}:
    get:
      consumes:
        - application/json
      description: Retrieve a specific workflow execution by its execution ID
      parameters:
        - description: Workflow Execution ID
          example: '"2Z4PVTL6K27XVT4A3NPKMDD5BG"'
          in: path
          name: exec_id
          required: true
          type: string
      produces:
        - application/json
      responses:
        "200":
          description: Workflow execution retrieved successfully
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  data:
                    $ref: '#/definitions/workflow.State'
                type: object
        "400":
          description: Invalid execution ID
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
        "404":
          description: Execution not found
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
        "500":
          description: Internal server error
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
      summary: Get workflow execution by ID
      tags:
        - executions
  /executions/workflows/{exec_id}/cancel:
    post:
      consumes:
        - application/json
      description: Cancel a specific workflow execution by its execution ID
      parameters:
        - description: Workflow Execution ID
          example: '"workflowID_execID"'
          in: path
          name: exec_id
          required: true
          type: string
      produces:
        - application/json
      responses:
        "200":
          description: Workflow execution canceled successfully
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  data:
                    type: string
                type: object
        "400":
          description: Invalid execution ID
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
        "500":
          description: Internal server error
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
      summary: Cancel workflow execution
      tags:
        - executions
  /executions/workflows/{exec_id}/pause:
    post:
      consumes:
        - application/json
      description: Pause a specific workflow execution by its execution ID
      parameters:
        - description: Workflow Execution ID
          example: '"workflowID_execID"'
          in: path
          name: exec_id
          required: true
          type: string
      produces:
        - application/json
      responses:
        "200":
          description: Workflow execution paused successfully
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  data:
                    type: string
                type: object
        "400":
          description: Invalid execution ID
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
        "500":
          description: Internal server error
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
      summary: Pause workflow execution
      tags:
        - executions
  /executions/workflows/{exec_id}/resume:
    post:
      consumes:
        - application/json
      description: Resume a specific workflow execution by its execution ID
      parameters:
        - description: Workflow Execution ID
          example: '"workflowID_execID"'
          in: path
          name: exec_id
          required: true
          type: string
      produces:
        - application/json
      responses:
        "200":
          description: Workflow execution resumed successfully
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  data:
                    type: string
                type: object
        "400":
          description: Invalid execution ID
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
        "500":
          description: Internal server error
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
      summary: Resume workflow execution
      tags:
        - executions
  /executions/workflows/{exec_id}/signals:
    post:
      consumes:
        - application/json
      description: Send a signal with payload to a specific workflow execution
      parameters:
        - description: Workflow Execution ID
          example: '"2Z4PVTL6K27XVT4A3NPKMDD5BG"'
          in: path
          name: exec_id
          required: true
          type: string
        - description: Signal data
          in: body
          name: signal
          required: true
          schema:
            $ref: '#/definitions/wfrouter.SignalRequest'
      produces:
        - application/json
      responses:
        "200":
          description: Signal sent successfully
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  data:
                    $ref: '#/definitions/wfrouter.SignalResponse'
                type: object
        "400":
          description: Invalid execution ID or signal data
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
        "404":
          description: Execution not found
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
        "500":
          description: Internal server error
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
      summary: Send signal to workflow execution
      tags:
        - executions
  /memory/{memory_ref}/append:
    post:
      consumes:
        - application/json
      description: Append messages to existing memory content
      parameters:
        - description: Memory reference
          example: '"user_memory"'
          in: path
          name: memory_ref
          required: true
          type: string
        - description: Key and messages to append
          in: body
          name: body
          required: true
          schema:
            $ref: '#/definitions/memrouter.AppendMemoryRequest'
      produces:
        - application/json
      responses:
        "200":
          description: Memory appended successfully
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  data:
                    $ref: '#/definitions/service.AppendResponse'
                type: object
        "400":
          description: Invalid request
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
        "500":
          description: Internal server error
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
      summary: Append to memory
      tags:
        - memory
  /memory/{memory_ref}/clear:
    post:
      consumes:
        - application/json
      description: Clear all memory content with confirmation
      parameters:
        - description: Memory reference
          example: '"user_memory"'
          in: path
          name: memory_ref
          required: true
          type: string
        - description: Key and clear options
          in: body
          name: body
          required: true
          schema:
            $ref: '#/definitions/memrouter.ClearMemoryRequest'
      produces:
        - application/json
      responses:
        "200":
          description: Memory cleared successfully
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  data:
                    $ref: '#/definitions/uc.ClearMemoryResult'
                type: object
        "400":
          description: Invalid request
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
        "500":
          description: Internal server error
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
      summary: Clear memory
      tags:
        - memory
  /memory/{memory_ref}/delete:
    post:
      consumes:
        - application/json
      description: Delete all memory content for a specific key
      parameters:
        - description: Memory reference
          example: '"user_memory"'
          in: path
          name: memory_ref
          required: true
          type: string
        - description: Key to delete
          in: body
          name: body
          required: true
          schema:
            $ref: '#/definitions/memrouter.DeleteMemoryRequest'
      produces:
        - application/json
      responses:
        "200":
          description: Memory deleted successfully
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  data:
                    $ref: '#/definitions/service.DeleteResponse'
                type: object
        "400":
          description: Invalid request
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
        "500":
          description: Internal server error
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
      summary: Delete memory
      tags:
        - memory
  /memory/{memory_ref}/flush:
    post:
      consumes:
        - application/json
      description: Flush memory content with optional summarization. The actual_strategy field in the
        response indicates which flush strategy was used.
      parameters:
        - description: Memory reference
          example: '"user_memory"'
          in: path
          name: memory_ref
          required: true
          type: string
        - description: Key and flush options
          in: body
          name: body
          required: true
          schema:
            $ref: '#/definitions/memrouter.FlushMemoryRequest'
      produces:
        - application/json
      responses:
        "200":
          description: Memory flushed successfully. Response includes actual_strategy field showing which
            strategy was used
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  data:
                    $ref: '#/definitions/uc.FlushMemoryResult'
                type: object
        "400":
          description: Invalid request
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
        "500":
          description: Internal server error
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
      summary: Flush memory
      tags:
        - memory
  /memory/{memory_ref}/health:
    get:
      consumes:
        - application/json
      description: Get health status and metrics for memory
      parameters:
        - description: Memory reference
          example: '"user_memory"'
          in: path
          name: memory_ref
          required: true
          type: string
        - description: Memory key
          example: '"user:123:profile"'
          in: query
          name: key
          required: true
          type: string
        - description: Include detailed stats
          example: true
          in: query
          name: include_stats
          type: boolean
      produces:
        - application/json
      responses:
        "200":
          description: Memory health retrieved successfully
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  data:
                    $ref: '#/definitions/uc.HealthMemoryResult'
                type: object
        "400":
          description: Invalid request
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
        "500":
          description: Internal server error
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
      summary: Check memory health
      tags:
        - memory
  /memory/{memory_ref}/read:
    get:
      consumes:
        - application/json
      description: Retrieve memory content for a specific memory reference and key
      parameters:
        - description: Memory reference
          example: '"user_memory"'
          in: path
          name: memory_ref
          required: true
          type: string
        - description: Memory key
          example: '"user:123:profile"'
          in: query
          name: key
          required: true
          type: string
        - description: 'Maximum number of messages to return (default: 50, max: 1000)'
          example: 50
          in: query
          name: limit
          type: integer
        - description: Number of messages to skip (for pagination)
          example: 0
          in: query
          name: offset
          type: integer
      produces:
        - application/json
      responses:
        "200":
          description: Memory read successfully
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  data:
                    properties:
                      has_more:
                        type: boolean
                      key:
                        type: string
                      limit:
                        type: integer
                      messages:
                        items:
                          properties:
                            content:
                              type: string
                            role:
                              type: string
                          type: object
                        type: array
                      offset:
                        type: integer
                      total_count:
                        type: integer
                    type: object
                type: object
        "400":
          description: Invalid request
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
        "404":
          description: Memory not found
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
        "500":
          description: Internal server error
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
      summary: Read memory content
      tags:
        - memory
  /memory/{memory_ref}/stats:
    get:
      consumes:
        - application/json
      description: Retrieve detailed statistics about memory content
      parameters:
        - description: Memory reference
          example: '"user_memory"'
          in: path
          name: memory_ref
          required: true
          type: string
        - description: Memory key
          example: '"user:123:profile"'
          in: query
          name: key
          required: true
          type: string
        - description: 'Limit for role distribution calculation (default: 100, max: 10000)'
          example: 100
          in: query
          name: limit
          type: integer
        - description: Offset for role distribution calculation
          example: 0
          in: query
          name: offset
          type: integer
      produces:
        - application/json
      responses:
        "200":
          description: Memory statistics retrieved successfully
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  data:
                    $ref: '#/definitions/uc.StatsMemoryOutput'
                type: object
        "400":
          description: Invalid request
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
        "500":
          description: Internal server error
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
      summary: Get memory statistics
      tags:
        - memory
  /memory/{memory_ref}/write:
    post:
      consumes:
        - application/json
      description: Write or replace memory content for a specific memory reference and key
      parameters:
        - description: Memory reference
          example: '"user_memory"'
          in: path
          name: memory_ref
          required: true
          type: string
        - description: Key and messages to write
          in: body
          name: body
          required: true
          schema:
            $ref: '#/definitions/memrouter.WriteMemoryRequest'
      produces:
        - application/json
      responses:
        "200":
          description: Memory written successfully
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  data:
                    $ref: '#/definitions/service.WriteResponse'
                type: object
        "400":
          description: Invalid request
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
        "500":
          description: Internal server error
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
      summary: Write memory content
      tags:
        - memory
  /memory/health:
    get:
      consumes:
        - application/json
      description: Returns comprehensive health information for the memory system
      produces:
        - application/json
      responses:
        "200":
          description: Memory system is healthy
          schema:
            $ref: '#/definitions/memory.SystemHealth'
        "503":
          description: Memory system is unhealthy
          schema:
            $ref: '#/definitions/memory.SystemHealth'
      summary: Get memory system health
      tags:
        - memory
        - health
  /memory/health/{memory_id}:
    get:
      consumes:
        - application/json
      description: Returns health information for a specific memory instance
      parameters:
        - description: Memory Instance ID
          in: path
          name: memory_id
          required: true
          type: string
      produces:
        - application/json
      responses:
        "200":
          description: Memory instance health retrieved
          schema:
            $ref: '#/definitions/memory.InstanceHealth'
        "404":
          description: Memory instance not found
          schema:
            $ref: '#/definitions/gin.H'
      summary: Get memory instance health
      tags:
        - memory
        - health
  /metrics:
    get:
      description: |-
        Exposes application metrics in Prometheus exposition format.
        This endpoint is used by Prometheus servers to scrape metrics.

        The response is in text/plain format following the Prometheus
        exposition format specification.

        Available metrics include:
        - HTTP request rates and latencies
        - Temporal workflow execution metrics
        - System health information
      produces:
        - text/plain
      responses:
        "200":
          description: Metrics in Prometheus format
          schema:
            type: string
        "503":
          description: Monitoring service unavailable
          schema:
            type: string
      summary: Prometheus metrics endpoint
      tags:
        - Operations
  /schedules:
    get:
      consumes:
        - application/json
      description: Retrieve a list of all scheduled workflows with their current status and override information
      produces:
        - application/json
      responses:
        "200":
          description: Schedules retrieved successfully
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  data:
                    $ref: '#/definitions/schedulerouter.ScheduleListResponse'
                type: object
        "500":
          description: Internal server error
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
      summary: List all scheduled workflows
      tags:
        - schedules
  /schedules/{workflow_id}:
    delete:
      consumes:
        - application/json
      description: Remove a scheduled workflow from Temporal. The schedule will be recreated on the next
        YAML reload if still defined.
      parameters:
        - description: Workflow ID
          example: '"daily-report"'
          in: path
          name: workflow_id
          required: true
          type: string
      produces:
        - application/json
      responses:
        "204":
          description: Schedule deleted successfully
        "400":
          description: Invalid workflow ID
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
        "404":
          description: Schedule not found
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
        "500":
          description: Internal server error
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
      summary: Delete schedule
      tags:
        - schedules
    get:
      consumes:
        - application/json
      description: Retrieve detailed information about a specific scheduled workflow including YAML configuration
      parameters:
        - description: Workflow ID
          example: '"daily-report"'
          in: path
          name: workflow_id
          required: true
          type: string
      produces:
        - application/json
      responses:
        "200":
          description: Schedule retrieved successfully
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  data:
                    $ref: '#/definitions/schedulerouter.ScheduleInfoResponse'
                type: object
        "400":
          description: Invalid workflow ID
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
        "404":
          description: Schedule not found
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
        "500":
          description: Internal server error
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
      summary: Get schedule by workflow ID
      tags:
        - schedules
    patch:
      consumes:
        - application/json
      description: Update a scheduled workflow's enabled state and/or cron expression. At least one field
        must be provided. This creates a temporary override that persists until the next YAML reload.
      parameters:
        - description: Workflow ID
          example: '"daily-report"'
          in: path
          name: workflow_id
          required: true
          type: string
        - description: Update request with at least one field (enabled or cron)
          in: body
          name: request
          required: true
          schema:
            $ref: '#/definitions/schedulerouter.UpdateScheduleRequest'
      produces:
        - application/json
      responses:
        "200":
          description: Schedule updated successfully
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  data:
                    $ref: '#/definitions/schedulerouter.ScheduleInfoResponse'
                type: object
        "400":
          description: Invalid request
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
        "404":
          description: Schedule not found
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
        "500":
          description: Internal server error
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
      summary: Update schedule
      tags:
        - schedules
  /users:
    get:
      consumes:
        - application/json
      description: List all users in the system
      parameters:
        - description: Bearer token for authentication (admin required)
          in: header
          name: Authorization
          required: true
          type: string
      produces:
        - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: List all users (admin only)
      tags:
        - users
    post:
      consumes:
        - application/json
      description: Create a new user with the specified email and role
      parameters:
        - description: Bearer token for authentication (admin required)
          in: header
          name: Authorization
          required: true
          type: string
        - description: User details
          in: body
          name: user
          required: true
          schema:
            $ref: '#/definitions/router.CreateUserRequest'
      produces:
        - application/json
      responses:
        "201":
          description: Created
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Create a new user (admin only)
      tags:
        - users
  /users/{id}:
    delete:
      consumes:
        - application/json
      description: Delete a user by ID
      parameters:
        - description: Bearer token for authentication (admin required)
          in: header
          name: Authorization
          required: true
          type: string
        - description: User ID
          in: path
          name: id
          required: true
          type: string
      produces:
        - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Delete a user (admin only)
      tags:
        - users
    patch:
      consumes:
        - application/json
      description: Update a user's email or role
      parameters:
        - description: Bearer token for authentication (admin required)
          in: header
          name: Authorization
          required: true
          type: string
        - description: User ID
          in: path
          name: id
          required: true
          type: string
        - description: User update details
          in: body
          name: user
          required: true
          schema:
            $ref: '#/definitions/router.UpdateUserRequest'
      produces:
        - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Update a user (admin only)
      tags:
        - users
  /workflows:
    get:
      consumes:
        - application/json
      description: Retrieve a list of all available workflow configurations
      produces:
        - application/json
      responses:
        "200":
          description: Workflows retrieved successfully
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  data:
                    properties:
                      workflows:
                        items:
                          $ref: '#/definitions/wfrouter.WorkflowResponse'
                        type: array
                    type: object
                type: object
        "500":
          description: Internal server error
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
      summary: List all workflows
      tags:
        - workflows
  /workflows/{workflow_id}:
    get:
      consumes:
        - application/json
      description: Retrieve a specific workflow configuration by its ID
      parameters:
        - description: Workflow ID
          example: '"data-processing"'
          in: path
          name: workflow_id
          required: true
          type: string
      produces:
        - application/json
      responses:
        "200":
          description: Workflow retrieved successfully
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  data:
                    $ref: '#/definitions/wfrouter.WorkflowResponse'
                type: object
        "400":
          description: Invalid workflow ID
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
        "404":
          description: Workflow not found
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
        "500":
          description: Internal server error
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
      summary: Get workflow by ID
      tags:
        - workflows
  /workflows/{workflow_id}/agents:
    get:
      consumes:
        - application/json
      description: Retrieve a list of all available agent configurations
      parameters:
        - description: Workflow ID
          in: path
          name: workflow_id
          required: true
          type: string
      produces:
        - application/json
      responses:
        "200":
          description: Agents retrieved successfully
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  data:
                    properties:
                      agents:
                        items:
                          $ref: '#/definitions/agent.Config'
                        type: array
                    type: object
                type: object
        "500":
          description: Internal server error
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
      summary: List all agents
      tags:
        - agents
  /workflows/{workflow_id}/agents/{agent_id}:
    get:
      consumes:
        - application/json
      description: Retrieve a specific agent configuration by its ID
      parameters:
        - description: Workflow ID
          in: path
          name: workflow_id
          required: true
          type: string
        - description: Agent ID
          example: '"code-assistant"'
          in: path
          name: agent_id
          required: true
          type: string
      produces:
        - application/json
      responses:
        "200":
          description: Agent retrieved successfully
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  data:
                    $ref: '#/definitions/agent.Config'
                type: object
        "400":
          description: Invalid agent ID
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
        "404":
          description: Agent not found
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
        "500":
          description: Internal server error
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
      summary: Get agent by ID
      tags:
        - agents
  /workflows/{workflow_id}/executions:
    get:
      consumes:
        - application/json
      description: Retrieve all executions for a specific workflow
      parameters:
        - description: Workflow ID
          example: '"data-processing"'
          in: path
          name: workflow_id
          required: true
          type: string
      produces:
        - application/json
      responses:
        "200":
          description: Workflow executions retrieved successfully
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  data:
                    properties:
                      executions:
                        items:
                          $ref: '#/definitions/workflow.State'
                        type: array
                    type: object
                type: object
        "400":
          description: Invalid workflow ID
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
        "500":
          description: Internal server error
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
      summary: List executions by workflow ID
      tags:
        - workflows
    post:
      consumes:
        - application/json
      description: Trigger the execution of a workflow with provided input data
      parameters:
        - description: Workflow ID
          example: '"data-processing"'
          in: path
          name: workflow_id
          required: true
          type: string
        - description: Workflow input data
          in: body
          name: input
          required: true
          schema:
            type: object
      produces:
        - application/json
      responses:
        "202":
          description: Workflow triggered successfully
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  data:
                    $ref: '#/definitions/wfrouter.ExecuteWorkflowResponse'
                type: object
        "400":
          description: Invalid input or workflow ID
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
        "404":
          description: Workflow not found
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
        "500":
          description: Internal server error
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
      summary: Execute workflow
      tags:
        - workflows
  /workflows/{workflow_id}/tasks:
    get:
      consumes:
        - application/json
      description: Retrieve a list of all tasks within a specific workflow
      parameters:
        - description: Workflow ID
          example: '"data-processing"'
          in: path
          name: workflow_id
          required: true
          type: string
      produces:
        - application/json
      responses:
        "200":
          description: Tasks retrieved successfully
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  data:
                    properties:
                      tasks:
                        items:
                          $ref: '#/definitions/tkrouter.TaskResponse'
                        type: array
                    type: object
                type: object
        "400":
          description: Invalid workflow ID
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
        "404":
          description: Workflow not found
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
        "500":
          description: Internal server error
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
      summary: List tasks for a workflow
      tags:
        - tasks
  /workflows/{workflow_id}/tasks/{task_id}:
    get:
      consumes:
        - application/json
      description: Retrieve a specific task configuration by its ID within a workflow
      parameters:
        - description: Workflow ID
          example: '"data-processing"'
          in: path
          name: workflow_id
          required: true
          type: string
        - description: Task ID
          example: '"validate-input"'
          in: path
          name: task_id
          required: true
          type: string
      produces:
        - application/json
      responses:
        "200":
          description: Task retrieved successfully
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  data:
                    $ref: '#/definitions/tkrouter.TaskResponse'
                type: object
        "400":
          description: Invalid workflow or task ID
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
        "404":
          description: Task not found
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
        "500":
          description: Internal server error
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
      summary: Get task by ID
      tags:
        - tasks
  /workflows/{workflow_id}/tools:
    get:
      consumes:
        - application/json
      description: Retrieve a list of all available tool configurations
      parameters:
        - description: Workflow ID
          in: path
          name: workflow_id
          required: true
          type: string
      produces:
        - application/json
      responses:
        "200":
          description: Tools retrieved successfully
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  data:
                    properties:
                      tools:
                        items:
                          $ref: '#/definitions/tool.Config'
                        type: array
                    type: object
                type: object
        "500":
          description: Internal server error
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
      summary: List all tools
      tags:
        - tools
  /workflows/{workflow_id}/tools/{tool_id}:
    get:
      consumes:
        - application/json
      description: Retrieve a specific tool configuration by its ID
      parameters:
        - description: Workflow ID
          in: path
          name: workflow_id
          required: true
          type: string
        - description: Tool ID
          example: '"format-code"'
          in: path
          name: tool_id
          required: true
          type: string
      produces:
        - application/json
      responses:
        "200":
          description: Tool retrieved successfully
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  data:
                    $ref: '#/definitions/tool.Config'
                type: object
        "400":
          description: Invalid tool ID
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
        "404":
          description: Tool not found
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
        "500":
          description: Internal server error
          schema:
            allOf:
              - $ref: '#/definitions/router.Response'
              - properties:
                  error:
                    $ref: '#/definitions/router.ErrorInfo'
                type: object
      summary: Get tool by ID
      tags:
        - tools

swagger: "2.0"

tags:
  - description: Workflow management operations
    name: workflows
  - description: Task management operations
    name: tasks
  - description: Agent management operations
    name: agents
  - description: Tool management operations
    name: tools
  - description: Schedule management operations
    name: schedules
  - description: Memory management operations
    name: memory
  - description: Authentication and API key management operations
    name: auth
  - description: User management operations (admin only)
    name: users
  - description: Operational endpoints for monitoring and health
    name: Operations
