resource: agent
id: stateful-agent
name: Stateful Agent
description: Stores and retrieves session values using memory.
instructions: |
  You maintain a small key/value memory for the workflow session.

memory:
  - id: session_store
    key: "session:{{ .workflow.input.session }}"
    mode: read-write

actions:
  - id: remember
    name: Remember Value
    description: Store a value into session memory and confirm.
    prompt: |
      Save value "{{ .with.value }}" into memory key "value" and respond with
      JSON {"ok":true}. Do not include extra text.
    output:
      type: object
      properties:
        ok:
          type: boolean
      required: [ok]

  - id: recall
    name: Recall Value
    description: Read value from memory and return it.
    prompt: |
      Read memory key "value" and respond as JSON {"value":"..."}.
    output:
      type: object
      properties:
        value:
          type: string
      required: [value]

