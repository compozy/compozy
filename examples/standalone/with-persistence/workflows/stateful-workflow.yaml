id: stateful-demo
version: 0.1.0
description: Demonstrates agent memory across workflow steps.

schemas:
  - id: input
    type: object
    properties:
      session:
        type: string
      value:
        type: string
    required: [session, value]

config:
  input: input

tasks:
  - id: write
    type: basic
    agent: stateful-agent
    action: remember
    with:
      value: "{{ .workflow.input.value }}"
    on_success:
      next: read

  - id: read
    type: basic
    agent: stateful-agent
    action: recall
    final: true

outputs:
  value: "{{ .tasks.read.output.value }}"

