{
  "$id": "config-mcpproxy.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "additionalProperties": false,
  "description": "MCPProxyConfig contains MCP proxy server configuration.",
  "properties": {
    "base_url": {
      "description": "BaseURL specifies the base URL for MCP proxy API endpoints.\n\n**Default**: `\"\"` (empty string)",
      "type": "string"
    },
    "host": {
      "description": "Host specifies the network interface to bind the MCP proxy server to.\n\n**Default**: `\"0.0.0.0\"`",
      "type": "string"
    },
    "idle_conn_timeout": {
      "description": "IdleConnTimeout is the maximum amount of time an idle (keep-alive) connection will remain\nidle before closing itself.\n\n**Default**: `90s`",
      "type": "integer"
    },
    "max_conns_per_host": {
      "description": "MaxConnsPerHost caps the total number of simultaneous connections per host.\n\n**Default**: `128`",
      "type": "integer"
    },
    "max_idle_conns": {
      "description": "MaxIdleConns controls the maximum number of idle (keep-alive) connections across all hosts.\n\n**Default**: `128`",
      "type": "integer"
    },
    "max_idle_conns_per_host": {
      "description": "MaxIdleConnsPerHost controls the maximum idle (keep-alive) connections to keep per-host.\n\n**Default**: `128`",
      "type": "integer"
    },
    "mode": {
      "description": "Mode controls how the MCP proxy runs within Compozy.\n\nValues:\n  - \"memory\": Embed the MCP proxy inside the server with in-memory state\n  - \"persistent\": Embed the MCP proxy with durable on-disk state\n  - \"distributed\": Delegate to an external MCP proxy endpoint\n  - \"\": Inherit the global deployment mode (default)\n\nWhen embedded, the server manages lifecycle and health of the proxy\nand will set LLM.ProxyURL if empty.",
      "type": "string"
    },
    "port": {
      "description": "Port specifies the TCP port for the MCP proxy server.\n\n**Default**: `0` (ephemeral)",
      "type": "integer"
    },
    "shutdown_timeout": {
      "description": "ShutdownTimeout sets timeout for graceful shutdown.\n\n**Default**: `30s`",
      "type": "integer"
    }
  },
  "title": "MCP Proxy Configuration",
  "type": "object",
  "yamlCompatible": true
}
