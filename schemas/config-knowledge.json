{
  "$defs": {
    "VectorDBConfig": {
      "additionalProperties": false,
      "description": "VectorDBConfig describes an external vector database integration available at runtime.",
      "properties": {
        "id": {
          "type": "string"
        },
        "options": {
          "type": "object"
        },
        "path": {
          "type": "string"
        },
        "provider": {
          "type": "string"
        },
        "url": {
          "type": "string"
        }
      },
      "type": "object"
    }
  },
  "$id": "config-knowledge.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "additionalProperties": false,
  "description": "KnowledgeConfig contains default tuning knobs for knowledge ingestion and retrieval.",
  "properties": {
    "chunk_overlap": {
      "description": "ChunkOverlap defines the default overlap between adjacent chunks.\n\nApplied when chunking.overlap is omitted. Values greater than or equal to ChunkSize\nare ignored during normalization.",
      "type": "integer"
    },
    "chunk_size": {
      "description": "ChunkSize sets the default chunk size (in tokens) for source splitting.\n\nEnforced when chunking.size is not provided.\nMust remain within the supported range for knowledge ingestion.",
      "type": "integer"
    },
    "embedder_batch_size": {
      "description": "EmbedderBatchSize defines the default batch size used when projecting documents.\n\nApplies when an embedder configuration omits config.batch_size.\nLarger batches improve throughput but may increase provider throttling risk.",
      "type": "integer"
    },
    "max_markdown_file_size_bytes": {
      "description": "MaxMarkdownFileSizeBytes limits the size of markdown files ingested from disk or URLs.\n\nFiles exceeding this threshold are rejected during ingestion.",
      "type": "integer"
    },
    "retrieval_min_score": {
      "description": "RetrievalMinScore sets the default minimum similarity score required for matches.\n\nApplied when retrieval.min_score is not provided. Must fall within [0.0, 1.0].",
      "type": "number"
    },
    "retrieval_top_k": {
      "description": "RetrievalTopK specifies the default number of results returned during retrieval.\n\nUsed when retrieval.top_k is unset on a knowledge binding or base definition.",
      "type": "integer"
    },
    "vector_dbs": {
      "description": "VectorDBs declares global vector database connections available to knowledge features.\nWhen SQLite is selected, at least one external vector database should be configured.",
      "items": {
        "$ref": "#/$defs/VectorDBConfig"
      },
      "type": "array"
    },
    "vector_http_timeout": {
      "description": "VectorHTTPTimeout bounds HTTP requests made by knowledge vector backends.\n\nApplies to HTTP-based vector stores such as Qdrant.",
      "type": "integer"
    }
  },
  "title": "Knowledge Configuration",
  "type": "object",
  "yamlCompatible": true
}
